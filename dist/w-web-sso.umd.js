/*!
 * w-web-sso v1.0.36
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path"),require("fs"),require("@hapi/hapi"),require("@hapi/inert"),require("stream"),require("worker_threads"),require("url"),require("events"),require("util"),require("http"),require("https"),require("zlib"),require("net"),require("dns"),require("os"),require("crypto"),require("tls"),require("child_process")):"function"==typeof define&&define.amd?define(["path","fs","@hapi/hapi","@hapi/inert","stream","worker_threads","url","events","util","http","https","zlib","net","dns","os","crypto","tls","child_process"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["w-web-sso"]=t(e.path,e.fs,e["@hapi/hapi"],e["@hapi/inert"],e.stream,e.require$$0$1,e.require$$0$3,e.events,e.require$$1$1,e.require$$0$4,e.require$$1,e.require$$3,e.require$$7,e.require$$4,e.require$$6,e.crypto,e.require$$1$2,e.require$$0$6)}(this,(function(e,t,i,n,s,o,a,r,c,l,u,p,d,m,h,g,f,w){"use strict";var y="undefined"!=typeof document?document.currentScript:null,x=Array.isArray,D="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,M=D||v||Function("return this")(),C=M.Symbol,I=Object.prototype,b=I.hasOwnProperty,L=I.toString,A=C?C.toStringTag:void 0;var E=Object.prototype.toString;var N=C?C.toStringTag:void 0;function T(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":N&&N in Object(e)?function(e){var t=b.call(e,A),i=e[A];try{e[A]=void 0;var n=!0}catch(e){}var s=L.call(e);return n&&(t?e[A]=i:delete e[A]),s}(e):function(e){return E.call(e)}(e)}function S(e){return null!=e&&"object"==typeof e}function k(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==T(e)}var Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function X(e,t){if(x(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!k(e))||(j.test(e)||!Z.test(e)||null!=t&&e in Object(t))}function Y(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function z(e){if(!Y(e))return!1;var t=T(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var F,G=M["__core-js_shared__"],H=(F=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var K=Function.prototype.toString;function B(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var W=/^\[object .+?Constructor\]$/,U=Function.prototype,P=Object.prototype,V=U.toString,_=P.hasOwnProperty,R=RegExp("^"+V.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Q(e){return!(!Y(e)||(t=e,H&&H in t))&&(z(e)?R:W).test(B(e));var t}function O(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return Q(i)?i:void 0}var J=O(Object,"create");var q=Object.prototype.hasOwnProperty;var $=Object.prototype.hasOwnProperty;function ee(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function te(e,t){return e===t||e!=e&&t!=t}function ie(e,t){for(var i=e.length;i--;)if(te(e[i][0],t))return i;return-1}ee.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ee.prototype.get=function(e){var t=this.__data__;if(J){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return q.call(t,e)?t[e]:void 0},ee.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:$.call(t,e)},ee.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=J&&void 0===t?"__lodash_hash_undefined__":t,this};var ne=Array.prototype.splice;function se(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}se.prototype.clear=function(){this.__data__=[],this.size=0},se.prototype.delete=function(e){var t=this.__data__,i=ie(t,e);return!(i<0)&&(i==t.length-1?t.pop():ne.call(t,i,1),--this.size,!0)},se.prototype.get=function(e){var t=this.__data__,i=ie(t,e);return i<0?void 0:t[i][1]},se.prototype.has=function(e){return ie(this.__data__,e)>-1},se.prototype.set=function(e,t){var i=this.__data__,n=ie(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var oe=O(M,"Map");function ae(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function re(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}re.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(oe||se),string:new ee}},re.prototype.delete=function(e){var t=ae(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return ae(this,e).get(e)},re.prototype.has=function(e){return ae(this,e).has(e)},re.prototype.set=function(e,t){var i=ae(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};function ce(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=i.cache;if(o.has(s))return o.get(s);var a=e.apply(this,n);return i.cache=o.set(s,a)||o,a};return i.cache=new(ce.Cache||re),i}ce.Cache=re;var le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ue=/\\(\\)?/g,pe=function(e){var t=ce(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(le,(function(e,i,n,s){t.push(n?s.replace(ue,"$1"):i||e)})),t})),de=pe;function me(e,t){for(var i=-1,n=null==e?0:e.length,s=Array(n);++i<n;)s[i]=t(e[i],i,e);return s}var he=C?C.prototype:void 0,ge=he?he.toString:void 0;function fe(e){if("string"==typeof e)return e;if(x(e))return me(e,fe)+"";if(k(e))return ge?ge.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function we(e){return null==e?"":fe(e)}function ye(e,t){return x(e)?e:X(e,t)?[e]:de(we(e))}function xe(e){if("string"==typeof e||k(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function De(e,t){for(var i=0,n=(t=ye(t,e)).length;null!=e&&i<n;)e=e[xe(t[i++])];return i&&i==n?e:void 0}function ve(e,t,i){var n=null==e?void 0:De(e,t);return void 0===n?i:n}function Me(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ce(e){if(Me(e)){for(let t in e)return!0;return!1}return!1}function Ie(e){return"[object String]"===Object.prototype.toString.call(e)}function be(e){return!(!Ie(e)||""===e)}var Le=/\s/;var Ae=/^\s+/;function Ee(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Le.test(e.charAt(t)););return t}(e)+1).replace(Ae,""):e}var Ne=/^[-+]0x[0-9a-f]+$/i,Te=/^0b[01]+$/i,Se=/^0o[0-7]+$/i,ke=parseInt;function Ze(e){if("number"==typeof e)return e;if(k(e))return NaN;if(Y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ee(e);var i=Te.test(e);return i||Se.test(e)?ke(e.slice(2),i?2:8):Ne.test(e)?NaN:+e}var je=1/0;function Xe(e){return e?(e=Ze(e))===je||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ye(e){var t=Xe(e),i=t%1;return t==t?i?t-i:t:0}function ze(e){return e!=e}function Fe(e){let t=!1;if(be(e))t=!isNaN(Number(e));else if(function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)){if(ze(e))return!1;t=!0}return t}function Ge(e){if(!Fe(e))return 0;return Xe(e)}function He(e){return!!Fe(e)&&(e=Ge(e),"number"==typeof(t=e)&&t==Ye(t));var t}var Ke=M.isFinite,Be=Math.min;var We,Ue=(We=Math["round"],function(e,t){if(e=Ze(e),(t=null==t?0:Be(Ye(t),292))&&Ke(e)){var i=(we(e)+"e").split("e");return+((i=(we(We(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))}return We(e)});function Pe(e){if(!Fe(e))return 0;e=Ge(e);let t=Ue(e);return"0"===String(t)?0:t}function Ve(e){if(!He(e))return!1;return Pe(e)>0}function _e(e){return"[object Array]"===Object.prototype.toString.call(e)}function Re(e){return"[object Undefined]"===Object.prototype.toString.call(e)}function Qe(e){if(Me(e)){for(let t in e)return!1;return!0}return!1}function Oe(e){return!!Re(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!Qe(e)||(!!function(e){return!(!Ie(e)||""!==e)}(e)||(!!function(e){return!!_e(e)&&0===e.length}(e)||!!ze(e)))))}function Je(e){return!!_e(e)&&(0!==e.length&&(1!==e.length||!Oe(e[0])))}function qe(e){if(!Fe(e))return!1;return Ge(e)>0}function $e(e,t){return function(i){return e(t(i))}}var et=$e(Object.getPrototypeOf,Object),tt=Function.prototype,it=Object.prototype,nt=tt.toString,st=it.hasOwnProperty,ot=nt.call(Object);function at(e){if(!S(e)||"[object Object]"!=T(e))return!1;var t=et(e);if(null===t)return!0;var i=st.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&nt.call(i)==ot}function rt(e){if(!S(e))return!1;var t=T(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!at(e)}function ct(e){return rt(e)}function lt(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function ut(e){if(!He(e))return!1;return Pe(e)>=0}function pt(e,t){return be(e)&&ut(t)?0===(t=Pe(t))?"":e.substring(0,t):""}function dt(e,t){if(!be(e))return"";if(!ut(t))return"";if(0===(t=Pe(t)))return"";let i=e.length-t;return i<0&&(i=0),e.substring(i,i+t)}function mt(e,t){return be(e)&&ut(t)?0===(t=Pe(t))?e:pt(e,e.length-t):""}function ht(){let e,t,i=new Promise((function(){e=arguments[0],t=arguments[1]}));return i.resolve=e,i.reject=t,i}function gt(e){let t,i=Object.prototype.toString.call(e);if(t="[object Promise]"===i,t)return!0;if("[object Function]"!==i)return!1;try{t="function"!=typeof e.subscribe&&"function"==typeof e.then}catch(e){}return t}let ft=function(e){if(!lt(e))throw new Error("fn is not a function");return function(){let t=ht(),i=null,n=null;try{i=e.apply(this,arguments)}catch(e){n=e}return null!==n?t.resolve({state:"error",msg:n}):gt(i)?i.then((e=>{t.resolve({state:"success",msg:e})})).catch((e=>{"cancelled"===ve(e,"reason")?t.resolve({state:"cancelled",msg:""}):t.resolve({state:"error",msg:e})})):t.resolve({state:"success",msg:i}),t}};function wt(e,t={}){let i=ve(t,"fs");if(!i.existsSync(e))return!1;let n=i.lstatSync(e);return!n.isFile()&&!n.isSymbolicLink()}function yt(e){return wt(e,{fs:t})}function xt(e,t={}){let i=ve(t,"fs");return!!i.existsSync(e)&&(!i.lstatSync(e).isDirectory()&&!i.lstatSync(e).isSymbolicLink())}function Dt(e){return xt(e,{fs:t})}function vt(e,t,i){if(!be(e))return"";if(!be(t))return"";if(!Ie(i))return"";return String(e).replaceAll(t,i)}var Mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var It={exports:{}};!function(e){e.exports=function(){var e=1e3,t=6e4,i=36e5,n="millisecond",s="second",o="minute",a="hour",r="day",c="week",l="month",u="quarter",p="year",d="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],i=e%100;return"["+e+(t[(i-20)%10]||t[i]||t[0])+"]"}},w=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},y={s:w,z:function(e){var t=-e.utcOffset(),i=Math.abs(t),n=Math.floor(i/60),s=i%60;return(t<=0?"+":"-")+w(n,2,"0")+":"+w(s,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),s=t.clone().add(n,l),o=i-s<0,a=t.clone().add(n+(o?-1:1),l);return+(-(n+(i-s)/(o?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:p,w:c,d:r,D:d,h:a,m:o,s:s,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},x="en",D={};D[x]=f;var v="$isDayjsObject",M=function(e){return e instanceof L||!(!e||!e[v])},C=function e(t,i,n){var s;if(!t)return x;if("string"==typeof t){var o=t.toLowerCase();D[o]&&(s=o),i&&(D[o]=i,s=o);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var r=t.name;D[r]=t,s=r}return!n&&s&&(x=s),s||!n&&x},I=function(e,t){if(M(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new L(i)},b=y;b.l=C,b.i=M,b.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var L=function(){function f(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var w=f.prototype;return w.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var s=n[2]-1||0,o=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},w.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},w.$utils=function(){return b},w.isValid=function(){return!(this.$d.toString()===m)},w.isSame=function(e,t){var i=I(e);return this.startOf(t)<=i&&i<=this.endOf(t)},w.isAfter=function(e,t){return I(e)<this.startOf(t)},w.isBefore=function(e,t){return this.endOf(t)<I(e)},w.$g=function(e,t,i){return b.u(e)?this[t]:this.set(i,e)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(e,t){var i=this,n=!!b.u(t)||t,u=b.p(e),m=function(e,t){var s=b.w(i.$u?Date.UTC(i.$y,t,e):new Date(i.$y,t,e),i);return n?s:s.endOf(r)},h=function(e,t){return b.w(i.toDate()[e].apply(i.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),i)},g=this.$W,f=this.$M,w=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case p:return n?m(1,0):m(31,11);case l:return n?m(1,f):m(0,f+1);case c:var x=this.$locale().weekStart||0,D=(g<x?g+7:g)-x;return m(n?w-D:w+(6-D),f);case r:case d:return h(y+"Hours",0);case a:return h(y+"Minutes",1);case o:return h(y+"Seconds",2);case s:return h(y+"Milliseconds",3);default:return this.clone()}},w.endOf=function(e){return this.startOf(e,!1)},w.$set=function(e,t){var i,c=b.p(e),u="set"+(this.$u?"UTC":""),m=(i={},i[r]=u+"Date",i[d]=u+"Date",i[l]=u+"Month",i[p]=u+"FullYear",i[a]=u+"Hours",i[o]=u+"Minutes",i[s]=u+"Seconds",i[n]=u+"Milliseconds",i)[c],h=c===r?this.$D+(t-this.$W):t;if(c===l||c===p){var g=this.clone().set(d,1);g.$d[m](h),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},w.set=function(e,t){return this.clone().$set(e,t)},w.get=function(e){return this[b.p(e)]()},w.add=function(n,u){var d,m=this;n=Number(n);var h=b.p(u),g=function(e){var t=I(m);return b.w(t.date(t.date()+Math.round(e*n)),m)};if(h===l)return this.set(l,this.$M+n);if(h===p)return this.set(p,this.$y+n);if(h===r)return g(1);if(h===c)return g(7);var f=(d={},d[o]=t,d[a]=i,d[s]=e,d)[h]||1,w=this.$d.getTime()+n*f;return b.w(w,this)},w.subtract=function(e,t){return this.add(-1*e,t)},w.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=b.z(this),o=this.$H,a=this.$m,r=this.$M,c=i.weekdays,l=i.months,u=i.meridiem,p=function(e,i,s,o){return e&&(e[i]||e(t,n))||s[i].slice(0,o)},d=function(e){return b.s(o%12||12,e,"0")},h=u||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return r+1;case"MM":return b.s(r+1,2,"0");case"MMM":return p(i.monthsShort,r,l,3);case"MMMM":return p(l,r);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(i.weekdaysMin,t.$W,c,2);case"ddd":return p(i.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(o);case"HH":return b.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return h(o,a,!0);case"A":return h(o,a,!1);case"m":return String(a);case"mm":return b.s(a,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(n,d,m){var h,g=this,f=b.p(d),w=I(n),y=(w.utcOffset()-this.utcOffset())*t,x=this-w,D=function(){return b.m(g,w)};switch(f){case p:h=D()/12;break;case l:h=D();break;case u:h=D()/3;break;case c:h=(x-y)/6048e5;break;case r:h=(x-y)/864e5;break;case a:h=x/i;break;case o:h=x/t;break;case s:h=x/e;break;default:h=x}return m?h:b.a(h)},w.daysInMonth=function(){return this.endOf(l).$D},w.$locale=function(){return D[this.$L]},w.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=C(e,t,!0);return n&&(i.$L=n),i},w.clone=function(){return b.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},f}(),A=L.prototype;return I.prototype=A,[["$ms",n],["$s",s],["$m",o],["$H",a],["$W",r],["$M",l],["$y",p],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,L,I),e.$i=!0),I},I.locale=C,I.isDayjs=M,I.unix=function(e){return I(1e3*e)},I.en=D[x],I.Ls=D,I.p={},I}()}(It);var bt=Ct(It.exports);function Lt(){if(!lt(bt))throw new Error("invalid dayjs");return bt().format("YYYY-MM-DDTHH:mm:ssZ")}let At="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Et=At.length;function Nt(e=32){let t=[];e=Ve(e)?Pe(e):32;for(let i=0;i<e;i++)t[i]=At[0|Math.random()*Et];return t.join("")}function Tt(e){return!0===(t=e)||!1===t||S(t)&&"[object Boolean]"==T(t);var t}var St={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new s(n,o||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],r]:e._events[c].push(r):(e._events[c]=r,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function r(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),r.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},r.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},r.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},r.prototype.emit=function(e,t,n,s,o,a){var r=i?i+e:e;if(!this._events[r])return!1;var c,l,u=this._events[r],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,o),!0;case 6:return u.fn.call(u.context,t,n,s,o,a),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,m=u.length;for(l=0;l<m;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),p){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},r.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},r.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},r.prototype.removeListener=function(e,t,n,s){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var r=this._events[o];if(r.fn)r.fn!==t||s&&!r.once||n&&r.context!==n||a(this,o);else{for(var c=0,l=[],u=r.length;c<u;c++)(r[c].fn!==t||s&&!r[c].once||n&&r[c].context!==n)&&l.push(r[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=i,r.EventEmitter=r,e.exports=r}(St);var kt=Ct(St.exports);function Zt(){return new kt}async function jt(e,t={}){let i=null,n=ht();if(!lt(e))return n.reject("waitfunction需輸入函數f"),n;let s=async()=>{let t=e();return gt(t)&&(t=await t),t};if(i=await s(),!0===i)return n.resolve(),n;let o=ve(t,"attemptNum",null);Ve(o)||(o=200);let a=ve(t,"timeInterval",null);Ve(a)||(a=1e3);let r=0,c=setInterval((async()=>{r+=1,i=await s(),!0===i&&(clearInterval(c),n.resolve()),r>o&&(clearInterval(c),n.reject(`exceeded attemptNum[${o}]`))}),a);return n}function Xt(e){return function(e,t={}){let i=ve(t,"fs");if(wt(e,{fs:i}))return{success:"input folder is already exists: "+e};if(i.existsSync(e))return{error:"input path already exists: "+e};try{i.mkdirSync(e,{recursive:!0})}catch(e){return{error:e}}return{success:"done: "+e}}(e,{fs:t})}function Yt(e){return"number"==typeof e||S(e)&&"[object Number]"==T(e)}function zt(e){if(!be(e)&&!Fe(e)&&!k(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}var Ft={exports:{}};var Gt,Ht={exports:{}};function Kt(){return Gt||(Gt=1,function(e){var t;e.exports=(t=t||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==Mt&&Mt.crypto&&(i=Mt.crypto),!i)try{i=require("crypto")}catch(e){}var n=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),o={},a=o.lib={},r=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=r.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<s;o++){var a=i[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var r=0;r<s;r+=4)t[n+r>>>2]=i[r>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(n());return new c.init(t,e)}}),l=o.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(i,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(i,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},m=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,n=this._data,s=n.words,o=n.sigBytes,a=this.blockSize,r=o/(4*a),l=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*a,u=e.min(4*l,o);if(l){for(var p=0;p<l;p+=a)this._doProcessBlock(s,p);i=s.splice(0,l),n.sigBytes-=u}return new c.init(i,u)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=m.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=o.algo={};return o}(Math),t)}(Ht)),Ht.exports}!function(e){e.exports=Kt().enc.Utf8}(Ft);var Bt=Ct(Ft.exports),Wt={exports:{}};!function(e){var t;e.exports=(t=Kt(),function(){var e=t,i=e.lib.WordArray;function n(e,t,n){for(var s=[],o=0,a=0;a<t;a++)if(a%4){var r=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;s[o>>>2]|=r<<24-o%4*8,o++}return i.create(s,o)}e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var s=[],o=0;o<i;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,r=0;r<4&&o+.75*r<i;r++)s.push(n.charAt(a>>>6*(3-r)&63));var c=n.charAt(64);if(c)for(;s.length%4;)s.push(c);return s.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var o=0;o<i.length;o++)s[i.charCodeAt(o)]=o}var a=i.charAt(64);if(a){var r=e.indexOf(a);-1!==r&&(t=r)}return n(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64)}(Wt);var Ut=Ct(Wt.exports);function Pt(e){if(!be(e))return"";let t=Bt.parse(e);return Ut.stringify(t)}function Vt(e,t){return!!Me(e)&&(!(!be(t)&&!Fe(t))&&t in e)}function _t(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}var Rt,Qt=function(e,t,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var r=o[Rt?a:++n];if(!1===t(s[r],r,s))break}return e};function Ot(e){return S(e)&&"[object Arguments]"==T(e)}var Jt=Object.prototype,qt=Jt.hasOwnProperty,$t=Jt.propertyIsEnumerable,ei=Ot(function(){return arguments}())?Ot:function(e){return S(e)&&qt.call(e,"callee")&&!$t.call(e,"callee")},ti=ei;var ii="object"==typeof exports&&exports&&!exports.nodeType&&exports,ni=ii&&"object"==typeof module&&module&&!module.nodeType&&module,si=ni&&ni.exports===ii?M.Buffer:void 0,oi=(si?si.isBuffer:void 0)||function(){return!1},ai=/^(?:0|[1-9]\d*)$/;function ri(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&ai.test(e))&&e>-1&&e%1==0&&e<t}function ci(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var li={};function ui(e){return function(t){return e(t)}}li["[object Float32Array]"]=li["[object Float64Array]"]=li["[object Int8Array]"]=li["[object Int16Array]"]=li["[object Int32Array]"]=li["[object Uint8Array]"]=li["[object Uint8ClampedArray]"]=li["[object Uint16Array]"]=li["[object Uint32Array]"]=!0,li["[object Arguments]"]=li["[object Array]"]=li["[object ArrayBuffer]"]=li["[object Boolean]"]=li["[object DataView]"]=li["[object Date]"]=li["[object Error]"]=li["[object Function]"]=li["[object Map]"]=li["[object Number]"]=li["[object Object]"]=li["[object RegExp]"]=li["[object Set]"]=li["[object String]"]=li["[object WeakMap]"]=!1;var pi="object"==typeof exports&&exports&&!exports.nodeType&&exports,di=pi&&"object"==typeof module&&module&&!module.nodeType&&module,mi=di&&di.exports===pi&&D.process,hi=function(){try{var e=di&&di.require&&di.require("util").types;return e||mi&&mi.binding&&mi.binding("util")}catch(e){}}(),gi=hi&&hi.isTypedArray,fi=gi?ui(gi):function(e){return S(e)&&ci(e.length)&&!!li[T(e)]},wi=Object.prototype.hasOwnProperty;function yi(e,t){var i=x(e),n=!i&&ti(e),s=!i&&!n&&oi(e),o=!i&&!n&&!s&&fi(e),a=i||n||s||o,r=a?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],c=r.length;for(var l in e)!t&&!wi.call(e,l)||a&&("length"==l||s&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ri(l,c))||r.push(l);return r}var xi=Object.prototype;function Di(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xi)}var vi=$e(Object.keys,Object),Mi=Object.prototype.hasOwnProperty;function Ci(e){if(!Di(e))return vi(e);var t=[];for(var i in Object(e))Mi.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Ii(e){return null!=e&&ci(e.length)&&!z(e)}function bi(e){return Ii(e)?yi(e):Ci(e)}function Li(e,t){return e&&Qt(e,t,bi)}var Ai=function(e,t){return function(i,n){if(null==i)return i;if(!Ii(i))return e(i,n);for(var s=i.length,o=t?s:-1,a=Object(i);(t?o--:++o<s)&&!1!==n(a[o],o,a););return i}}(Li),Ei=Ai;function Ni(e){return e}function Ti(e,t){var i;return(x(e)?_t:Ei)(e,"function"==typeof(i=t)?i:Ni)}function Si(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function ki(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function Zi(e){return"[object Uint16Array]"===Object.prototype.toString.call(e)}function ji(e){if(!(Si(e)||(t=e,"[object Blob]"===Object.prototype.toString.call(t))||ki(e)||Zi(e)))return null;var t;try{if(e.byteLength)return e.byteLength}catch(e){}try{if(e.length)return e.length}catch(e){}try{if(e.size)return e.size}catch(e){}return null}function Xi(e){if(!be(e))return new Uint8Array;let t;try{t=function(e){if(!Ie(e))return new Uint8Array;let t=Ut.parse(e),i=t.words,n=t.sigBytes,s=new Uint8Array(n);for(let e=0;e<n;e++){let t=i[e>>>2]>>>24-e%4*8&255;s[e]=t}return s}(Pt(e))}catch(e){return new Uint8Array}return t}function Yi(e,t,i=0,n=!0,s=52,o=8){return function(e,t,i,n,s,o){if(!Fe(e))return null;if(!ki(t))return null;if(!He(i))return null;if(!Tt(n))return null;if(!He(s))return null;if(!He(o))return null;let a,r,c;e=Ge(e);let l=8*o-s-1,u=(1<<l)-1,p=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?o-1:0,h=n?-1:1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(a++,c/=2),a+p>=u?(r=0,a=u):a+p>=1?(r=(e*c-1)*Math.pow(2,s),a+=p):(r=e*Math.pow(2,p-1)*Math.pow(2,s),a=0));s>=8;t[i+m]=255&r,m+=h,r/=256,s-=8);for(a=a<<s|r,l+=s;l>0;t[i+m]=255&a,m+=h,a/=256,l-=8);return t[i+m-h]|=128*g,null}(e,t,i,n,s,o)}function zi(e){let t=[],i=[];if(!Je(e)&&!Ce(e))return null;let n=[],s=[];function o(e){n.push(ji(e)),s.push(e)}try{let a=function(e){if(!Me(e))return{results:"",binarys:[]};if(Qe(e))return{results:"",binarys:[]};let t="",i=[];try{let n=-1;t=JSON.stringify(e,(function(e,t){if(ki(t)){n+=1;let e=`[Uint8Array]::${n}`;return i.push(t),e}if(Zi(t)){n+=1;let e=`[Uint16Array]::${n}`;return i.push(t),e}if(Si(t)){n+=1;let e=`[ArrayBuffer]::${n}`;return i.push(t),e}return rt(t)&&(t=t.toString()),t}))}catch(e){}return{results:t,binarys:i}}(e);o(Xi(a.results)),Ti(a.binarys,(e=>{o(e)}));let r=n,c=Xi(JSON.stringify(r)),l=new Uint8Array(8);Yi(ji(c),l),t.push(l),t.push(c),Ti(s,(e=>{t.push(e)})),Ti(t,(e=>{i=function(e,t){let i=ji(e),n=ji(t),s=new Uint8Array(i+n);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(t),i),s}(i,e)}))}catch(e){return null}return i}function Fi(e,t=0,i=!0,n=52,s=8){return function(e,t,i,n,s){if(!ki(e))return null;if(!He(t))return null;if(!Tt(i))return null;if(!He(n))return null;if(!He(s))return null;let o,a,r=8*s-n-1,c=(1<<r)-1,l=c>>1,u=-7,p=i?0:s-1,d=i?1:-1,m=e[t+p];for(p+=d,o=m&(1<<-u)-1,m>>=-u,u+=r;u>0;o=256*o+e[t+p],p+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+e[t+p],p+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(m?-1:1);a+=Math.pow(2,n),o-=l}return(m?-1:1)*a*Math.pow(2,o-n)}(e,t,i,n,s)}var Gi={exports:{}};!function(e){var t;e.exports=(t=Kt(),function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,i=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],s=0;s<t;s++)n[s>>>2]|=e[s]<<24-s%4*8;i.call(this,n,t)}else i.apply(this,arguments)};n.prototype=e}}(),t.lib.WordArray)}(Gi);var Hi=Ct(Gi.exports);function Ki(e){if(!ki(e))return"";let t;try{i=function(e){return ki(e)?Hi.create(e).toString(Ut):""}(e),t=be(i)?Ut.parse(i).toString(Bt):""}catch(e){return""}var i;return t}function Bi(e){let t=null;if(!ki(e))return null;try{let i=8,n=e.slice(0,i),s=e.slice(i,ji(e)),o=Fi(n),a=s.slice(0,o),r=s.slice(o,ji(s)),c=Ki(a),l=function(e,t){let i=0,n=0,s=[];return Ti(t,(t=>{n=i+t;let o=e.slice(i,n);i=n,s.push(o)})),s}(r,JSON.parse(c));t=function(e){if(!Ce(e))return{};let{results:t,binarys:i}=e;if(!be(t))return{};if(!_e(i))return{};let n={};try{n=JSON.parse(t,(function(e,t){if(be(t)){if(t.indexOf("[Uint8Array]::")>=0){let e=Pe(t.replace("[Uint8Array]::",""));return i[e]}if(t.indexOf("[Uint16Array]::")>=0){let e=Pe(t.replace("[Uint16Array]::",""));return i[e]}if(t.indexOf("[ArrayBuffer]::")>=0){let e=Pe(t.replace("[ArrayBuffer]::",""));return i[e]}}return t}))}catch(e){}return n}({results:Ki(l.shift()),binarys:l})}catch(e){}return t}function Wi(e){var t=this.__data__=new se(e);this.size=t.size}Wi.prototype.clear=function(){this.__data__=new se,this.size=0},Wi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Wi.prototype.get=function(e){return this.__data__.get(e)},Wi.prototype.has=function(e){return this.__data__.has(e)},Wi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof se){var n=i.__data__;if(!oe||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new re(n)}return i.set(e,t),this.size=i.size,this};function Ui(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new re;++t<i;)this.add(e[t])}function Pi(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function Vi(e,t){return e.has(t)}Ui.prototype.add=Ui.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ui.prototype.has=function(e){return this.__data__.has(e)};function _i(e,t,i,n,s,o){var a=1&i,r=e.length,c=t.length;if(r!=c&&!(a&&c>r))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var p=-1,d=!0,m=2&i?new Ui:void 0;for(o.set(e,t),o.set(t,e);++p<r;){var h=e[p],g=t[p];if(n)var f=a?n(g,h,p,t,e,o):n(h,g,p,e,t,o);if(void 0!==f){if(f)continue;d=!1;break}if(m){if(!Pi(t,(function(e,t){if(!Vi(m,t)&&(h===e||s(h,e,i,n,o)))return m.push(t)}))){d=!1;break}}else if(h!==g&&!s(h,g,i,n,o)){d=!1;break}}return o.delete(e),o.delete(t),d}var Ri=M.Uint8Array;function Qi(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function Oi(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}var Ji=C?C.prototype:void 0,qi=Ji?Ji.valueOf:void 0;function $i(e,t){for(var i=-1,n=t.length,s=e.length;++i<n;)e[s+i]=t[i];return e}function en(e,t,i){var n=t(e);return x(e)?n:$i(n,i(e))}function tn(e,t){for(var i=-1,n=null==e?0:e.length,s=0,o=[];++i<n;){var a=e[i];t(a,i,e)&&(o[s++]=a)}return o}function nn(){return[]}var sn=Object.prototype.propertyIsEnumerable,on=Object.getOwnPropertySymbols,an=on?function(e){return null==e?[]:(e=Object(e),tn(on(e),(function(t){return sn.call(e,t)})))}:nn;function rn(e){return en(e,bi,an)}var cn=Object.prototype.hasOwnProperty;var ln=O(M,"DataView"),un=O(M,"Promise"),pn=O(M,"Set"),dn=O(M,"WeakMap"),mn="[object Map]",hn="[object Promise]",gn="[object Set]",fn="[object WeakMap]",wn="[object DataView]",yn=B(ln),xn=B(oe),Dn=B(un),vn=B(pn),Mn=B(dn),Cn=T;(ln&&Cn(new ln(new ArrayBuffer(1)))!=wn||oe&&Cn(new oe)!=mn||un&&Cn(un.resolve())!=hn||pn&&Cn(new pn)!=gn||dn&&Cn(new dn)!=fn)&&(Cn=function(e){var t=T(e),i="[object Object]"==t?e.constructor:void 0,n=i?B(i):"";if(n)switch(n){case yn:return wn;case xn:return mn;case Dn:return hn;case vn:return gn;case Mn:return fn}return t});var In=Cn,bn="[object Arguments]",Ln="[object Array]",An="[object Object]",En=Object.prototype.hasOwnProperty;function Nn(e,t,i,n,s,o){var a=x(e),r=x(t),c=a?Ln:In(e),l=r?Ln:In(t),u=(c=c==bn?An:c)==An,p=(l=l==bn?An:l)==An,d=c==l;if(d&&oi(e)){if(!oi(t))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new Wi),a||fi(e)?_i(e,t,i,n,s,o):function(e,t,i,n,s,o,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Ri(e),new Ri(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return te(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var r=Qi;case"[object Set]":var c=1&n;if(r||(r=Oi),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var u=_i(r(e),r(t),n,s,o,a);return a.delete(e),u;case"[object Symbol]":if(qi)return qi.call(e)==qi.call(t)}return!1}(e,t,c,i,n,s,o);if(!(1&i)){var m=u&&En.call(e,"__wrapped__"),h=p&&En.call(t,"__wrapped__");if(m||h){var g=m?e.value():e,f=h?t.value():t;return o||(o=new Wi),s(g,f,i,n,o)}}return!!d&&(o||(o=new Wi),function(e,t,i,n,s,o){var a=1&i,r=rn(e),c=r.length;if(c!=rn(t).length&&!a)return!1;for(var l=c;l--;){var u=r[l];if(!(a?u in t:cn.call(t,u)))return!1}var p=o.get(e),d=o.get(t);if(p&&d)return p==t&&d==e;var m=!0;o.set(e,t),o.set(t,e);for(var h=a;++l<c;){var g=e[u=r[l]],f=t[u];if(n)var w=a?n(f,g,u,t,e,o):n(g,f,u,e,t,o);if(!(void 0===w?g===f||s(g,f,i,n,o):w)){m=!1;break}h||(h="constructor"==u)}if(m&&!h){var y=e.constructor,x=t.constructor;y==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,i,n,s,o))}function Tn(e,t,i,n,s){return e===t||(null==e||null==t||!S(e)&&!S(t)?e!=e&&t!=t:Nn(e,t,i,n,Tn,s))}function Sn(e){return e==e&&!Y(e)}function kn(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}function Zn(e){var t=function(e){for(var t=bi(e),i=t.length;i--;){var n=t[i],s=e[n];t[i]=[n,s,Sn(s)]}return t}(e);return 1==t.length&&t[0][2]?kn(t[0][0],t[0][1]):function(i){return i===e||function(e,t,i,n){var s=i.length,o=s,a=!n;if(null==e)return!o;for(e=Object(e);s--;){var r=i[s];if(a&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++s<o;){var c=(r=i[s])[0],l=e[c],u=r[1];if(a&&r[2]){if(void 0===l&&!(c in e))return!1}else{var p=new Wi;if(n)var d=n(l,u,c,e,t,p);if(!(void 0===d?Tn(u,l,3,n,p):d))return!1}}return!0}(i,e,t)}}function jn(e,t){return null!=e&&t in Object(e)}function Xn(e,t){return null!=e&&function(e,t,i){for(var n=-1,s=(t=ye(t,e)).length,o=!1;++n<s;){var a=xe(t[n]);if(!(o=null!=e&&i(e,a)))break;e=e[a]}return o||++n!=s?o:!!(s=null==e?0:e.length)&&ci(s)&&ri(a,s)&&(x(e)||ti(e))}(e,t,jn)}function Yn(e){return function(t){return null==t?void 0:t[e]}}function zn(e){return X(e)?Yn(xe(e)):function(e){return function(t){return De(t,e)}}(e)}function Fn(e){return"function"==typeof e?e:null==e?Ni:"object"==typeof e?x(e)?function(e,t){return X(e)&&Sn(t)?kn(xe(e),t):function(i){var n=ve(i,e);return void 0===n&&n===t?Xn(i,e):Tn(t,n,3)}}(e[0],e[1]):Zn(e):zn(e)}function Gn(e,t){var i=-1,n=Ii(e)?Array(e.length):[];return Ei(e,(function(e,s,o){n[++i]=t(e,s,o)})),n}function Hn(e,t){return(x(e)?me:Gn)(e,Fn(t))}function Kn(e,t,i){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var o=Array(s);++n<s;)o[n]=e[n+t];return o}function Bn(e){return e!=e}function Wn(e,t,i){return t==t?function(e,t,i){for(var n=i-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}(e,t,i):function(e,t,i,n){for(var s=e.length,o=i+(n?1:-1);n?o--:++o<s;)if(t(e[o],o,e))return o;return-1}(e,Bn,i)}var Un=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Pn(e){return Un.test(e)}var Vn="\\ud800-\\udfff",_n="["+Vn+"]",Rn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qn="\\ud83c[\\udffb-\\udfff]",On="[^"+Vn+"]",Jn="(?:\\ud83c[\\udde6-\\uddff]){2}",qn="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="(?:"+Rn+"|"+Qn+")"+"?",es="[\\ufe0e\\ufe0f]?",ts=es+$n+("(?:\\u200d(?:"+[On,Jn,qn].join("|")+")"+es+$n+")*"),is="(?:"+[On+Rn+"?",Rn,Jn,qn,_n].join("|")+")",ns=RegExp(Qn+"(?="+Qn+")|"+is+ts,"g");function ss(e){return Pn(e)?function(e){return e.match(ns)||[]}(e):function(e){return e.split("")}(e)}function os(e,t,i){if((e=we(e))&&(i||void 0===t))return Ee(e);if(!e||!(t=fe(t)))return e;var n=ss(e),s=ss(t),o=function(e,t){for(var i=-1,n=e.length;++i<n&&Wn(t,e[i],0)>-1;);return i}(n,s),a=function(e,t){for(var i=e.length;i--&&Wn(t,e[i],0)>-1;);return i}(n,s)+1;return function(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:Kn(e,t,i)}(n,o,a).join("")}function as(e,t){if(!be(e))return[];if(!be(t))return[];let i=function(e,t){return be(e)&&be(t)?e.split(t):[]}(e,t);i=Hn(i,os);let n=[];return Ti(i,(function(e){be(e)&&n.push(e)})),n}function rs(e){return function(e,t={}){let i=ve(t,"fs");if(!i.existsSync(e))return{success:"file does not exist: "+e};if(!xt(e,{fs:i}))return{error:"input path is not a file: "+e};try{i.unlinkSync(e)}catch(e){return{error:e}}return{success:"done: "+e}}(e,{fs:t})}var cs={exports:{}};!function(e){var t,i;e.exports=(t=o,i={},function(e){e.exports=function(e){var t={};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new s(n,o||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],r]:e._events[c].push(r):(e._events[c]=r,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function r(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),r.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},r.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},r.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},r.prototype.emit=function(e,t,n,s,o,a){var r=i?i+e:e;if(!this._events[r])return!1;var c,l,u=this._events[r],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,o),!0;case 6:return u.fn.call(u.context,t,n,s,o,a),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,m=u.length;for(l=0;l<m;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),p){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},r.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},r.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},r.prototype.removeListener=function(e,t,n,s){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var r=this._events[o];if(r.fn)r.fn!==t||s&&!r.once||n&&r.context!==n||a(this,o);else{for(var c=0,l=[],u=r.length;c<u;c++)(r[c].fn!==t||s&&!r[c].once||n&&r[c].context!==n)&&l.push(r[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=i,r.EventEmitter=r,e.exports=r}({get exports(){return t},set exports(e){t=e}});var i=t;let n;!function(){if("nodejs"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let t=(s="CgogICAgICAgIC8vaW1wb3J0IHsgcGFyZW50UG9ydCB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJwogICAgICAgIGxldCB7IHBhcmVudFBvcnQgfSA9IHJlcXVpcmUoJ3dvcmtlcl90aHJlYWRzJykgLy/lm6BwYWNrYWdlLmpzb27kuI3ntaZ0eXBlPW1vZHVsZeaVheeEoeazleaUr+aPtGVzNiBpbXBvcnQsIOW+l+S9v+eUqHJlcXVpcmUKICAgICAgICAvL+iLpeimgeaWvG5vZGVqcyB3b3JrZXLlhafkvb/nlKjnhKHms5XovYnora/nmoTljp/nlJ/lpZfku7bkvovlpoJmcywg6YG/5YWN5L2/55So6aCC5bGkaW1wb3J05Yqg6LyJ5L2/55SoLCDlm6DnhKHms5XovYnora/mnIPnm7TmjqXkv53nlZkKICAgICAgICAvL+S4puWboGltcG9ydOS9jeaWvHdvcmtlcuWkluWxpOmZkOWumueCunJlcXVpcmXljYAocGFja2FnZS5qc29u5LiN57WmdHlwZT1tb2R1bGUpLCDmlYXlh7rnj77pjK/oqqTnhKHms5XovYnora8KICAgICAgICAKCiJ1c2Ugc3RyaWN0Ijt2YXIgdD1yZXF1aXJlKCJwYXRoIikscj1yZXF1aXJlKCJmcyIpLGU9QXJyYXkuaXNBcnJheSxuPSJvYmplY3QiPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJmdsb2JhbC5PYmplY3Q9PT1PYmplY3QmJmdsb2JhbCxvPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsaT1ufHxvfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpLHU9aS5TeW1ib2wsYT1PYmplY3QucHJvdG90eXBlLGM9YS5oYXNPd25Qcm9wZXJ0eSxzPWEudG9TdHJpbmcsZj11P3UudG9TdHJpbmdUYWc6dm9pZCAwO3ZhciBsPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIHA9IltvYmplY3QgTnVsbF0iLGg9IltvYmplY3QgVW5kZWZpbmVkXSIseT11P3UudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIHYodCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwPT09dD9oOnA6eSYmeSBpbiBPYmplY3QodCk/ZnVuY3Rpb24odCl7dmFyIHI9Yy5jYWxsKHQsZiksZT10W2ZdO3RyeXt0W2ZdPXZvaWQgMDt2YXIgbj0hMH1jYXRjaCh0KXt9dmFyIG89cy5jYWxsKHQpO3JldHVybiBuJiYocj90W2ZdPWU6ZGVsZXRlIHRbZl0pLG99KHQpOmZ1bmN0aW9uKHQpe3JldHVybiBsLmNhbGwodCl9KHQpfXZhciBfPSJbb2JqZWN0IFN5bWJvbF0iO2Z1bmN0aW9uIGQodCl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiB0fHxmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmIm9iamVjdCI9PXR5cGVvZiB0fSh0KSYmdih0KT09X312YXIgYj0vXC58XFsoPzpbXltcXV0qfChbIiddKSg/Oig/IVwxKVteXFxdfFxcLikqP1wxKVxdLyxnPS9eXHcqJC87ZnVuY3Rpb24gaih0KXt2YXIgcj10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKCJvYmplY3QiPT1yfHwiZnVuY3Rpb24iPT1yKX12YXIgUz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsTz0iW29iamVjdCBGdW5jdGlvbl0iLG09IltvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dIix3PSJbb2JqZWN0IFByb3h5XSI7dmFyICQseD1pWyJfX2NvcmUtanNfc2hhcmVkX18iXSxSPSgkPS9bXi5dKyQvLmV4ZWMoeCYmeC5rZXlzJiZ4LmtleXMuSUVfUFJPVE98fCIiKSk/IlN5bWJvbChzcmMpXzEuIiskOiIiO3ZhciB6PUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzt2YXIgRj0vXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLyxBPUZ1bmN0aW9uLnByb3RvdHlwZSxOPU9iamVjdC5wcm90b3R5cGUsUD1BLnRvU3RyaW5nLGs9Ti5oYXNPd25Qcm9wZXJ0eSxFPVJlZ0V4cCgiXiIrUC5jYWxsKGspLnJlcGxhY2UoL1tcXF4kLiorPygpW1xde318XS9nLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpO2Z1bmN0aW9uIEModCl7aWYoIWoodCl8fChyPXQsUiYmUiBpbiByKSlyZXR1cm4hMTt2YXIgcixlPWZ1bmN0aW9uKHQpe2lmKCFqKHQpKXJldHVybiExO3ZhciByPXYodCk7cmV0dXJuIHI9PU98fHI9PW18fHI9PVN8fHI9PXd9KHQpP0U6RjtyZXR1cm4gZS50ZXN0KGZ1bmN0aW9uKHQpe2lmKG51bGwhPXQpe3RyeXtyZXR1cm4gei5jYWxsKHQpfWNhdGNoKHQpe310cnl7cmV0dXJuIHQrIiJ9Y2F0Y2godCl7fX1yZXR1cm4iIn0odCkpfWZ1bmN0aW9uIEkodCxyKXt2YXIgZT1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsPT10P3ZvaWQgMDp0W3JdfSh0LHIpO3JldHVybiBDKGUpP2U6dm9pZCAwfXZhciBUPUkoT2JqZWN0LCJjcmVhdGUiKTt2YXIgTT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBxPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gTCh0KXt2YXIgcj0tMSxlPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrcjxlOyl7dmFyIG49dFtyXTt0aGlzLnNldChuWzBdLG5bMV0pfX1mdW5jdGlvbiBVKHQscil7Zm9yKHZhciBlLG4sbz10Lmxlbmd0aDtvLS07KWlmKChlPXRbb11bMF0pPT09KG49cil8fGUhPWUmJm4hPW4pcmV0dXJuIG87cmV0dXJuLTF9TC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPVQ/VChudWxsKTp7fSx0aGlzLnNpemU9MH0sTC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfSxMLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXztpZihUKXt2YXIgZT1yW3RdO3JldHVybiJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIj09PWU/dm9pZCAwOmV9cmV0dXJuIE0uY2FsbChyLHQpP3JbdF06dm9pZCAwfSxMLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXztyZXR1cm4gVD92b2lkIDAhPT1yW3RdOnEuY2FsbChyLHQpfSxMLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxyKXt2YXIgZT10aGlzLl9fZGF0YV9fO3JldHVybiB0aGlzLnNpemUrPXRoaXMuaGFzKHQpPzA6MSxlW3RdPVQmJnZvaWQgMD09PXI/Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iOnIsdGhpc307dmFyIEQ9QXJyYXkucHJvdG90eXBlLnNwbGljZTtmdW5jdGlvbiBHKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fUcucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH0sRy5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX18sZT1VKHIsdCk7cmV0dXJuIShlPDApJiYoZT09ci5sZW5ndGgtMT9yLnBvcCgpOkQuY2FsbChyLGUsMSksLS10aGlzLnNpemUsITApfSxHLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPVUocix0KTtyZXR1cm4gZTwwP3ZvaWQgMDpyW2VdWzFdfSxHLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIFUodGhpcy5fX2RhdGFfXyx0KT4tMX0sRy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQscil7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPVUoZSx0KTtyZXR1cm4gbjwwPygrK3RoaXMuc2l6ZSxlLnB1c2goW3Qscl0pKTplW25dWzFdPXIsdGhpc307dmFyIFc9SShpLCJNYXAiKTtmdW5jdGlvbiBCKHQscil7dmFyIGUsbixvPXQuX19kYXRhX187cmV0dXJuKCJzdHJpbmciPT0obj10eXBlb2YoZT1yKSl8fCJudW1iZXIiPT1ufHwic3ltYm9sIj09bnx8ImJvb2xlYW4iPT1uPyJfX3Byb3RvX18iIT09ZTpudWxsPT09ZSk/b1sic3RyaW5nIj09dHlwZW9mIHI/InN0cmluZyI6Imhhc2giXTpvLm1hcH1mdW5jdGlvbiBIKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fUgucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcgTCxtYXA6bmV3KFd8fEcpLHN0cmluZzpuZXcgTH19LEgucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgcj1CKHRoaXMsdCkuZGVsZXRlKHQpO3JldHVybiB0aGlzLnNpemUtPXI/MTowLHJ9LEgucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gQih0aGlzLHQpLmdldCh0KX0sSC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiBCKHRoaXMsdCkuaGFzKHQpfSxILnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxyKXt2YXIgZT1CKHRoaXMsdCksbj1lLnNpemU7cmV0dXJuIGUuc2V0KHQsciksdGhpcy5zaXplKz1lLnNpemU9PW4/MDoxLHRoaXN9O3ZhciBKPSJFeHBlY3RlZCBhIGZ1bmN0aW9uIjtmdW5jdGlvbiBLKHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHR8fG51bGwhPXImJiJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoSik7dmFyIGU9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHMsbz1yP3IuYXBwbHkodGhpcyxuKTpuWzBdLGk9ZS5jYWNoZTtpZihpLmhhcyhvKSlyZXR1cm4gaS5nZXQobyk7dmFyIHU9dC5hcHBseSh0aGlzLG4pO3JldHVybiBlLmNhY2hlPWkuc2V0KG8sdSl8fGksdX07cmV0dXJuIGUuY2FjaGU9bmV3KEsuQ2FjaGV8fEgpLGV9Sy5DYWNoZT1IO3ZhciBRLFYsWCxZPS9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCQpKS9nLFo9L1xcKFxcKT8vZyx0dD0oUT1mdW5jdGlvbih0KXt2YXIgcj1bXTtyZXR1cm4gNDY9PT10LmNoYXJDb2RlQXQoMCkmJnIucHVzaCgiIiksdC5yZXBsYWNlKFksKGZ1bmN0aW9uKHQsZSxuLG8pe3IucHVzaChuP28ucmVwbGFjZShaLCIkMSIpOmV8fHQpfSkpLHJ9LFY9SyhRLChmdW5jdGlvbih0KXtyZXR1cm4gNTAwPT09WC5zaXplJiZYLmNsZWFyKCksdH0pKSxYPVYuY2FjaGUsVikscnQ9dHQ7dmFyIGV0PTEvMCxudD11P3UucHJvdG90eXBlOnZvaWQgMCxvdD1udD9udC50b1N0cmluZzp2b2lkIDA7ZnVuY3Rpb24gaXQodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiB0O2lmKGUodCkpcmV0dXJuIGZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLG89QXJyYXkobik7KytlPG47KW9bZV09cih0W2VdLGUsdCk7cmV0dXJuIG99KHQsaXQpKyIiO2lmKGQodCkpcmV0dXJuIG90P290LmNhbGwodCk6IiI7dmFyIHI9dCsiIjtyZXR1cm4iMCI9PXImJjEvdD09LWV0PyItMCI6cn1mdW5jdGlvbiB1dCh0KXtyZXR1cm4gbnVsbD09dD8iIjppdCh0KX1mdW5jdGlvbiBhdCh0LHIpe3JldHVybiBlKHQpP3Q6ZnVuY3Rpb24odCxyKXtpZihlKHQpKXJldHVybiExO3ZhciBuPXR5cGVvZiB0O3JldHVybiEoIm51bWJlciIhPW4mJiJzeW1ib2wiIT1uJiYiYm9vbGVhbiIhPW4mJm51bGwhPXQmJiFkKHQpKXx8Zy50ZXN0KHQpfHwhYi50ZXN0KHQpfHxudWxsIT1yJiZ0IGluIE9iamVjdChyKX0odCxyKT9bdF06cnQodXQodCkpfXZhciBjdD0xLzA7ZnVuY3Rpb24gc3QodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHxkKHQpKXJldHVybiB0O3ZhciByPXQrIiI7cmV0dXJuIjAiPT1yJiYxL3Q9PS1jdD8iLTAiOnJ9ZnVuY3Rpb24gZnQodCxyLGUpe3ZhciBuPW51bGw9PXQ/dm9pZCAwOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPTAsbj0ocj1hdChyLHQpKS5sZW5ndGg7bnVsbCE9dCYmZTxuOyl0PXRbc3QocltlKytdKV07cmV0dXJuIGUmJmU9PW4/dDp2b2lkIDB9KHQscik7cmV0dXJuIHZvaWQgMD09PW4/ZTpufWZ1bmN0aW9uIGx0KCl7bGV0IHQscixlPW5ldyBQcm9taXNlKChmdW5jdGlvbigpe3Q9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdfSkpO3JldHVybiBlLnJlc29sdmU9dCxlLnJlamVjdD1yLGV9ZnVuY3Rpb24gcHQodCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBodCh0KXtpZihmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBPYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCkpe2ZvcihsZXQgciBpbiB0KXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHl0KHQpe3JldHVybiJbb2JqZWN0IFN0cmluZ10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIHZ0KHQpe3JldHVybiB0IT10fWZ1bmN0aW9uIF90KHQpe3JldHVybiEhZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgVW5kZWZpbmVkXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBOdWxsXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFodCh0KXx8KCEhZnVuY3Rpb24odCl7cmV0dXJuISgheXQodCl8fCIiIT09dCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4hIXB0KHQpJiYwPT09dC5sZW5ndGh9KHQpfHwhIXZ0KHQpKSkpKX1mdW5jdGlvbiBkdCh0KXtyZXR1cm4hKCF5dCh0KXx8IiI9PT10KX12YXIgYnQ9L1xzLzt2YXIgZ3Q9L15ccysvO2Z1bmN0aW9uIGp0KHQpe3JldHVybiB0P3Quc2xpY2UoMCxmdW5jdGlvbih0KXtmb3IodmFyIHI9dC5sZW5ndGg7ci0tJiZidC50ZXN0KHQuY2hhckF0KHIpKTspO3JldHVybiByfSh0KSsxKS5yZXBsYWNlKGd0LCIiKTp0fXZhciBTdD1OYU4sT3Q9L15bLStdMHhbMC05YS1mXSskL2ksbXQ9L14wYlswMV0rJC9pLHd0PS9eMG9bMC03XSskL2ksJHQ9cGFyc2VJbnQ7ZnVuY3Rpb24geHQodCl7aWYoIm51bWJlciI9PXR5cGVvZiB0KXJldHVybiB0O2lmKGQodCkpcmV0dXJuIFN0O2lmKGoodCkpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PWoocik/cisiIjpyfWlmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PWp0KHQpO3ZhciBlPW10LnRlc3QodCk7cmV0dXJuIGV8fHd0LnRlc3QodCk/JHQodC5zbGljZSgyKSxlPzI6OCk6T3QudGVzdCh0KT9TdDordH12YXIgUnQ9MS8wLHp0PTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MjtmdW5jdGlvbiBGdCh0KXtyZXR1cm4gdD8odD14dCh0KSk9PT1SdHx8dD09PS1SdD8odDwwPy0xOjEpKnp0OnQ9PXQ/dDowOjA9PT10P3Q6MH1mdW5jdGlvbiBBdCh0KXt2YXIgcj1GdCh0KSxlPXIlMTtyZXR1cm4gcj09cj9lP3ItZTpyOjB9ZnVuY3Rpb24gTnQodCl7bGV0IHI9ITE7aWYoZHQodCkpcj0haXNOYU4oTnVtYmVyKHQpKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7aWYodnQodCkpcmV0dXJuITE7cj0hMH1yZXR1cm4gcn1mdW5jdGlvbiBQdCh0KXtpZighTnQodCkpcmV0dXJuIDA7cmV0dXJuIEZ0KHQpfWZ1bmN0aW9uIGt0KHQpe3JldHVybiEhTnQodCkmJih0PVB0KHQpLCJudW1iZXIiPT10eXBlb2Yocj10KSYmcj09QXQocikpO3ZhciByfXZhciBFdD1pLmlzRmluaXRlLEN0PU1hdGgubWluO3ZhciBJdD1mdW5jdGlvbih0KXt2YXIgcj1NYXRoW3RdO3JldHVybiBmdW5jdGlvbih0LGUpe2lmKHQ9eHQodCksKGU9bnVsbD09ZT8wOkN0KEF0KGUpLDI5MikpJiZFdCh0KSl7dmFyIG49KHV0KHQpKyJlIikuc3BsaXQoImUiKTtyZXR1cm4rKChuPSh1dChyKG5bMF0rImUiKygrblsxXStlKSkpKyJlIikuc3BsaXQoImUiKSlbMF0rImUiKygrblsxXS1lKSl9cmV0dXJuIHIodCl9fSgicm91bmQiKSxUdD1JdDtmdW5jdGlvbiBNdCh0KXtpZighTnQodCkpcmV0dXJuIDA7dD1QdCh0KTtsZXQgcj1UdCh0KTtyZXR1cm4iMCI9PT1TdHJpbmcocik/MDpyfWZ1bmN0aW9uIHF0KHQpe2lmKCFrdCh0KSlyZXR1cm4hMTtyZXR1cm4gTXQodCk+PTB9ZnVuY3Rpb24gTHQodCxyKXtpZighZHQodCkpcmV0dXJuIiI7aWYoIXF0KHIpKXJldHVybiIiO2lmKDA9PT0ocj1NdChyKSkpcmV0dXJuIiI7bGV0IGU9dC5sZW5ndGgtcjtyZXR1cm4gZTwwJiYoZT0wKSx0LnN1YnN0cmluZyhlLGUrcil9ZnVuY3Rpb24gVXQodCxyKXtyZXR1cm4gZHQodCkmJnF0KHIpPzA9PT0ocj1NdChyKSk/dDpmdW5jdGlvbih0LHIpe3JldHVybiBkdCh0KSYmcXQocik/MD09PShyPU10KHIpKT8iIjp0LnN1YnN0cmluZygwLHIpOiIifSh0LHQubGVuZ3RoLXIpOiIifWZ1bmN0aW9uIER0KHQpe2lmKCFkdCh0KSlyZXR1cm57cGF0aDoiIixpc1Jvb3Q6ITF9O2Zvcig7dC5pbmRleE9mKCJcXFxcIik+PTA7KXQ9dC5yZXBsYWNlKCJcXFxcIiwiXFwiKTtmb3IoO3QuaW5kZXhPZigiLy8iKT49MDspdD10LnJlcGxhY2UoIi8vIiwiLyIpO2lmKCI6Ij09PUx0KHQsMSkpcmV0dXJue3BhdGg6YCR7dH1cXGAsaXNSb290OiEwfTtpZigiXFwiPT09THQodCwxKSl7bGV0IHI9VXQodCwxKTtyZXR1cm4iOiI9PT1MdChyLDEpP3twYXRoOnQsaXNSb290OiEwfTp7cGF0aDpyLGlzUm9vdDohMX19aWYoIi8iPT09THQodCwxKSl7bGV0IHI9VXQodCwxKTtyZXR1cm4gMD09PXIubGVuZ3RoP3twYXRoOnQsaXNSb290OiEwfTp7cGF0aDpyLGlzUm9vdDohMX19cmV0dXJue3BhdGg6dCxpc1Jvb3Q6ITF9fWZ1bmN0aW9uIEd0KHQpe2lmKCFkdCh0KSlyZXR1cm4iIjtsZXQgcj1EdCh0KTtpZihyLmlzUm9vdClyZXR1cm4gci5wYXRoO2xldCBlPXIucGF0aDt0cnl7ZT1lLnNwbGl0KCJcXCIpLnBvcCgpLnNwbGl0KCIvIikucG9wKCl9Y2F0Y2godCl7fXJldHVybiBlfWZ1bmN0aW9uIFd0KHQscj17fSl7bGV0IGU9ZnQociwiZnMiKTtpZighZS5leGlzdHNTeW5jKHQpKXJldHVybiExO2xldCBuPWUubHN0YXRTeW5jKHQpO3JldHVybiFuLmlzRmlsZSgpJiYhbi5pc1N5bWJvbGljTGluaygpfWZ1bmN0aW9uIEJ0KHQscj17fSl7bGV0IGU9ZnQociwiZnMiKTtyZXR1cm4hIWUuZXhpc3RzU3luYyh0KSYmKCFlLmxzdGF0U3luYyh0KS5pc0RpcmVjdG9yeSgpJiYhZS5sc3RhdFN5bmModCkuaXNTeW1ib2xpY0xpbmsoKSl9ZnVuY3Rpb24gSHQodCxyPXt9KXtsZXQgZT1mdChyLCJmcyIpO2lmKCFlLmV4aXN0c1N5bmModCkpcmV0dXJue3N1Y2Nlc3M6ImZpbGUgZG9lcyBub3QgZXhpc3Q6ICIrdH07aWYoIUJ0KHQse2ZzOmV9KSlyZXR1cm57ZXJyb3I6ImlucHV0IHBhdGggaXMgbm90IGEgZmlsZTogIit0fTt0cnl7ZS51bmxpbmtTeW5jKHQpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX1yZXR1cm57c3VjY2VzczoiZG9uZTogIit0fX1hc3luYyBmdW5jdGlvbiBKdCh0LHIsZT17fSl7bGV0IG49IiIsbz1mdChlLCJmcyIpO2lmKCFwdChpPXQpfHwwPT09aS5sZW5ndGh8fDE9PT1pLmxlbmd0aCYmX3QoaVswXSkpdGhyb3cgbmV3IEVycm9yKCJmcHNJbiBpbiBub3QgYW4gZWZmZWN0aXZlIGFycmF5Iik7dmFyIGk7bGV0IHU9ZnVuY3Rpb24odCl7aWYoIWR0KHQpKXJldHVybiIiO2xldCByPUR0KHQpO2lmKHIuaXNSb290KXJldHVybiByLnBhdGg7bGV0IGU9R3QodD1yLnBhdGgpO2lmKCFkdChlKSlyZXR1cm4gdDtsZXQgbj1EdCh0PVV0KHQsZS5sZW5ndGgpKTtyZXR1cm4gbi5pc1Jvb3Qsbi5wYXRofShyKSxhPWZ0KGUsImZuT3V0IiwiIik7ZHQoYSl8fChhPUd0KHIpKSxXdCh1LHtmczpvfSl8fGZ1bmN0aW9uKHQscj17fSl7bGV0IGU9ZnQociwiZnMiKTtpZihXdCh0LHtmczplfSkpcmV0dXJue3N1Y2Nlc3M6ImlucHV0IGZvbGRlciBpcyBhbHJlYWR5IGV4aXN0czogIit0fTtpZihlLmV4aXN0c1N5bmModCkpcmV0dXJue2Vycm9yOiJpbnB1dCBwYXRoIGFscmVhZHkgZXhpc3RzOiAiK3R9O3RyeXtlLm1rZGlyU3luYyh0LHtyZWN1cnNpdmU6ITB9KX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSh1LHtmczpvfSk7bGV0IGM9bHQoKTt0cnl7bGV0IGU9by5jcmVhdGVXcml0ZVN0cmVhbShyKTtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7bGV0IGk9dFtyXTtpZighQnQoaSx7ZnM6b30pKXRocm93IG5ldyBFcnJvcihgZnBJblske2l9XSBpcyBub3QgYSBmaWxlYCk7bGV0IHU9KCk9PntsZXQgdD1sdCgpLHI9by5jcmVhdGVSZWFkU3RyZWFtKGkpO3JldHVybiByLm9uKCJlcnJvciIsKHI9PntuPXIubWVzc2FnZSx0LnJlamVjdChyKX0pKSxyLm9uKCJlbmQiLCgoKT0+e0h0KGkse2ZzOm99KSx0LnJlc29sdmUoKX0pKSxyLnBpcGUoZSx7ZW5kOiExfSksdH07YXdhaXQgdSgpfWUuZW5kKCksZS5vbigiZXJyb3IiLCh0PT57bj10Lm1lc3NhZ2UsYy5yZWplY3Qobil9KSksZS5vbigiZmluaXNoIiwoKCk9PntsZXQgdD17ZmlsZW5hbWU6YSxwYXRoOnJ9O2MucmVzb2x2ZSh0KX0pKX1jYXRjaCh0KXtuPXQubWVzc2FnZSxjLnJlamVjdChuKX1yZXR1cm4gY31sZXQgbWVyZ2VTbGljZXM9YXN5bmMoZSxuLG8pPT57bGV0IGk9W107Zm9yKGxldCByPTA7cjxuO3IrKyl7bGV0IG49dC5yZXNvbHZlKG8sYCR7ZX1fJHtyfWApO2kucHVzaChuKX1sZXQgdT10LnJlc29sdmUobyxlKSxhPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsZSxuPXt9KXtyZXR1cm4gSnQodCxlLHtmczpyLC4uLm59KX0oaSx1KTtyZXR1cm4gci53cml0ZUZpbGVTeW5jKGAke3V9LmRvbmVgLCIiLCJ1dGY4IiksYX07CgoKbGV0IGluc3RhbmNlID0gbnVsbApmdW5jdGlvbiBpbml0KGlucHV0KXsKCiAgICAvL2luaXQKICAgIGxldCByCiAgICAKICAgICAgICByID0gewogICAgICAgICAgICBtYWluOiBtZXJnZVNsaWNlcwogICAgICAgIH0KICAgICAgICAKCiAgICAvL29uCiAgICAKCiAgICAvL3NhdmUKICAgIGluc3RhbmNlID0gcgoKfQoKZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZGF0YSkgewogICAgCiAgICAgICAgcGFyZW50UG9ydC5wb3N0TWVzc2FnZShkYXRhKQogICAgICAgIAp9Cgphc3luYyBmdW5jdGlvbiBydW4oZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciBydW4nLGRhdGEpCgogICAgLy9tb2RlCiAgICBsZXQgbW9kZSA9IGRhdGEubW9kZQoKICAgIC8vY2hlY2sKICAgIGlmKG1vZGUgIT09ICdpbml0JyAmJiBtb2RlICE9PSAnY2FsbCcpewogICAgICAgIHJldHVybgogICAgfQoKICAgIC8vaW5pdAogICAgaWYobW9kZSA9PT0gJ2luaXQnKXsKICAgICAgICAKICAgICAgICB0cnl7CgogICAgICAgICAgICAvL3R5cGUKICAgICAgICAgICAgbGV0IHR5cGUgPSBkYXRhLnR5cGUKCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAogICAgCiAgICAgICAgICAgIC8vaW5zdGFuY2UKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgICAgICAgICBpbml0KC4uLmlucHV0KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PT0gJ29iamVjdCcpewogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBtZXJnZVNsaWNlcwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBjYXRjaChlcnIpewogICAgICAgIAogICAgICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZW1pdCcsCiAgICAgICAgICAgICAgICBldk5hbWU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICBtc2c6IGVyciwKICAgICAgICAgICAgfQogICAgICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgICAgIH0KICAgICAgICAgICAgCiAgICB9CgogICAgLy9jaGVjawogICAgaWYobW9kZSA9PT0gJ2NhbGwnKXsKICAgICAgICBsZXQgc3RhdGUgPSAnJwogICAgICAgIGxldCBtc2cgPSBudWxsCgogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vZnVuCiAgICAgICAgICAgIGxldCBmdW4gPSBpbnN0YW5jZVtkYXRhLmZ1bl0KCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAoKICAgICAgICAgICAgLy9leGVjCiAgICAgICAgICAgIGF3YWl0IGZ1biguLi5pbnB1dCkKICAgICAgICAgICAgICAgIC50aGVuKChzdWMpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICBtc2c9c3VjCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nZXJyb3InCiAgICAgICAgICAgICAgICAgICAgbXNnPWVycgogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgICAgIHN0YXRlID0gJ2Vycm9yJwogICAgICAgICAgICBtc2cgPSBlcnIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9zZW5kTWVzc2FnZQogICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgIG1vZGU6ICdyZXR1cm4nLAogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAgZnVuOiBkYXRhLmZ1biwKICAgICAgICAgICAgc3RhdGUsCiAgICAgICAgICAgIG1zZywKICAgICAgICB9CiAgICAgICAgc2VuZE1lc3NhZ2UocmVzKQoKICAgIH0KCn0KCmZ1bmN0aW9uIHJlY3ZNZXNzYWdlKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcmVjdjonLCBkYXRhKQoKICAgIC8vZGF0YVJlY3YKICAgIGxldCBkYXRhUmVjdiA9IGRhdGEKCiAgICAvL3J1bgogICAgcnVuKGRhdGFSZWN2KQoKfQoKCiAgICAgICAgcGFyZW50UG9ydC5vbignbWVzc2FnZScsIHJlY3ZNZXNzYWdlKQogICAgICAgIAoKdHJ5ewogICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmhhbmRsZWRSZWplY3Rpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuY2F1Z2h0RXhjZXB0aW9uJywgZXJyKQogICAgfSkKICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uTW9uaXRvcicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgZXJyKQogICAgfSkKfQpjYXRjaChlcnIpe30KCg==",Buffer.from(s,"base64").toString("utf8"));var s;function o(){let n=new i,s=function(t){try{return new e.Worker(t,{eval:!0})}catch(e){a(e)}}(t);if(!s)return a("invalid worker"),null;function o(){let e=function(){let e,t,i=new Promise((function(){e=arguments[0],t=arguments[1]}));return i.resolve=e,i.reject=t,i}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=i.length;for(let s=0;s<e;s++)t[s]=i[0|Math.random()*n];return t.join("")}(),i={mode:"call",id:t,fun:"main",input:[...arguments]};return s.postMessage(i),n.once(t,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function a(e){n.emit("error",e)}return s.on("message",(function(e){let t=e,i=t.mode;"emit"!==i&&"return"!==i||("emit"===i&&n.emit(t.evName,t.msg),"return"===i&&n.emit(t.id,t))})),s.on("error",a),s.on("exit",(e=>{1!==e&&a("exit code["+e+"] !== 1")})),function(){let e={mode:"init",type:"function",input:[...arguments]};s.postMessage(e)}([...arguments]),n.main=o,n.main=o,n.terminate=function(){s?(s.terminate(),s=void 0):a("worker has been terminated")},n}n=async function(){let e=[...arguments],t=o();return await t.main(...e).finally((()=>{t.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return n}(t)}({get exports(){return i},set exports(e){i=e}}),i)}(cs);var ls=Ct(cs.exports);let us=(e,t,i)=>{let n=`${function(){if(!lt(bt))throw new Error("invalid dayjs");return bt().format("YYYYMMDDHHmmss")}()}|${Nt(6)}|${e}`;return setTimeout((()=>{ls(e,t,i).catch((e=>{console.log(e)}))}),1),n},ps=(t,i)=>{let n="";if(!be(t))return n=`invalid id[${t}]`,console.log(n),{state:"error",msg:n,path:""};let s=ve(as(t,"|"),2,"");if(!be(s))return n=`can not find fileHash in id[${t}]`,console.log(n),{state:"error",msg:n,path:""};let o=e.resolve(i,s),a=e.resolve(i,`${s}.done`),r=Dt(o),c=Dt(a),l=r&&c;return!r&&c&&rs(a),{state:l?"success":"merging",msg:"",path:o}};var ds={exports:{}};!function(e){var t,i;e.exports=(t=o,i={},function(e){e.exports=function(e){var t={};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new s(n,o||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],r]:e._events[c].push(r):(e._events[c]=r,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function r(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),r.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},r.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},r.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},r.prototype.emit=function(e,t,n,s,o,a){var r=i?i+e:e;if(!this._events[r])return!1;var c,l,u=this._events[r],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,o),!0;case 6:return u.fn.call(u.context,t,n,s,o,a),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,m=u.length;for(l=0;l<m;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),p){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},r.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},r.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},r.prototype.removeListener=function(e,t,n,s){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var r=this._events[o];if(r.fn)r.fn!==t||s&&!r.once||n&&r.context!==n||a(this,o);else{for(var c=0,l=[],u=r.length;c<u;c++)(r[c].fn!==t||s&&!r[c].once||n&&r[c].context!==n)&&l.push(r[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=i,r.EventEmitter=r,e.exports=r}({get exports(){return t},set exports(e){t=e}});var i=t;let n;!function(){if("nodejs"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let t=(s="CgogICAgICAgIC8vaW1wb3J0IHsgcGFyZW50UG9ydCB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJwogICAgICAgIGxldCB7IHBhcmVudFBvcnQgfSA9IHJlcXVpcmUoJ3dvcmtlcl90aHJlYWRzJykgLy/lm6BwYWNrYWdlLmpzb27kuI3ntaZ0eXBlPW1vZHVsZeaVheeEoeazleaUr+aPtGVzNiBpbXBvcnQsIOW+l+S9v+eUqHJlcXVpcmUKICAgICAgICAvL+iLpeimgeaWvG5vZGVqcyB3b3JrZXLlhafkvb/nlKjnhKHms5XovYnora/nmoTljp/nlJ/lpZfku7bkvovlpoJmcywg6YG/5YWN5L2/55So6aCC5bGkaW1wb3J05Yqg6LyJ5L2/55SoLCDlm6DnhKHms5XovYnora/mnIPnm7TmjqXkv53nlZkKICAgICAgICAvL+S4puWboGltcG9ydOS9jeaWvHdvcmtlcuWkluWxpOmZkOWumueCunJlcXVpcmXljYAocGFja2FnZS5qc29u5LiN57WmdHlwZT1tb2R1bGUpLCDmlYXlh7rnj77pjK/oqqTnhKHms5XovYnora8KICAgICAgICAKCiJ1c2Ugc3RyaWN0Ijt2YXIgdD1yZXF1aXJlKCJwYXRoIiksZT1yZXF1aXJlKCJmcyIpO2Z1bmN0aW9uIHIodCxlKXtmb3IodmFyIHI9LTEsbj1udWxsPT10PzA6dC5sZW5ndGg7KytyPG4mJiExIT09ZSh0W3JdLHIsdCk7KTtyZXR1cm4gdH12YXIgbixvPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG89LTEsdT1PYmplY3QodCksaT1yKHQpLGE9aS5sZW5ndGg7YS0tOyl7dmFyIGM9aVtuP2E6KytvXTtpZighMT09PWUodVtjXSxjLHUpKWJyZWFrfXJldHVybiB0fTt2YXIgdT0ib2JqZWN0Ij09dHlwZW9mIGdsb2JhbCYmZ2xvYmFsJiZnbG9iYWwuT2JqZWN0PT09T2JqZWN0JiZnbG9iYWwsaT0ib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGE9dXx8aXx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKSxjPWEuU3ltYm9sLGY9T2JqZWN0LnByb3RvdHlwZSxzPWYuaGFzT3duUHJvcGVydHksbD1mLnRvU3RyaW5nLHA9Yz9jLnRvU3RyaW5nVGFnOnZvaWQgMDt2YXIgaD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3ZhciB2PSJbb2JqZWN0IE51bGxdIix5PSJbb2JqZWN0IFVuZGVmaW5lZF0iLGQ9Yz9jLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBiKHQpe3JldHVybiBudWxsPT10P3ZvaWQgMD09PXQ/eTp2OmQmJmQgaW4gT2JqZWN0KHQpP2Z1bmN0aW9uKHQpe3ZhciBlPXMuY2FsbCh0LHApLHI9dFtwXTt0cnl7dFtwXT12b2lkIDA7dmFyIG49ITB9Y2F0Y2godCl7fXZhciBvPWwuY2FsbCh0KTtyZXR1cm4gbiYmKGU/dFtwXT1yOmRlbGV0ZSB0W3BdKSxvfSh0KTpmdW5jdGlvbih0KXtyZXR1cm4gaC5jYWxsKHQpfSh0KX1mdW5jdGlvbiBnKHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9ZnVuY3Rpb24gXyh0KXtyZXR1cm4gZyh0KSYmIltvYmplY3QgQXJndW1lbnRzXSI9PWIodCl9dmFyIGo9T2JqZWN0LnByb3RvdHlwZSx3PWouaGFzT3duUHJvcGVydHksbT1qLnByb3BlcnR5SXNFbnVtZXJhYmxlLE89XyhmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpP186ZnVuY3Rpb24odCl7cmV0dXJuIGcodCkmJncuY2FsbCh0LCJjYWxsZWUiKSYmIW0uY2FsbCh0LCJjYWxsZWUiKX0sUz1BcnJheS5pc0FycmF5O3ZhciBBPSJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMseD1BJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmbW9kdWxlJiYhbW9kdWxlLm5vZGVUeXBlJiZtb2R1bGUsej14JiZ4LmV4cG9ydHM9PT1BP2EuQnVmZmVyOnZvaWQgMCxFPSh6P3ouaXNCdWZmZXI6dm9pZCAwKXx8ZnVuY3Rpb24oKXtyZXR1cm4hMX0saz05MDA3MTk5MjU0NzQwOTkxLEY9L14oPzowfFsxLTldXGQqKSQvO2Z1bmN0aW9uICQodCxlKXt2YXIgcj10eXBlb2YgdDtyZXR1cm4hIShlPW51bGw9PWU/azplKSYmKCJudW1iZXIiPT1yfHwic3ltYm9sIiE9ciYmRi50ZXN0KHQpKSYmdD4tMSYmdCUxPT0wJiZ0PGV9dmFyIFA9OTAwNzE5OTI1NDc0MDk5MTtmdW5jdGlvbiBMKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZ0PD1QfXZhciBJPXt9O0lbIltvYmplY3QgRmxvYXQzMkFycmF5XSJdPUlbIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdPUlbIltvYmplY3QgSW50OEFycmF5XSJdPUlbIltvYmplY3QgSW50MTZBcnJheV0iXT1JWyJbb2JqZWN0IEludDMyQXJyYXldIl09SVsiW29iamVjdCBVaW50OEFycmF5XSJdPUlbIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIl09SVsiW29iamVjdCBVaW50MTZBcnJheV0iXT1JWyJbb2JqZWN0IFVpbnQzMkFycmF5XSJdPSEwLElbIltvYmplY3QgQXJndW1lbnRzXSJdPUlbIltvYmplY3QgQXJyYXldIl09SVsiW29iamVjdCBBcnJheUJ1ZmZlcl0iXT1JWyJbb2JqZWN0IEJvb2xlYW5dIl09SVsiW29iamVjdCBEYXRhVmlld10iXT1JWyJbb2JqZWN0IERhdGVdIl09SVsiW29iamVjdCBFcnJvcl0iXT1JWyJbb2JqZWN0IEZ1bmN0aW9uXSJdPUlbIltvYmplY3QgTWFwXSJdPUlbIltvYmplY3QgTnVtYmVyXSJdPUlbIltvYmplY3QgT2JqZWN0XSJdPUlbIltvYmplY3QgUmVnRXhwXSJdPUlbIltvYmplY3QgU2V0XSJdPUlbIltvYmplY3QgU3RyaW5nXSJdPUlbIltvYmplY3QgV2Vha01hcF0iXT0hMTt2YXIgTSxUPSJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMsUj1UJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmbW9kdWxlJiYhbW9kdWxlLm5vZGVUeXBlJiZtb2R1bGUsVT1SJiZSLmV4cG9ydHM9PT1UJiZ1LnByb2Nlc3MsTj1mdW5jdGlvbigpe3RyeXt2YXIgdD1SJiZSLnJlcXVpcmUmJlIucmVxdWlyZSgidXRpbCIpLnR5cGVzO3JldHVybiB0fHxVJiZVLmJpbmRpbmcmJlUuYmluZGluZygidXRpbCIpfWNhdGNoKHQpe319KCksRD1OJiZOLmlzVHlwZWRBcnJheSxCPUQ/KE09RCxmdW5jdGlvbih0KXtyZXR1cm4gTSh0KX0pOmZ1bmN0aW9uKHQpe3JldHVybiBnKHQpJiZMKHQubGVuZ3RoKSYmISFJW2IodCldfSxDPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gVyh0LGUpe3ZhciByPVModCksbj0hciYmTyh0KSxvPSFyJiYhbiYmRSh0KSx1PSFyJiYhbiYmIW8mJkIodCksaT1yfHxufHxvfHx1LGE9aT9mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0tMSxuPUFycmF5KHQpOysrcjx0OyluW3JdPWUocik7cmV0dXJuIG59KHQubGVuZ3RoLFN0cmluZyk6W10sYz1hLmxlbmd0aDtmb3IodmFyIGYgaW4gdCkhZSYmIUMuY2FsbCh0LGYpfHxpJiYoImxlbmd0aCI9PWZ8fG8mJigib2Zmc2V0Ij09Znx8InBhcmVudCI9PWYpfHx1JiYoImJ1ZmZlciI9PWZ8fCJieXRlTGVuZ3RoIj09Znx8ImJ5dGVPZmZzZXQiPT1mKXx8JChmLGMpKXx8YS5wdXNoKGYpO3JldHVybiBhfXZhciBxPU9iamVjdC5wcm90b3R5cGU7dmFyIFY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIHQoZShyKSl9fShPYmplY3Qua2V5cyxPYmplY3QpLEc9VixIPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gSih0KXtpZihyPShlPXQpJiZlLmNvbnN0cnVjdG9yLGUhPT0oImZ1bmN0aW9uIj09dHlwZW9mIHImJnIucHJvdG90eXBlfHxxKSlyZXR1cm4gRyh0KTt2YXIgZSxyLG49W107Zm9yKHZhciBvIGluIE9iamVjdCh0KSlILmNhbGwodCxvKSYmImNvbnN0cnVjdG9yIiE9byYmbi5wdXNoKG8pO3JldHVybiBufWZ1bmN0aW9uIEsodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJigib2JqZWN0Ij09ZXx8ImZ1bmN0aW9uIj09ZSl9dmFyIFE9IltvYmplY3QgQXN5bmNGdW5jdGlvbl0iLFg9IltvYmplY3QgRnVuY3Rpb25dIixZPSJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIsWj0iW29iamVjdCBQcm94eV0iO2Z1bmN0aW9uIHR0KHQpe2lmKCFLKHQpKXJldHVybiExO3ZhciBlPWIodCk7cmV0dXJuIGU9PVh8fGU9PVl8fGU9PVF8fGU9PVp9ZnVuY3Rpb24gZXQodCl7cmV0dXJuIG51bGwhPXQmJkwodC5sZW5ndGgpJiYhdHQodCl9ZnVuY3Rpb24gcnQodCl7cmV0dXJuIGV0KHQpP1codCk6Sih0KX12YXIgbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24ocixuKXtpZihudWxsPT1yKXJldHVybiByO2lmKCFldChyKSlyZXR1cm4gdChyLG4pO2Zvcih2YXIgbz1yLmxlbmd0aCx1PWU/bzotMSxpPU9iamVjdChyKTsoZT91LS06Kyt1PG8pJiYhMSE9PW4oaVt1XSx1LGkpOyk7cmV0dXJuIHJ9fSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmbyh0LGUscnQpfSkpLG90PW50O2Z1bmN0aW9uIHV0KHQpe3JldHVybiB0fWZ1bmN0aW9uIGl0KHQsZSl7dmFyIG47cmV0dXJuKFModCk/cjpvdCkodCwiZnVuY3Rpb24iPT10eXBlb2Yobj1lKT9uOnV0KX12YXIgYXQsY3Q9YVsiX19jb3JlLWpzX3NoYXJlZF9fIl0sZnQ9KGF0PS9bXi5dKyQvLmV4ZWMoY3QmJmN0LmtleXMmJmN0LmtleXMuSUVfUFJPVE98fCIiKSk/IlN5bWJvbChzcmMpXzEuIithdDoiIjt2YXIgc3Q9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIGx0KHQpe2lmKG51bGwhPXQpe3RyeXtyZXR1cm4gc3QuY2FsbCh0KX1jYXRjaCh0KXt9dHJ5e3JldHVybiB0KyIifWNhdGNoKHQpe319cmV0dXJuIiJ9dmFyIHB0PS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLGh0PUZ1bmN0aW9uLnByb3RvdHlwZSx2dD1PYmplY3QucHJvdG90eXBlLHl0PWh0LnRvU3RyaW5nLGR0PXZ0Lmhhc093blByb3BlcnR5LGJ0PVJlZ0V4cCgiXiIreXQuY2FsbChkdCkucmVwbGFjZSgvW1xcXiQuKis/KClbXF17fXxdL2csIlxcJCYiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCIkMS4qPyIpKyIkIik7ZnVuY3Rpb24gZ3QodCl7cmV0dXJuISghSyh0KXx8ZnVuY3Rpb24odCl7cmV0dXJuISFmdCYmZnQgaW4gdH0odCkpJiYodHQodCk/YnQ6cHQpLnRlc3QobHQodCkpfWZ1bmN0aW9uIF90KHQsZSl7dmFyIHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD92b2lkIDA6dFtlXX0odCxlKTtyZXR1cm4gZ3Qocik/cjp2b2lkIDB9dmFyIGp0PV90KGEsIkRhdGFWaWV3Iiksd3Q9X3QoYSwiTWFwIiksbXQ9X3QoYSwiUHJvbWlzZSIpLE90PV90KGEsIlNldCIpLFN0PV90KGEsIldlYWtNYXAiKSxBdD0iW29iamVjdCBNYXBdIix4dD0iW29iamVjdCBQcm9taXNlXSIsenQ9IltvYmplY3QgU2V0XSIsRXQ9IltvYmplY3QgV2Vha01hcF0iLGt0PSJbb2JqZWN0IERhdGFWaWV3XSIsRnQ9bHQoanQpLCR0PWx0KHd0KSxQdD1sdChtdCksTHQ9bHQoT3QpLEl0PWx0KFN0KSxNdD1iOyhqdCYmTXQobmV3IGp0KG5ldyBBcnJheUJ1ZmZlcigxKSkpIT1rdHx8d3QmJk10KG5ldyB3dCkhPUF0fHxtdCYmTXQobXQucmVzb2x2ZSgpKSE9eHR8fE90JiZNdChuZXcgT3QpIT16dHx8U3QmJk10KG5ldyBTdCkhPUV0KSYmKE10PWZ1bmN0aW9uKHQpe3ZhciBlPWIodCkscj0iW29iamVjdCBPYmplY3RdIj09ZT90LmNvbnN0cnVjdG9yOnZvaWQgMCxuPXI/bHQocik6IiI7aWYobilzd2l0Y2gobil7Y2FzZSBGdDpyZXR1cm4ga3Q7Y2FzZSAkdDpyZXR1cm4gQXQ7Y2FzZSBQdDpyZXR1cm4geHQ7Y2FzZSBMdDpyZXR1cm4genQ7Y2FzZSBJdDpyZXR1cm4gRXR9cmV0dXJuIGV9KTt2YXIgVHQ9TXQsUnQ9IltvYmplY3QgU3RyaW5nXSI7ZnVuY3Rpb24gVXQodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX12YXIgTnQ9VXQoImxlbmd0aCIpLER0PVJlZ0V4cCgiW1xcdTIwMGRcXHVkODAwLVxcdWRmZmZcXHUwMzAwLVxcdTAzNmZcXHVmZTIwLVxcdWZlMmZcXHUyMGQwLVxcdTIwZmZcXHVmZTBlXFx1ZmUwZl0iKTtmdW5jdGlvbiBCdCh0KXtyZXR1cm4gRHQudGVzdCh0KX12YXIgQ3Q9IlxcdWQ4MDAtXFx1ZGZmZiIsV3Q9IlsiK0N0KyJdIixxdD0iW1xcdTAzMDAtXFx1MDM2ZlxcdWZlMjAtXFx1ZmUyZlxcdTIwZDAtXFx1MjBmZl0iLFZ0PSJcXHVkODNjW1xcdWRmZmItXFx1ZGZmZl0iLEd0PSJbXiIrQ3QrIl0iLEh0PSIoPzpcXHVkODNjW1xcdWRkZTYtXFx1ZGRmZl0pezJ9IixKdD0iW1xcdWQ4MDAtXFx1ZGJmZl1bXFx1ZGMwMC1cXHVkZmZmXSIsS3Q9Iig/OiIrcXQrInwiK1Z0KyIpIisiPyIsUXQ9IltcXHVmZTBlXFx1ZmUwZl0/IixYdD1RdCtLdCsoIig/OlxcdTIwMGQoPzoiK1tHdCxIdCxKdF0uam9pbigifCIpKyIpIitRdCtLdCsiKSoiKSxZdD0iKD86IitbR3QrcXQrIj8iLHF0LEh0LEp0LFd0XS5qb2luKCJ8IikrIikiLFp0PVJlZ0V4cChWdCsiKD89IitWdCsiKXwiK1l0K1h0LCJnIik7ZnVuY3Rpb24gdGUodCl7cmV0dXJuIEJ0KHQpP2Z1bmN0aW9uKHQpe2Zvcih2YXIgZT1adC5sYXN0SW5kZXg9MDtadC50ZXN0KHQpOykrK2U7cmV0dXJuIGV9KHQpOk50KHQpfWZ1bmN0aW9uIGVlKHQpe2lmKG51bGw9PXQpcmV0dXJuIDA7aWYoZXQodCkpcmV0dXJuInN0cmluZyI9PXR5cGVvZihlPXQpfHwhUyhlKSYmZyhlKSYmYihlKT09UnQ/dGUodCk6dC5sZW5ndGg7dmFyIGUscj1UdCh0KTtyZXR1cm4iW29iamVjdCBNYXBdIj09cnx8IltvYmplY3QgU2V0XSI9PXI/dC5zaXplOkoodCkubGVuZ3RofWZ1bmN0aW9uIHJlKHQsZSl7Zm9yKHZhciByPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLG89QXJyYXkobik7KytyPG47KW9bcl09ZSh0W3JdLHIsdCk7cmV0dXJuIG99ZnVuY3Rpb24gbmUodCxlKXtyZXR1cm4gdD09PWV8fHQhPXQmJmUhPWV9ZnVuY3Rpb24gb2UodCxlKXtmb3IodmFyIHI9dC5sZW5ndGg7ci0tOylpZihuZSh0W3JdWzBdLGUpKXJldHVybiByO3JldHVybi0xfXZhciB1ZT1BcnJheS5wcm90b3R5cGUuc3BsaWNlO2Z1bmN0aW9uIGllKHQpe3ZhciBlPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPHI7KXt2YXIgbj10W2VdO3RoaXMuc2V0KG5bMF0sblsxXSl9fWllLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189W10sdGhpcy5zaXplPTB9LGllLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxyPW9lKGUsdCk7cmV0dXJuIShyPDApJiYocj09ZS5sZW5ndGgtMT9lLnBvcCgpOnVlLmNhbGwoZSxyLDEpLC0tdGhpcy5zaXplLCEwKX0saWUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLHI9b2UoZSx0KTtyZXR1cm4gcjwwP3ZvaWQgMDplW3JdWzFdfSxpZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiBvZSh0aGlzLl9fZGF0YV9fLHQpPi0xfSxpZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5fX2RhdGFfXyxuPW9lKHIsdCk7cmV0dXJuIG48MD8oKyt0aGlzLnNpemUsci5wdXNoKFt0LGVdKSk6cltuXVsxXT1lLHRoaXN9O3ZhciBhZT1fdChPYmplY3QsImNyZWF0ZSIpO3ZhciBjZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBmZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIHNlKHQpe3ZhciBlPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPHI7KXt2YXIgbj10W2VdO3RoaXMuc2V0KG5bMF0sblsxXSl9fWZ1bmN0aW9uIGxlKHQsZSl7dmFyIHIsbixvPXQuX19kYXRhX187cmV0dXJuKCJzdHJpbmciPT0obj10eXBlb2Yocj1lKSl8fCJudW1iZXIiPT1ufHwic3ltYm9sIj09bnx8ImJvb2xlYW4iPT1uPyJfX3Byb3RvX18iIT09cjpudWxsPT09cik/b1sic3RyaW5nIj09dHlwZW9mIGU/InN0cmluZyI6Imhhc2giXTpvLm1hcH1mdW5jdGlvbiBwZSh0KXt2YXIgZT0tMSxyPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxyOyl7dmFyIG49dFtlXTt0aGlzLnNldChuWzBdLG5bMV0pfX1zZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPWFlP2FlKG51bGwpOnt9LHRoaXMuc2l6ZT0wfSxzZS5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1lPzE6MCxlfSxzZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoYWUpe3ZhciByPWVbdF07cmV0dXJuIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iPT09cj92b2lkIDA6cn1yZXR1cm4gY2UuY2FsbChlLHQpP2VbdF06dm9pZCAwfSxzZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX187cmV0dXJuIGFlP3ZvaWQgMCE9PWVbdF06ZmUuY2FsbChlLHQpfSxzZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5fX2RhdGFfXztyZXR1cm4gdGhpcy5zaXplKz10aGlzLmhhcyh0KT8wOjEsclt0XT1hZSYmdm9pZCAwPT09ZT8iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyI6ZSx0aGlzfSxwZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNpemU9MCx0aGlzLl9fZGF0YV9fPXtoYXNoOm5ldyBzZSxtYXA6bmV3KHd0fHxpZSksc3RyaW5nOm5ldyBzZX19LHBlLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9bGUodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX0scGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gbGUodGhpcyx0KS5nZXQodCl9LHBlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIGxlKHRoaXMsdCkuaGFzKHQpfSxwZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9bGUodGhpcyx0KSxuPXIuc2l6ZTtyZXR1cm4gci5zZXQodCxlKSx0aGlzLnNpemUrPXIuc2l6ZT09bj8wOjEsdGhpc307ZnVuY3Rpb24gaGUodCl7dmFyIGU9dGhpcy5fX2RhdGFfXz1uZXcgaWUodCk7dGhpcy5zaXplPWUuc2l6ZX1oZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW5ldyBpZSx0aGlzLnNpemU9MH0saGUucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLHI9ZS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZT1lLnNpemUscn0saGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQodCl9LGhlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfSxoZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5fX2RhdGFfXztpZihyIGluc3RhbmNlb2YgaWUpe3ZhciBuPXIuX19kYXRhX187aWYoIXd0fHxuLmxlbmd0aDwxOTkpcmV0dXJuIG4ucHVzaChbdCxlXSksdGhpcy5zaXplPSsrci5zaXplLHRoaXM7cj10aGlzLl9fZGF0YV9fPW5ldyBwZShuKX1yZXR1cm4gci5zZXQodCxlKSx0aGlzLnNpemU9ci5zaXplLHRoaXN9O2Z1bmN0aW9uIHZlKHQpe3ZhciBlPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLl9fZGF0YV9fPW5ldyBwZTsrK2U8cjspdGhpcy5hZGQodFtlXSl9ZnVuY3Rpb24geWUodCxlKXtmb3IodmFyIHI9LTEsbj1udWxsPT10PzA6dC5sZW5ndGg7KytyPG47KWlmKGUodFtyXSxyLHQpKXJldHVybiEwO3JldHVybiExfXZlLnByb3RvdHlwZS5hZGQ9dmUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uc2V0KHQsIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iKSx0aGlzfSx2ZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX07dmFyIGRlPTEsYmU9MjtmdW5jdGlvbiBnZSh0LGUscixuLG8sdSl7dmFyIGk9ciZkZSxhPXQubGVuZ3RoLGM9ZS5sZW5ndGg7aWYoYSE9YyYmIShpJiZjPmEpKXJldHVybiExO3ZhciBmPXUuZ2V0KHQpLHM9dS5nZXQoZSk7aWYoZiYmcylyZXR1cm4gZj09ZSYmcz09dDt2YXIgbD0tMSxwPSEwLGg9ciZiZT9uZXcgdmU6dm9pZCAwO2Zvcih1LnNldCh0LGUpLHUuc2V0KGUsdCk7KytsPGE7KXt2YXIgdj10W2xdLHk9ZVtsXTtpZihuKXZhciBkPWk/bih5LHYsbCxlLHQsdSk6bih2LHksbCx0LGUsdSk7aWYodm9pZCAwIT09ZCl7aWYoZCljb250aW51ZTtwPSExO2JyZWFrfWlmKGgpe2lmKCF5ZShlLChmdW5jdGlvbih0LGUpe2lmKGk9ZSwhaC5oYXMoaSkmJih2PT09dHx8byh2LHQscixuLHUpKSlyZXR1cm4gaC5wdXNoKGUpO3ZhciBpfSkpKXtwPSExO2JyZWFrfX1lbHNlIGlmKHYhPT15JiYhbyh2LHkscixuLHUpKXtwPSExO2JyZWFrfX1yZXR1cm4gdS5kZWxldGUodCksdS5kZWxldGUoZSkscH12YXIgX2U9YS5VaW50OEFycmF5O2Z1bmN0aW9uIGplKHQpe3ZhciBlPS0xLHI9QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe3JbKytlXT1bbix0XX0pKSxyfWZ1bmN0aW9uIHdlKHQpe3ZhciBlPS0xLHI9QXJyYXkodC5zaXplKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtyWysrZV09dH0pKSxyfXZhciBtZT0xLE9lPTIsU2U9IltvYmplY3QgQm9vbGVhbl0iLEFlPSJbb2JqZWN0IERhdGVdIix4ZT0iW29iamVjdCBFcnJvcl0iLHplPSJbb2JqZWN0IE1hcF0iLEVlPSJbb2JqZWN0IE51bWJlcl0iLGtlPSJbb2JqZWN0IFJlZ0V4cF0iLEZlPSJbb2JqZWN0IFNldF0iLCRlPSJbb2JqZWN0IFN0cmluZ10iLFBlPSJbb2JqZWN0IFN5bWJvbF0iLExlPSJbb2JqZWN0IEFycmF5QnVmZmVyXSIsSWU9IltvYmplY3QgRGF0YVZpZXddIixNZT1jP2MucHJvdG90eXBlOnZvaWQgMCxUZT1NZT9NZS52YWx1ZU9mOnZvaWQgMDtmdW5jdGlvbiBSZSh0LGUpe2Zvcih2YXIgcj0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxvPTAsdT1bXTsrK3I8bjspe3ZhciBpPXRbcl07ZShpLHIsdCkmJih1W28rK109aSl9cmV0dXJuIHV9dmFyIFVlPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsTmU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxEZT1OZT9mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXToodD1PYmplY3QodCksUmUoTmUodCksKGZ1bmN0aW9uKGUpe3JldHVybiBVZS5jYWxsKHQsZSl9KSkpfTpmdW5jdGlvbigpe3JldHVybltdfTtmdW5jdGlvbiBCZSh0KXtyZXR1cm4gZnVuY3Rpb24odCxlLHIpe3ZhciBuPWUodCk7cmV0dXJuIFModCk/bjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0tMSxuPWUubGVuZ3RoLG89dC5sZW5ndGg7KytyPG47KXRbbytyXT1lW3JdO3JldHVybiB0fShuLHIodCkpfSh0LHJ0LERlKX12YXIgQ2U9MSxXZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBxZT0xLFZlPSJbb2JqZWN0IEFyZ3VtZW50c10iLEdlPSJbb2JqZWN0IEFycmF5XSIsSGU9IltvYmplY3QgT2JqZWN0XSIsSmU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBLZSh0LGUscixuLG8sdSl7dmFyIGk9Uyh0KSxhPVMoZSksYz1pP0dlOlR0KHQpLGY9YT9HZTpUdChlKSxzPShjPWM9PVZlP0hlOmMpPT1IZSxsPShmPWY9PVZlP0hlOmYpPT1IZSxwPWM9PWY7aWYocCYmRSh0KSl7aWYoIUUoZSkpcmV0dXJuITE7aT0hMCxzPSExfWlmKHAmJiFzKXJldHVybiB1fHwodT1uZXcgaGUpLGl8fEIodCk/Z2UodCxlLHIsbixvLHUpOmZ1bmN0aW9uKHQsZSxyLG4sbyx1LGkpe3N3aXRjaChyKXtjYXNlIEllOmlmKHQuYnl0ZUxlbmd0aCE9ZS5ieXRlTGVuZ3RofHx0LmJ5dGVPZmZzZXQhPWUuYnl0ZU9mZnNldClyZXR1cm4hMTt0PXQuYnVmZmVyLGU9ZS5idWZmZXI7Y2FzZSBMZTpyZXR1cm4hKHQuYnl0ZUxlbmd0aCE9ZS5ieXRlTGVuZ3RofHwhdShuZXcgX2UodCksbmV3IF9lKGUpKSk7Y2FzZSBTZTpjYXNlIEFlOmNhc2UgRWU6cmV0dXJuIG5lKCt0LCtlKTtjYXNlIHhlOnJldHVybiB0Lm5hbWU9PWUubmFtZSYmdC5tZXNzYWdlPT1lLm1lc3NhZ2U7Y2FzZSBrZTpjYXNlICRlOnJldHVybiB0PT1lKyIiO2Nhc2UgemU6dmFyIGE9amU7Y2FzZSBGZTp2YXIgYz1uJm1lO2lmKGF8fChhPXdlKSx0LnNpemUhPWUuc2l6ZSYmIWMpcmV0dXJuITE7dmFyIGY9aS5nZXQodCk7aWYoZilyZXR1cm4gZj09ZTtufD1PZSxpLnNldCh0LGUpO3ZhciBzPWdlKGEodCksYShlKSxuLG8sdSxpKTtyZXR1cm4gaS5kZWxldGUodCkscztjYXNlIFBlOmlmKFRlKXJldHVybiBUZS5jYWxsKHQpPT1UZS5jYWxsKGUpfXJldHVybiExfSh0LGUsYyxyLG4sbyx1KTtpZighKHImcWUpKXt2YXIgaD1zJiZKZS5jYWxsKHQsIl9fd3JhcHBlZF9fIiksdj1sJiZKZS5jYWxsKGUsIl9fd3JhcHBlZF9fIik7aWYoaHx8dil7dmFyIHk9aD90LnZhbHVlKCk6dCxkPXY/ZS52YWx1ZSgpOmU7cmV0dXJuIHV8fCh1PW5ldyBoZSksbyh5LGQscixuLHUpfX1yZXR1cm4hIXAmJih1fHwodT1uZXcgaGUpLGZ1bmN0aW9uKHQsZSxyLG4sbyx1KXt2YXIgaT1yJkNlLGE9QmUodCksYz1hLmxlbmd0aDtpZihjIT1CZShlKS5sZW5ndGgmJiFpKXJldHVybiExO2Zvcih2YXIgZj1jO2YtLTspe3ZhciBzPWFbZl07aWYoIShpP3MgaW4gZTpXZS5jYWxsKGUscykpKXJldHVybiExfXZhciBsPXUuZ2V0KHQpLHA9dS5nZXQoZSk7aWYobCYmcClyZXR1cm4gbD09ZSYmcD09dDt2YXIgaD0hMDt1LnNldCh0LGUpLHUuc2V0KGUsdCk7Zm9yKHZhciB2PWk7KytmPGM7KXt2YXIgeT10W3M9YVtmXV0sZD1lW3NdO2lmKG4pdmFyIGI9aT9uKGQseSxzLGUsdCx1KTpuKHksZCxzLHQsZSx1KTtpZighKHZvaWQgMD09PWI/eT09PWR8fG8oeSxkLHIsbix1KTpiKSl7aD0hMTticmVha312fHwodj0iY29uc3RydWN0b3IiPT1zKX1pZihoJiYhdil7dmFyIGc9dC5jb25zdHJ1Y3RvcixfPWUuY29uc3RydWN0b3I7Zz09X3x8ISgiY29uc3RydWN0b3IiaW4gdCl8fCEoImNvbnN0cnVjdG9yImluIGUpfHwiZnVuY3Rpb24iPT10eXBlb2YgZyYmZyBpbnN0YW5jZW9mIGcmJiJmdW5jdGlvbiI9PXR5cGVvZiBfJiZfIGluc3RhbmNlb2YgX3x8KGg9ITEpfXJldHVybiB1LmRlbGV0ZSh0KSx1LmRlbGV0ZShlKSxofSh0LGUscixuLG8sdSkpfWZ1bmN0aW9uIFFlKHQsZSxyLG4sbyl7cmV0dXJuIHQ9PT1lfHwobnVsbD09dHx8bnVsbD09ZXx8IWcodCkmJiFnKGUpP3QhPXQmJmUhPWU6S2UodCxlLHIsbixRZSxvKSl9dmFyIFhlPTEsWWU9MjtmdW5jdGlvbiBaZSh0KXtyZXR1cm4gdD09dCYmIUsodCl9ZnVuY3Rpb24gdHIodCxlKXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG51bGwhPXImJihyW3RdPT09ZSYmKHZvaWQgMCE9PWV8fHQgaW4gT2JqZWN0KHIpKSl9fWZ1bmN0aW9uIGVyKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1ydCh0KSxyPWUubGVuZ3RoO3ItLTspe3ZhciBuPWVbcl0sbz10W25dO2Vbcl09W24sbyxaZShvKV19cmV0dXJuIGV9KHQpO3JldHVybiAxPT1lLmxlbmd0aCYmZVswXVsyXT90cihlWzBdWzBdLGVbMF1bMV0pOmZ1bmN0aW9uKHIpe3JldHVybiByPT09dHx8ZnVuY3Rpb24odCxlLHIsbil7dmFyIG89ci5sZW5ndGgsdT1vLGk9IW47aWYobnVsbD09dClyZXR1cm4hdTtmb3IodD1PYmplY3QodCk7by0tOyl7dmFyIGE9cltvXTtpZihpJiZhWzJdP2FbMV0hPT10W2FbMF1dOiEoYVswXWluIHQpKXJldHVybiExfWZvcig7KytvPHU7KXt2YXIgYz0oYT1yW29dKVswXSxmPXRbY10scz1hWzFdO2lmKGkmJmFbMl0pe2lmKHZvaWQgMD09PWYmJiEoYyBpbiB0KSlyZXR1cm4hMX1lbHNle3ZhciBsPW5ldyBoZTtpZihuKXZhciBwPW4oZixzLGMsdCxlLGwpO2lmKCEodm9pZCAwPT09cD9RZShzLGYsWGV8WWUsbixsKTpwKSlyZXR1cm4hMX19cmV0dXJuITB9KHIsdCxlKX19dmFyIHJyPSJbb2JqZWN0IFN5bWJvbF0iO2Z1bmN0aW9uIG5yKHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdHx8Zyh0KSYmYih0KT09cnJ9dmFyIG9yPS9cLnxcWyg/OlteW1xdXSp8KFsiJ10pKD86KD8hXDEpW15cXF18XFwuKSo/XDEpXF0vLHVyPS9eXHcqJC87ZnVuY3Rpb24gaXIodCxlKXtpZihTKHQpKXJldHVybiExO3ZhciByPXR5cGVvZiB0O3JldHVybiEoIm51bWJlciIhPXImJiJzeW1ib2wiIT1yJiYiYm9vbGVhbiIhPXImJm51bGwhPXQmJiFucih0KSl8fCh1ci50ZXN0KHQpfHwhb3IudGVzdCh0KXx8bnVsbCE9ZSYmdCBpbiBPYmplY3QoZSkpfXZhciBhcj0iRXhwZWN0ZWQgYSBmdW5jdGlvbiI7ZnVuY3Rpb24gY3IodCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdHx8bnVsbCE9ZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihhcik7dmFyIHI9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHMsbz1lP2UuYXBwbHkodGhpcyxuKTpuWzBdLHU9ci5jYWNoZTtpZih1LmhhcyhvKSlyZXR1cm4gdS5nZXQobyk7dmFyIGk9dC5hcHBseSh0aGlzLG4pO3JldHVybiByLmNhY2hlPXUuc2V0KG8saSl8fHUsaX07cmV0dXJuIHIuY2FjaGU9bmV3KGNyLkNhY2hlfHxwZSkscn1jci5DYWNoZT1wZTt2YXIgZnI9L1teLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JCkpL2csc3I9L1xcKFxcKT8vZyxscj1mdW5jdGlvbih0KXt2YXIgZT1jcih0LChmdW5jdGlvbih0KXtyZXR1cm4gNTAwPT09ci5zaXplJiZyLmNsZWFyKCksdH0pKSxyPWUuY2FjaGU7cmV0dXJuIGV9KChmdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gNDY9PT10LmNoYXJDb2RlQXQoMCkmJmUucHVzaCgiIiksdC5yZXBsYWNlKGZyLChmdW5jdGlvbih0LHIsbixvKXtlLnB1c2gobj9vLnJlcGxhY2Uoc3IsIiQxIik6cnx8dCl9KSksZX0pKSxwcj1scixocj0xLzAsdnI9Yz9jLnByb3RvdHlwZTp2b2lkIDAseXI9dnI/dnIudG9TdHJpbmc6dm9pZCAwO2Z1bmN0aW9uIGRyKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gdDtpZihTKHQpKXJldHVybiByZSh0LGRyKSsiIjtpZihucih0KSlyZXR1cm4geXI/eXIuY2FsbCh0KToiIjt2YXIgZT10KyIiO3JldHVybiIwIj09ZSYmMS90PT0taHI/Ii0wIjplfWZ1bmN0aW9uIGJyKHQpe3JldHVybiBudWxsPT10PyIiOmRyKHQpfWZ1bmN0aW9uIGdyKHQsZSl7cmV0dXJuIFModCk/dDppcih0LGUpP1t0XTpwcihicih0KSl9dmFyIF9yPTEvMDtmdW5jdGlvbiBqcih0KXtpZigic3RyaW5nIj09dHlwZW9mIHR8fG5yKHQpKXJldHVybiB0O3ZhciBlPXQrIiI7cmV0dXJuIjAiPT1lJiYxL3Q9PS1fcj8iLTAiOmV9ZnVuY3Rpb24gd3IodCxlKXtmb3IodmFyIHI9MCxuPShlPWdyKGUsdCkpLmxlbmd0aDtudWxsIT10JiZyPG47KXQ9dFtqcihlW3IrK10pXTtyZXR1cm4gciYmcj09bj90OnZvaWQgMH1mdW5jdGlvbiBtcih0LGUscil7dmFyIG49bnVsbD09dD92b2lkIDA6d3IodCxlKTtyZXR1cm4gdm9pZCAwPT09bj9yOm59ZnVuY3Rpb24gT3IodCxlKXtyZXR1cm4gbnVsbCE9dCYmZSBpbiBPYmplY3QodCl9ZnVuY3Rpb24gU3IodCxlKXtyZXR1cm4gbnVsbCE9dCYmZnVuY3Rpb24odCxlLHIpe2Zvcih2YXIgbj0tMSxvPShlPWdyKGUsdCkpLmxlbmd0aCx1PSExOysrbjxvOyl7dmFyIGk9anIoZVtuXSk7aWYoISh1PW51bGwhPXQmJnIodCxpKSkpYnJlYWs7dD10W2ldfXJldHVybiB1fHwrK24hPW8/dTohIShvPW51bGw9PXQ/MDp0Lmxlbmd0aCkmJkwobykmJiQoaSxvKSYmKFModCl8fE8odCkpfSh0LGUsT3IpfXZhciBBcj0xLHhyPTI7ZnVuY3Rpb24genIodCl7cmV0dXJuIGlyKHQpP1V0KGpyKHQpKTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHdyKGUsdCl9fSh0KX1mdW5jdGlvbiBFcih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD90Om51bGw9PXQ/dXQ6Im9iamVjdCI9PXR5cGVvZiB0P1ModCk/ZnVuY3Rpb24odCxlKXtyZXR1cm4gaXIodCkmJlplKGUpP3RyKGpyKHQpLGUpOmZ1bmN0aW9uKHIpe3ZhciBuPW1yKHIsdCk7cmV0dXJuIHZvaWQgMD09PW4mJm49PT1lP1NyKHIsdCk6UWUoZSxuLEFyfHhyKX19KHRbMF0sdFsxXSk6ZXIodCk6enIodCl9ZnVuY3Rpb24ga3IodCxlKXt2YXIgcj0tMSxuPWV0KHQpP0FycmF5KHQubGVuZ3RoKTpbXTtyZXR1cm4gb3QodCwoZnVuY3Rpb24odCxvLHUpe25bKytyXT1lKHQsbyx1KX0pKSxufWZ1bmN0aW9uIEZyKHQsZSl7cmV0dXJuKFModCk/cmU6a3IpKHQsRXIoZSkpfXZhciAkcj0vXHMvO3ZhciBQcj0vXlxzKy87ZnVuY3Rpb24gTHIodCl7cmV0dXJuIHQ/dC5zbGljZSgwLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDtlLS0mJiRyLnRlc3QodC5jaGFyQXQoZSkpOyk7cmV0dXJuIGV9KHQpKzEpLnJlcGxhY2UoUHIsIiIpOnR9ZnVuY3Rpb24gSXIodCxlLHIpe3ZhciBuPXQubGVuZ3RoO3JldHVybiByPXZvaWQgMD09PXI/bjpyLCFlJiZyPj1uP3Q6ZnVuY3Rpb24odCxlLHIpe3ZhciBuPS0xLG89dC5sZW5ndGg7ZTwwJiYoZT0tZT5vPzA6bytlKSwocj1yPm8/bzpyKTwwJiYocis9byksbz1lPnI/MDpyLWU+Pj4wLGU+Pj49MDtmb3IodmFyIHU9QXJyYXkobyk7KytuPG87KXVbbl09dFtuK2VdO3JldHVybiB1fSh0LGUscil9ZnVuY3Rpb24gTXIodCl7cmV0dXJuIHQhPXR9ZnVuY3Rpb24gVHIodCxlLHIpe3JldHVybiBlPT1lP2Z1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49ci0xLG89dC5sZW5ndGg7KytuPG87KWlmKHRbbl09PT1lKXJldHVybiBuO3JldHVybi0xfSh0LGUscik6ZnVuY3Rpb24odCxlLHIsbil7Zm9yKHZhciBvPXQubGVuZ3RoLHU9cisobj8xOi0xKTtuP3UtLTorK3U8bzspaWYoZSh0W3VdLHUsdCkpcmV0dXJuIHU7cmV0dXJuLTF9KHQsTXIscil9dmFyIFJyPSJcXHVkODAwLVxcdWRmZmYiLFVyPSJbIitScisiXSIsTnI9IltcXHUwMzAwLVxcdTAzNmZcXHVmZTIwLVxcdWZlMmZcXHUyMGQwLVxcdTIwZmZdIixEcj0iXFx1ZDgzY1tcXHVkZmZiLVxcdWRmZmZdIixCcj0iW14iK1JyKyJdIixDcj0iKD86XFx1ZDgzY1tcXHVkZGU2LVxcdWRkZmZdKXsyfSIsV3I9IltcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0iLHFyPSIoPzoiK05yKyJ8IitEcisiKSIrIj8iLFZyPSJbXFx1ZmUwZVxcdWZlMGZdPyIsR3I9VnIrcXIrKCIoPzpcXHUyMDBkKD86IitbQnIsQ3IsV3JdLmpvaW4oInwiKSsiKSIrVnIrcXIrIikqIiksSHI9Iig/OiIrW0JyK05yKyI/IixOcixDcixXcixVcl0uam9pbigifCIpKyIpIixKcj1SZWdFeHAoRHIrIig/PSIrRHIrIil8IitIcitHciwiZyIpO2Z1bmN0aW9uIEtyKHQpe3JldHVybiBCdCh0KT9mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXRjaChKcil8fFtdfSh0KTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdCgiIil9KHQpfWZ1bmN0aW9uIFFyKHQsZSxyKXtpZigodD1icih0KSkmJihyfHx2b2lkIDA9PT1lKSlyZXR1cm4gTHIodCk7aWYoIXR8fCEoZT1kcihlKSkpcmV0dXJuIHQ7dmFyIG49S3IodCksbz1LcihlKSx1PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPS0xLG49dC5sZW5ndGg7KytyPG4mJlRyKGUsdFtyXSwwKT4tMTspO3JldHVybiByfShuLG8pLGk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dC5sZW5ndGg7ci0tJiZUcihlLHRbcl0sMCk+LTE7KTtyZXR1cm4gcn0obixvKSsxO3JldHVybiBJcihuLHUsaSkuam9pbigiIil9ZnVuY3Rpb24gWHIodCl7cmV0dXJuISghZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgU3RyaW5nXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwiIj09PXQpfWZ1bmN0aW9uIFlyKHQsZSl7aWYoIVhyKHQpKXJldHVybltdO2lmKCFYcihlKSlyZXR1cm5bXTtsZXQgcj1mdW5jdGlvbih0LGUpe3JldHVybiBYcih0KSYmWHIoZSk/dC5zcGxpdChlKTpbXX0odCxlKTtyPUZyKHIsUXIpO2xldCBuPVtdO3JldHVybiBpdChyLChmdW5jdGlvbih0KXtYcih0KSYmbi5wdXNoKHQpfSkpLG59ZnVuY3Rpb24gWnIodCl7bGV0IGU9ITE7aWYoWHIodCkpZT0haXNOYU4oTnVtYmVyKHQpKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7aWYoZnVuY3Rpb24odCl7cmV0dXJuIHQhPXR9KHQpKXJldHVybiExO2U9ITB9cmV0dXJuIGV9dmFyIHRuPU5hTixlbj0vXlstK10weFswLTlhLWZdKyQvaSxybj0vXjBiWzAxXSskL2ksbm49L14wb1swLTddKyQvaSxvbj1wYXJzZUludDtmdW5jdGlvbiB1bih0KXtpZigibnVtYmVyIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYobnIodCkpcmV0dXJuIHRuO2lmKEsodCkpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PUsoZSk/ZSsiIjplfWlmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PUxyKHQpO3ZhciByPXJuLnRlc3QodCk7cmV0dXJuIHJ8fG5uLnRlc3QodCk/b24odC5zbGljZSgyKSxyPzI6OCk6ZW4udGVzdCh0KT90bjordH12YXIgYW49MS8wLGNuPTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MjtmdW5jdGlvbiBmbih0KXtyZXR1cm4gdD8odD11bih0KSk9PT1hbnx8dD09PS1hbj8odDwwPy0xOjEpKmNuOnQ9PXQ/dDowOjA9PT10P3Q6MH1mdW5jdGlvbiBzbih0KXt2YXIgZT1mbih0KSxyPWUlMTtyZXR1cm4gZT09ZT9yP2UtcjplOjB9ZnVuY3Rpb24gbG4odCl7aWYoIVpyKHQpKXJldHVybiAwO3JldHVybiBmbih0KX1mdW5jdGlvbiBwbih0KXtyZXR1cm4hIVpyKHQpJiYodD1sbih0KSwibnVtYmVyIj09dHlwZW9mKGU9dCkmJmU9PXNuKGUpKTt2YXIgZX12YXIgaG49YS5pc0Zpbml0ZSx2bj1NYXRoLm1pbjt2YXIgeW49ZnVuY3Rpb24odCl7dmFyIGU9TWF0aFt0XTtyZXR1cm4gZnVuY3Rpb24odCxyKXtpZih0PXVuKHQpLChyPW51bGw9PXI/MDp2bihzbihyKSwyOTIpKSYmaG4odCkpe3ZhciBuPShicih0KSsiZSIpLnNwbGl0KCJlIik7cmV0dXJuKygobj0oYnIoZShuWzBdKyJlIisoK25bMV0rcikpKSsiZSIpLnNwbGl0KCJlIikpWzBdKyJlIisoK25bMV0tcikpfXJldHVybiBlKHQpfX0oInJvdW5kIiksZG49eW47ZnVuY3Rpb24gYm4odCl7aWYoIVpyKHQpKXJldHVybiAwO3Q9bG4odCk7bGV0IGU9ZG4odCk7cmV0dXJuIjAiPT09U3RyaW5nKGUpPzA6ZX1mdW5jdGlvbiBnbih0LGU9e30pe2xldCByPW1yKGUsImZzIik7cmV0dXJuISFyLmV4aXN0c1N5bmModCkmJighci5sc3RhdFN5bmModCkuaXNEaXJlY3RvcnkoKSYmIXIubHN0YXRTeW5jKHQpLmlzU3ltYm9saWNMaW5rKCkpfWZ1bmN0aW9uIF9uKHQpe3JldHVybiBnbih0LHtmczplfSl9ZnVuY3Rpb24gam4odCxlKXt2YXIgcj1bXTtyZXR1cm4gb3QodCwoZnVuY3Rpb24odCxuLG8pe2UodCxuLG8pJiZyLnB1c2godCl9KSkscn1mdW5jdGlvbiB3bih0LGU9e30pe2xldCByPW1yKGUsImZzIik7aWYoIXIuZXhpc3RzU3luYyh0KSlyZXR1cm4hMTtsZXQgbj1yLmxzdGF0U3luYyh0KTtyZXR1cm4hbi5pc0ZpbGUoKSYmIW4uaXNTeW1ib2xpY0xpbmsoKX1mdW5jdGlvbiBtbih0LGU9MSxyPXt9KXtsZXQgbj0xLG89bXIociwicGF0aCIpLHU9bXIociwiZnMiKTtpZighd24odCx7ZnM6dX0pKXRocm93IG5ldyBFcnJvcihgZmRbJHt0fV0gaXMgbm90IGEgZm9sZGVyYCk7dmFyIGk7cmV0dXJuIG51bGwhPT1lJiYocG4oaT1lKSYmYm4oaSk+MCkmJihlPWJuKGUpKTwxJiYoZT0xKSxmdW5jdGlvbiB0KHIpe2xldCBpPVtdO3JldHVybiB3bihyLHtmczp1fSk/KGl0KHUucmVhZGRpclN5bmMociksKGZ1bmN0aW9uKGEpe2xldCBjPW8ucmVzb2x2ZShyLGEpLGY9bnVsbDt0cnl7Zj11LnN0YXRTeW5jKGMpfWNhdGNoKHQpe31mJiZmLmlzRGlyZWN0b3J5KCk/KGkucHVzaCh7aXNGb2xkZXI6ITAsbGV2ZWw6bixwYXRoOmMsbmFtZTpvLmJhc2VuYW1lKGMpfSksbis9MSwobjw9ZXx8bnVsbD09PWUpJiYoaT1pLmNvbmNhdCh0KGMpKSksbi09MSk6aS5wdXNoKHtpc0ZvbGRlcjohMSxsZXZlbDpuLHBhdGg6YyxuYW1lOm8uYmFzZW5hbWUoYyl9KX0pKSxpKTppfSh0KX1mdW5jdGlvbiBPbih0LGU9MSxyPXt9KXtsZXQgbj1tcihyLCJwYXRoIiksbz1tcihyLCJmcyIpO2lmKCF3bih0LHtmczpvfSkpdGhyb3cgbmV3IEVycm9yKGBmZFske3R9XSBpcyBub3QgYSBmb2xkZXJgKTtsZXQgdT1bXTt2YXIgaSxhO3JldHVybiB1PW1uKHQsZSx7cGF0aDpuLGZzOm99KSxhPXtpc0ZvbGRlcjohMX0sdT0oUyhpPXUpP1JlOmpuKShpLEVyKGEpKSx1PUZyKHUsKHQ9PihkZWxldGUgdC5pc0ZvbGRlcix0KSkpLHV9Y29uc3QgU249bmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNDgsOCw5NiwzLDEyNywxMjcsMTI3LDEsMTI3LDk2LDMsMTI3LDEyNywxMjcsMCw5NiwyLDEyNywxMjcsMCw5NiwxLDEyNywxLDEyNyw5NiwzLDEyNywxMjcsMTI2LDEsMTI2LDk2LDMsMTI2LDEyNywxMjcsMSwxMjYsOTYsMiwxMjcsMTI2LDAsOTYsMSwxMjcsMSwxMjYsMywxMSwxMCwwLDAsMiwxLDMsNCw1LDYsMSw3LDUsMywxLDAsMSw3LDg1LDksMywxMDksMTAxLDEwOSwyLDAsNSwxMjAsMTIwLDEwNCw1MSw1MCwwLDAsNiwxMDUsMTEwLDEwNSwxMTYsNTEsNTAsMCwyLDgsMTE3LDExMiwxMDAsOTcsMTE2LDEwMSw1MSw1MCwwLDMsOCwxMDAsMTA1LDEwMywxMDEsMTE1LDExNiw1MSw1MCwwLDQsNSwxMjAsMTIwLDEwNCw1NCw1MiwwLDUsNiwxMDUsMTEwLDEwNSwxMTYsNTQsNTIsMCw3LDgsMTE3LDExMiwxMDAsOTcsMTE2LDEwMSw1NCw1MiwwLDgsOCwxMDAsMTA1LDEwMywxMDEsMTE1LDExNiw1NCw1MiwwLDksMTAsMjUxLDIyLDEwLDI0MiwxLDEsNCwxMjcsMzIsMCwzMiwxLDEwNiwzMywzLDMyLDEsNjUsMTYsNzksNCwxMjcsMzIsMyw2NSwxNiwxMDcsMzMsNiwzMiwyLDY1LDE2OCwxMzYsMTQxLDE2MSwyLDEwNiwzMywzLDMyLDIsNjUsMTM3LDIzNSwyMDgsMjA4LDcsMTA3LDMzLDQsMzIsMiw2NSwyMDcsMTQwLDE2MiwxNDIsNiwxMDYsMzMsNSwzLDY0LDMyLDMsMzIsMCw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMywzLDMyLDQsMzIsMCw2NSw0LDEwNiwzNCwwLDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDQsMzIsMiwzMiwwLDY1LDQsMTA2LDM0LDAsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsMzMsMiwzMiw1LDMyLDAsNjUsNCwxMDYsMzQsMCw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMyw1LDMyLDYsMzIsMCw2NSw0LDEwNiwzNCwwLDc5LDEzLDAsMTEsMzIsMiw2NSwxMiwxMTksMzIsNSw2NSwxOCwxMTksMTA2LDMyLDQsNjUsNywxMTksMTA2LDMyLDMsNjUsMSwxMTksMTA2LDUsMzIsMiw2NSwxNzcsMjA3LDIxNywxNzgsMSwxMDYsMTEsMzIsMSwxMDYsMzIsMCwzMiwxLDY1LDE1LDExMywxNiwxLDExLDE0NiwxLDAsMzIsMSwzMiwyLDEwNiwzMywyLDMsNjQsMzIsMSw2NSw0LDEwNiwzMiwyLDc1LDY5LDQsNjQsMzIsMCwzMiwxLDQwLDIsMCw2NSwxODksMjIwLDIwMiwxNDksMTI0LDEwOCwxMDYsNjUsMTcsMTE5LDY1LDE3NSwyMTQsMjExLDE5MCwyLDEwOCwzMywwLDMyLDEsNjUsNCwxMDYsMzMsMSwxMiwxLDExLDExLDMsNjQsMzIsMSwzMiwyLDc5LDY5LDQsNjQsMzIsMCwzMiwxLDQ1LDAsMCw2NSwxNzcsMjA3LDIxNywxNzgsMSwxMDgsMTA2LDY1LDExLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMywwLDMyLDEsNjUsMSwxMDYsMzMsMSwxMiwxLDExLDExLDMyLDAsMzIsMCw2NSwxNSwxMTgsMTE1LDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDM0LDAsNjUsMTMsMTE4LDMyLDAsMTE1LDY1LDE4OSwyMjAsMjAyLDE0OSwxMjQsMTA4LDM0LDAsNjUsMTYsMTE4LDMyLDAsMTE1LDExLDYzLDAsMzIsMCw2NSw4LDEwNiwzMiwxLDY1LDE2OCwxMzYsMTQxLDE2MSwyLDEwNiw1NCwyLDAsMzIsMCw2NSwxMiwxMDYsMzIsMSw2NSwxMzcsMjM1LDIwOCwyMDgsNywxMDcsNTQsMiwwLDMyLDAsNjUsMTYsMTA2LDMyLDEsNTQsMiwwLDMyLDAsNjUsMjAsMTA2LDMyLDEsNjUsMjA3LDE0MCwxNjIsMTQyLDYsMTA2LDU0LDIsMCwxMSwxOTUsNCwxLDYsMTI3LDMyLDEsMzIsMiwxMDYsMzMsNiwzMiwwLDY1LDI0LDEwNiwzMyw0LDMyLDAsNjUsNDAsMTA2LDQwLDIsMCwzMywzLDMyLDAsMzIsMCw0MCwyLDAsMzIsMiwxMDYsNTQsMiwwLDMyLDAsNjUsNCwxMDYsMzQsNSwzMiw1LDQwLDIsMCwzMiwyLDY1LDE2LDc5LDMyLDAsNDAsMiwwLDY1LDE2LDc5LDExNCwxMTQsNTQsMiwwLDMyLDIsMzIsMywxMDYsNjUsMTYsNzMsNCw2NCwzMiwzLDMyLDQsMTA2LDMyLDEsMzIsMiwyNTIsMTAsMCwwLDMyLDAsNjUsNDAsMTA2LDMyLDIsMzIsMywxMDYsNTQsMiwwLDE1LDExLDMyLDMsNCw2NCwzMiwzLDMyLDQsMTA2LDMyLDEsNjUsMTYsMzIsMywxMDcsMzQsMiwyNTIsMTAsMCwwLDMyLDAsNjUsOCwxMDYsMzQsMywzMiwzLDQwLDIsMCwzMiw0LDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDU0LDIsMCwzMiwwLDY1LDEyLDEwNiwzNCwzLDMyLDMsNDAsMiwwLDMyLDQsNjUsNCwxMDYsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsNTQsMiwwLDMyLDAsNjUsMTYsMTA2LDM0LDMsMzIsMyw0MCwyLDAsMzIsNCw2NSw4LDEwNiw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCw1NCwyLDAsMzIsMCw2NSwyMCwxMDYsMzQsMywzMiwzLDQwLDIsMCwzMiw0LDY1LDEyLDEwNiw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCw1NCwyLDAsMzIsMCw2NSw0MCwxMDYsNjUsMCw1NCwyLDAsMzIsMSwzMiwyLDEwNiwzMywxLDExLDMyLDEsMzIsNiw2NSwxNiwxMDcsNzcsNCw2NCwzMiw2LDY1LDE2LDEwNywzMyw4LDMyLDAsNjUsOCwxMDYsNDAsMiwwLDMzLDIsMzIsMCw2NSwxMiwxMDYsNDAsMiwwLDMzLDMsMzIsMCw2NSwxNiwxMDYsNDAsMiwwLDMzLDUsMzIsMCw2NSwyMCwxMDYsNDAsMiwwLDMzLDcsMyw2NCwzMiwyLDMyLDEsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsMzMsMiwzMiwzLDMyLDEsNjUsNCwxMDYsMzQsMSw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMywzLDMyLDUsMzIsMSw2NSw0LDEwNiwzNCwxLDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDUsMzIsNywzMiwxLDY1LDQsMTA2LDM0LDEsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsMzMsNywzMiw4LDMyLDEsNjUsNCwxMDYsMzQsMSw3OSwxMywwLDExLDMyLDAsNjUsOCwxMDYsMzIsMiw1NCwyLDAsMzIsMCw2NSwxMiwxMDYsMzIsMyw1NCwyLDAsMzIsMCw2NSwxNiwxMDYsMzIsNSw1NCwyLDAsMzIsMCw2NSwyMCwxMDYsMzIsNyw1NCwyLDAsMTEsMzIsMSwzMiw2LDczLDQsNjQsMzIsNCwzMiwxLDMyLDYsMzIsMSwxMDcsMzQsMSwyNTIsMTAsMCwwLDMyLDAsNjUsNDAsMTA2LDMyLDEsNTQsMiwwLDExLDExLDk3LDEsMSwxMjcsMzIsMCw2NSwxNiwxMDYsNDAsMiwwLDMzLDEsMzIsMCw2NSw0LDEwNiw0MCwyLDAsNCwxMjcsMzIsMSw2NSwxMiwxMTksMzIsMCw2NSwyMCwxMDYsNDAsMiwwLDY1LDE4LDExOSwxMDYsMzIsMCw2NSwxMiwxMDYsNDAsMiwwLDY1LDcsMTE5LDEwNiwzMiwwLDY1LDgsMTA2LDQwLDIsMCw2NSwxLDExOSwxMDYsNSwzMiwxLDY1LDE3NywyMDcsMjE3LDE3OCwxLDEwNiwxMSwzMiwwLDQwLDIsMCwxMDYsMzIsMCw2NSwyNCwxMDYsMzIsMCw2NSw0MCwxMDYsNDAsMiwwLDE2LDEsMTEsMjU1LDMsMiwzLDEyNiwxLDEyNywzMiwwLDMyLDEsMTA2LDMzLDYsMzIsMSw2NSwzMiw3OSw0LDEyNiwzMiw2LDY1LDMyLDEwNywzMyw2LDMyLDIsNjYsMjE0LDIzNSwxMzAsMjM4LDIzNCwyNTMsMTM3LDI0NSwyMjQsMCwxMjQsMzMsMywzMiwyLDY2LDE3NywxNjksMTcyLDE5MywxNzMsMTg0LDIxMiwxNjYsNjEsMTI1LDMzLDQsMzIsMiw2NiwyNDksMjM0LDIwOCwyMDgsMjMxLDIwMSwxNjEsMjI4LDIyNSwwLDEyNCwzMyw1LDMsNjQsMzIsMywzMiwwLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsMywzMiw0LDMyLDAsNjUsOCwxMDYsMzQsMCw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDQsMzIsMiwzMiwwLDY1LDgsMTA2LDM0LDAsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMywyLDMyLDUsMzIsMCw2NSw4LDEwNiwzNCwwLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsNSwzMiw2LDMyLDAsNjUsOCwxMDYsMzQsMCw3OSwxMywwLDExLDMyLDIsNjYsMTIsMTM3LDMyLDUsNjYsMTgsMTM3LDEyNCwzMiw0LDY2LDcsMTM3LDEyNCwzMiwzLDY2LDEsMTM3LDEyNCwzMiwzLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDEzMyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDY2LDE1NywxNjMsMTgxLDIzNCwxMzEsMTc3LDE0MSwxMzgsMjUwLDAsMTI1LDMyLDQsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsMzIsMiw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSwzMiw1LDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDEzMyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDY2LDE1NywxNjMsMTgxLDIzNCwxMzEsMTc3LDE0MSwxMzgsMjUwLDAsMTI1LDUsMzIsMiw2NiwxOTcsMjA3LDIxNywxNzgsMjQxLDIyOSwxODYsMjM0LDM5LDEyNCwxMSwzMiwxLDE3MywxMjQsMzIsMCwzMiwxLDY1LDMxLDExMywxNiw2LDExLDEzNCwyLDAsMzIsMSwzMiwyLDEwNiwzMywyLDMsNjQsMzIsMiwzMiwxLDY1LDgsMTA2LDc5LDQsNjQsMzIsMSw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzIsMCwxMzMsNjYsMjcsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsMzMsMCwzMiwxLDY1LDgsMTA2LDMzLDEsMTIsMSwxMSwxMSwzMiwxLDY1LDQsMTA2LDMyLDIsNzcsNCw2NCwzMiwwLDMyLDEsNTMsMiwwLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDIzLDEzNyw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwyNDksMjQzLDIyMSwyNDEsMTUzLDI0NiwxNTMsMTcxLDIyLDEyNCwzMywwLDMyLDEsNjUsNCwxMDYsMzMsMSwxMSwzLDY0LDMyLDEsMzIsMiw3Myw0LDY0LDMyLDAsMzIsMSw0OSwwLDAsNjYsMTk3LDIwNywyMTcsMTc4LDI0MSwyMjksMTg2LDIzNCwzOSwxMjYsMTMzLDY2LDExLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDAsMzIsMSw2NSwxLDEwNiwzMywxLDEyLDEsMTEsMTEsMzIsMCwzMiwwLDY2LDMzLDEzNiwxMzMsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMzQsMCwzMiwwLDY2LDI5LDEzNiwxMzMsNjYsMjQ5LDI0MywyMjEsMjQxLDE1MywyNDYsMTUzLDE3MSwyMiwxMjYsMzQsMCwzMiwwLDY2LDMyLDEzNiwxMzMsMTEsNzcsMCwzMiwwLDY1LDgsMTA2LDMyLDEsNjYsMjE0LDIzNSwxMzAsMjM4LDIzNCwyNTMsMTM3LDI0NSwyMjQsMCwxMjQsNTUsMywwLDMyLDAsNjUsMTYsMTA2LDMyLDEsNjYsMTc3LDE2OSwxNzIsMTkzLDE3MywxODQsMjEyLDE2Niw2MSwxMjUsNTUsMywwLDMyLDAsNjUsMjQsMTA2LDMyLDEsNTUsMywwLDMyLDAsNjUsMzIsMTA2LDMyLDEsNjYsMjQ5LDIzNCwyMDgsMjA4LDIzMSwyMDEsMTYxLDIyOCwyMjUsMCwxMjQsNTUsMywwLDExLDI0NCw0LDIsMywxMjcsNCwxMjYsMzIsMSwzMiwyLDEwNiwzMyw1LDMyLDAsNjUsNDAsMTA2LDMzLDQsMzIsMCw2NSwyMDAsMCwxMDYsNDAsMiwwLDMzLDMsMzIsMCwzMiwwLDQxLDMsMCwzMiwyLDE3MywxMjQsNTUsMywwLDMyLDIsMzIsMywxMDYsNjUsMzIsNzMsNCw2NCwzMiwzLDMyLDQsMTA2LDMyLDEsMzIsMiwyNTIsMTAsMCwwLDMyLDAsNjUsMjAwLDAsMTA2LDMyLDIsMzIsMywxMDYsNTQsMiwwLDE1LDExLDMyLDMsNCw2NCwzMiwzLDMyLDQsMTA2LDMyLDEsNjUsMzIsMzIsMywxMDcsMzQsMiwyNTIsMTAsMCwwLDMyLDAsNjUsOCwxMDYsMzQsMywzMiwzLDQxLDMsMCwzMiw0LDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNTUsMywwLDMyLDAsNjUsMTYsMTA2LDM0LDMsMzIsMyw0MSwzLDAsMzIsNCw2NSw4LDEwNiw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDU1LDMsMCwzMiwwLDY1LDI0LDEwNiwzNCwzLDMyLDMsNDEsMywwLDMyLDQsNjUsMTYsMTA2LDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNTUsMywwLDMyLDAsNjUsMzIsMTA2LDM0LDMsMzIsMyw0MSwzLDAsMzIsNCw2NSwyNCwxMDYsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw1NSwzLDAsMzIsMCw2NSwyMDAsMCwxMDYsNjUsMCw1NCwyLDAsMzIsMSwzMiwyLDEwNiwzMywxLDExLDMyLDEsNjUsMzIsMTA2LDMyLDUsNzcsNCw2NCwzMiw1LDY1LDMyLDEwNywzMywyLDMyLDAsNjUsOCwxMDYsNDEsMywwLDMzLDYsMzIsMCw2NSwxNiwxMDYsNDEsMywwLDMzLDcsMzIsMCw2NSwyNCwxMDYsNDEsMywwLDMzLDgsMzIsMCw2NSwzMiwxMDYsNDEsMywwLDMzLDksMyw2NCwzMiw2LDMyLDEsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMyw2LDMyLDcsMzIsMSw2NSw4LDEwNiwzNCwxLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsNywzMiw4LDMyLDEsNjUsOCwxMDYsMzQsMSw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDgsMzIsOSwzMiwxLDY1LDgsMTA2LDM0LDEsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMyw5LDMyLDIsMzIsMSw2NSw4LDEwNiwzNCwxLDc5LDEzLDAsMTEsMzIsMCw2NSw4LDEwNiwzMiw2LDU1LDMsMCwzMiwwLDY1LDE2LDEwNiwzMiw3LDU1LDMsMCwzMiwwLDY1LDI0LDEwNiwzMiw4LDU1LDMsMCwzMiwwLDY1LDMyLDEwNiwzMiw5LDU1LDMsMCwxMSwzMiwxLDMyLDUsNzMsNCw2NCwzMiw0LDMyLDEsMzIsNSwzMiwxLDEwNywzNCwxLDI1MiwxMCwwLDAsMzIsMCw2NSwyMDAsMCwxMDYsMzIsMSw1NCwyLDAsMTEsMTEsMTg4LDIsMSw1LDEyNiwzMiwwLDY1LDI0LDEwNiw0MSwzLDAsMzMsMSwzMiwwLDQxLDMsMCwzNCwyLDY2LDMyLDkwLDQsMTI2LDMyLDAsNjUsOCwxMDYsNDEsMywwLDM0LDMsNjYsMSwxMzcsMzIsMCw2NSwxNiwxMDYsNDEsMywwLDM0LDQsNjYsNywxMzcsMTI0LDMyLDEsNjYsMTIsMTM3LDMyLDAsNjUsMzIsMTA2LDQxLDMsMCwzNCw1LDY2LDE4LDEzNywxMjQsMTI0LDMyLDMsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsMzIsNCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSwzMiwxLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDEzMyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDY2LDE1NywxNjMsMTgxLDIzNCwxMzEsMTc3LDE0MSwxMzgsMjUwLDAsMTI1LDMyLDUsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsNSwzMiwxLDY2LDE5NywyMDcsMjE3LDE3OCwyNDEsMjI5LDE4NiwyMzQsMzksMTI0LDExLDMyLDIsMTI0LDMyLDAsNjUsNDAsMTA2LDMyLDIsNjYsMzEsMTMxLDE2NywxNiw2LDExXSk7YXN5bmMgZnVuY3Rpb24gQW4odCxlPXt9KXtsZXQgcj1tcihlLCJmcyIpLG49bXIoZSwiY2h1bmtTaXplIik7aWYoWnIobil8fChuPTY3MTA4ODY0KSxuPWxuKG4pLCFnbih0LHtmczpyfSkpcmV0dXJuIFByb21pc2UucmVqZWN0KCJmcCBpcyBub3QgYSBmaWxlIik7bGV0IG89ZnVuY3Rpb24oKXtsZXQgdCxlLHI9bmV3IFByb21pc2UoKGZ1bmN0aW9uKCl7dD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV19KSk7cmV0dXJuIHIucmVzb2x2ZT10LHIucmVqZWN0PWUscn0oKTt0cnl7bGV0e2NyZWF0ZTY0OmV9PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnN0e2V4cG9ydHM6e21lbTplLHh4aDMyOnIseHhoNjQ6bixpbml0MzI6byx1cGRhdGUzMjp1LGRpZ2VzdDMyOmksaW5pdDY0OmEsdXBkYXRlNjQ6YyxkaWdlc3Q2NDpmfX09dDtsZXQgcz1uZXcgVWludDhBcnJheShlLmJ1ZmZlcik7ZnVuY3Rpb24gbCh0LHIpe2lmKGUuYnVmZmVyLmJ5dGVMZW5ndGg8dCtyKXtjb25zdCBuPU1hdGguY2VpbCgodCtyLWUuYnVmZmVyLmJ5dGVMZW5ndGgpLzY1NTM2KTtlLmdyb3cobikscz1uZXcgVWludDhBcnJheShlLmJ1ZmZlcil9fWZ1bmN0aW9uIHAodCxlLHIsbixvLHUpe2wodCk7Y29uc3QgaT1uZXcgVWludDhBcnJheSh0KTtyZXR1cm4gcy5zZXQoaSkscigwLGUpLGkuc2V0KHMuc3ViYXJyYXkoMCx0KSkse3VwZGF0ZShlKXtsZXQgcjtyZXR1cm4gcy5zZXQoaSksInN0cmluZyI9PXR5cGVvZiBlPyhsKDMqZS5sZW5ndGgsdCkscj1kLmVuY29kZUludG8oZSxzLnN1YmFycmF5KHQpKS53cml0dGVuKToobChlLmJ5dGVMZW5ndGgsdCkscy5zZXQoZSx0KSxyPWUuYnl0ZUxlbmd0aCksbigwLHQsciksaS5zZXQocy5zdWJhcnJheSgwLHQpKSx0aGlzfSxkaWdlc3Q6KCk9PihzLnNldChpKSx1KG8oMCkpKX19ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdD4+PjB9Y29uc3Qgdj0ybioqNjRuLTFuO2Z1bmN0aW9uIHkodCl7cmV0dXJuIHQmdn1jb25zdCBkPW5ldyBUZXh0RW5jb2RlcixiPTAsZz0wbjtmdW5jdGlvbiBfKHQsZT1iKXtyZXR1cm4gbCgzKnQubGVuZ3RoLDApLGgocigwLGQuZW5jb2RlSW50byh0LHMpLndyaXR0ZW4sZSkpfWZ1bmN0aW9uIGoodCxlPWcpe3JldHVybiBsKDMqdC5sZW5ndGgsMCkseShuKDAsZC5lbmNvZGVJbnRvKHQscykud3JpdHRlbixlKSl9cmV0dXJue2gzMjpfLGgzMlRvU3RyaW5nOih0LGU9Yik9Pl8odCxlKS50b1N0cmluZygxNikucGFkU3RhcnQoOCwiMCIpLGgzMlJhdzoodCxlPWIpPT4obCh0LmJ5dGVMZW5ndGgsMCkscy5zZXQodCksaChyKDAsdC5ieXRlTGVuZ3RoLGUpKSksY3JlYXRlMzI6KHQ9Yik9PnAoNDgsdCxvLHUsaSxoKSxoNjQ6aixoNjRUb1N0cmluZzoodCxlPWcpPT5qKHQsZSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDE2LCIwIiksaDY0UmF3Oih0LGU9Zyk9PihsKHQuYnl0ZUxlbmd0aCwwKSxzLnNldCh0KSx5KG4oMCx0LmJ5dGVMZW5ndGgsZSkpKSxjcmVhdGU2NDoodD1nKT0+cCg4OCx0LGEsYyxmLHkpfX0oKGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKFNuKSkuaW5zdGFuY2UpfSgpLHU9ZSgpLGk9ci5jcmVhdGVSZWFkU3RyZWFtKHQse2hpZ2hXYXRlck1hcms6bn0pO2kub24oImRhdGEiLCh0PT57dS51cGRhdGUodCl9KSksaS5vbigiZW5kIiwoKCk9PntsZXQgdD11LmRpZ2VzdCgpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgxNiwiMCIpO28ucmVzb2x2ZSh0KX0pKSxpLm9uKCJlcnJvciIsby5yZWplY3QpfWNhdGNoKHQpe28ucmVqZWN0KHQudG9TdHJpbmcoKSl9cmV0dXJuIG99bGV0IGNoZWNrVG90YWxIYXNoPWFzeW5jKHIsbixvLHUpPT57bGV0IGk9dC5yZXNvbHZlKHUsbyksYT0hMTtpZihhPV9uKGkpLCFacihyKSl7cmV0dXJue2Vycm9yOiJpbnZhbGlkIGZpbGVTaXplIGluIHBheWxvYWQifX1sZXQgYz0hMTtpZihhKXtsZXQgdD0tMTt0cnl7dD1lLnN0YXRTeW5jKGkpLnNpemV9Y2F0Y2godCl7Y29uc29sZS5sb2coImNoZWNrIHRvdGFsIGZpbGUgc2l6ZTogZnMuc3RhdFN5bmMocGF0aEZpbGUpIixpLHQpfWM9cj09PXR9bGV0IGY9ITE7YSYmYyYmYXdhaXQgZnVuY3Rpb24odCxyPXt9KXtyZXR1cm4gQW4odCx7ZnM6ZSwuLi5yfSl9KGkpLnRoZW4oKHQ9PntmPW89PT10fSkpLmNhdGNoKCh0PT57Y29uc29sZS5sb2coImZzSXNGaWxlKHBhdGhGaWxlKSIsaSxfbihpKSksY29uc29sZS5sb2codCksZj0hMX0pKTtsZXQgcz1bXTtpZighZil7aXQoZnVuY3Rpb24ocixuPTEpe3JldHVybiBPbihyLG4se3BhdGg6dCxmczplfSl9KHUpLCh0PT57bGV0IHI9dC5uYW1lLmluZGV4T2YoYCR7b31fYCk+PTAsdT0hMTt0cnl7dT1lLnN0YXRTeW5jKHQucGF0aCkuc2l6ZT09PW59Y2F0Y2goZSl7Y29uc29sZS5sb2coImNoZWNrIGVhY2ggZmlsZSBzaXplOiBmcy5zdGF0U3luYyhwYXRoRmlsZSkiLHQucGF0aCxlKX1pZihyJiZ1KXtsZXQgZT1Zcih0Lm5hbWUsYCR7b31fYCkscj0oYT1udWxsPT0oaT1lKT8wOmkubGVuZ3RoKT9pW2EtMV06dm9pZCAwO2lmKCFmdW5jdGlvbih0KXtyZXR1cm4hIXBuKHQpJiZibih0KT49MH0ocikpdGhyb3cgY29uc29sZS5sb2coInYubmFtZSIsdC5uYW1lKSxjb25zb2xlLmxvZygicyIsZSksbmV3IEVycm9yKGBjYW4gbm90IHBhcnNlIGluZGV4IGluIHYubmFtZVske3QubmFtZX1dYCk7cj1ibihyKSxzLnB1c2gocil9dmFyIGksYX0pKX1sZXQgbD1lZShzKT4wO3JldHVybntwYXRoOmksYkFsbEV4aXN0OmEsYkFsbFNpemU6YyxiQWxsSGFzaDpmLGJTbHM6bCxzbGtzOnN9fTsKCgpsZXQgaW5zdGFuY2UgPSBudWxsCmZ1bmN0aW9uIGluaXQoaW5wdXQpewoKICAgIC8vaW5pdAogICAgbGV0IHIKICAgIAogICAgICAgIHIgPSB7CiAgICAgICAgICAgIG1haW46IGNoZWNrVG90YWxIYXNoCiAgICAgICAgfQogICAgICAgIAoKICAgIC8vb24KICAgIAoKICAgIC8vc2F2ZQogICAgaW5zdGFuY2UgPSByCgp9CgpmdW5jdGlvbiBzZW5kTWVzc2FnZShkYXRhKSB7CiAgICAKICAgICAgICBwYXJlbnRQb3J0LnBvc3RNZXNzYWdlKGRhdGEpCiAgICAgICAgCn0KCmFzeW5jIGZ1bmN0aW9uIHJ1bihkYXRhKSB7CiAgICAvLyBjb25zb2xlLmxvZygnaW5uZXIgd29ya2VyIHJ1bicsZGF0YSkKCiAgICAvL21vZGUKICAgIGxldCBtb2RlID0gZGF0YS5tb2RlCgogICAgLy9jaGVjawogICAgaWYobW9kZSAhPT0gJ2luaXQnICYmIG1vZGUgIT09ICdjYWxsJyl7CiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgLy9pbml0CiAgICBpZihtb2RlID09PSAnaW5pdCcpewogICAgICAgIAogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vdHlwZQogICAgICAgICAgICBsZXQgdHlwZSA9IGRhdGEudHlwZQoKICAgICAgICAgICAgLy9pbnB1dAogICAgICAgICAgICBsZXQgaW5wdXQgPSBkYXRhLmlucHV0CiAgICAKICAgICAgICAgICAgLy9pbnN0YW5jZQogICAgICAgICAgICBpZih0eXBlID09PSAnZnVuY3Rpb24nKXsKICAgICAgICAgICAgICAgIGluaXQoLi4uaW5wdXQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih0eXBlID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGNoZWNrVG90YWxIYXNoCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgCiAgICAgICAgICAgIC8vc2VuZE1lc3NhZ2UKICAgICAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdlbWl0JywKICAgICAgICAgICAgICAgIGV2TmFtZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIG1zZzogZXJyLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbmRNZXNzYWdlKHJlcykKCiAgICAgICAgfQogICAgICAgICAgICAKICAgIH0KCiAgICAvL2NoZWNrCiAgICBpZihtb2RlID09PSAnY2FsbCcpewogICAgICAgIGxldCBzdGF0ZSA9ICcnCiAgICAgICAgbGV0IG1zZyA9IG51bGwKCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgLy9mdW4KICAgICAgICAgICAgbGV0IGZ1biA9IGluc3RhbmNlW2RhdGEuZnVuXQoKICAgICAgICAgICAgLy9pbnB1dAogICAgICAgICAgICBsZXQgaW5wdXQgPSBkYXRhLmlucHV0CgogICAgICAgICAgICAvL2V4ZWMKICAgICAgICAgICAgYXdhaXQgZnVuKC4uLmlucHV0KQogICAgICAgICAgICAgICAgLnRoZW4oKHN1YykgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgIG1zZz1zdWMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdlcnJvcicKICAgICAgICAgICAgICAgICAgICBtc2c9ZXJyCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICB9CiAgICAgICAgY2F0Y2goZXJyKXsKICAgICAgICAgICAgc3RhdGUgPSAnZXJyb3InCiAgICAgICAgICAgIG1zZyA9IGVycgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgbW9kZTogJ3JldHVybicsCiAgICAgICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgICAgICBmdW46IGRhdGEuZnVuLAogICAgICAgICAgICBzdGF0ZSwKICAgICAgICAgICAgbXNnLAogICAgICAgIH0KICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgfQoKfQoKZnVuY3Rpb24gcmVjdk1lc3NhZ2UoZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciByZWN2OicsIGRhdGEpCgogICAgLy9kYXRhUmVjdgogICAgbGV0IGRhdGFSZWN2ID0gZGF0YQoKICAgIC8vcnVuCiAgICBydW4oZGF0YVJlY3YpCgp9CgoKICAgICAgICBwYXJlbnRQb3J0Lm9uKCdtZXNzYWdlJywgcmVjdk1lc3NhZ2UpCiAgICAgICAgCgp0cnl7CiAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuaGFuZGxlZFJlamVjdGlvbicsIGVycikKICAgIH0pCiAgICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmNhdWdodEV4Y2VwdGlvbk1vbml0b3InLCBlcnIpCiAgICB9KQp9CmNhdGNoKGVycil7fQoK",Buffer.from(s,"base64").toString("utf8"));var s;function o(){let n=new i,s=function(t){try{return new e.Worker(t,{eval:!0})}catch(e){a(e)}}(t);if(!s)return a("invalid worker"),null;function o(){let e=function(){let e,t,i=new Promise((function(){e=arguments[0],t=arguments[1]}));return i.resolve=e,i.reject=t,i}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=i.length;for(let s=0;s<e;s++)t[s]=i[0|Math.random()*n];return t.join("")}(),i={mode:"call",id:t,fun:"main",input:[...arguments]};return s.postMessage(i),n.once(t,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function a(e){n.emit("error",e)}return s.on("message",(function(e){let t=e,i=t.mode;"emit"!==i&&"return"!==i||("emit"===i&&n.emit(t.evName,t.msg),"return"===i&&n.emit(t.id,t))})),s.on("error",a),s.on("exit",(e=>{1!==e&&a("exit code["+e+"] !== 1")})),function(){let e={mode:"init",type:"function",input:[...arguments]};s.postMessage(e)}([...arguments]),n.main=o,n.main=o,n.terminate=function(){s?(s.terminate(),s=void 0):a("worker has been terminated")},n}n=async function(){let e=[...arguments],t=o();return await t.main(...e).finally((()=>{t.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return n}(t)}({get exports(){return i},set exports(e){i=e}}),i)}(ds);var ms=Ct(ds.exports),hs={exports:{}};!function(e){var t,i;e.exports=(t=o,i={},function(e){e.exports=function(e){var t={};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new s(n,o||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],r]:e._events[c].push(r):(e._events[c]=r,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function r(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),r.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},r.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},r.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},r.prototype.emit=function(e,t,n,s,o,a){var r=i?i+e:e;if(!this._events[r])return!1;var c,l,u=this._events[r],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,o),!0;case 6:return u.fn.call(u.context,t,n,s,o,a),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,m=u.length;for(l=0;l<m;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),p){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},r.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},r.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},r.prototype.removeListener=function(e,t,n,s){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var r=this._events[o];if(r.fn)r.fn!==t||s&&!r.once||n&&r.context!==n||a(this,o);else{for(var c=0,l=[],u=r.length;c<u;c++)(r[c].fn!==t||s&&!r[c].once||n&&r[c].context!==n)&&l.push(r[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=i,r.EventEmitter=r,e.exports=r}({get exports(){return t},set exports(e){t=e}});var i=t;let n;!function(){if("nodejs"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let t=(s="CgogICAgICAgIC8vaW1wb3J0IHsgcGFyZW50UG9ydCB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJwogICAgICAgIGxldCB7IHBhcmVudFBvcnQgfSA9IHJlcXVpcmUoJ3dvcmtlcl90aHJlYWRzJykgLy/lm6BwYWNrYWdlLmpzb27kuI3ntaZ0eXBlPW1vZHVsZeaVheeEoeazleaUr+aPtGVzNiBpbXBvcnQsIOW+l+S9v+eUqHJlcXVpcmUKICAgICAgICAvL+iLpeimgeaWvG5vZGVqcyB3b3JrZXLlhafkvb/nlKjnhKHms5XovYnora/nmoTljp/nlJ/lpZfku7bkvovlpoJmcywg6YG/5YWN5L2/55So6aCC5bGkaW1wb3J05Yqg6LyJ5L2/55SoLCDlm6DnhKHms5XovYnora/mnIPnm7TmjqXkv53nlZkKICAgICAgICAvL+S4puWboGltcG9ydOS9jeaWvHdvcmtlcuWkluWxpOmZkOWumueCunJlcXVpcmXljYAocGFja2FnZS5qc29u5LiN57WmdHlwZT1tb2R1bGUpLCDmlYXlh7rnj77pjK/oqqTnhKHms5XovYnora8KICAgICAgICAKCiJ1c2Ugc3RyaWN0Ijt2YXIgdD1yZXF1aXJlKCJwYXRoIiksZT1yZXF1aXJlKCJmcyIpLHI9T2JqZWN0LnByb3RvdHlwZTt2YXIgbixvLGk9KG49T2JqZWN0LmtleXMsbz1PYmplY3QsZnVuY3Rpb24odCl7cmV0dXJuIG4obyh0KSl9KSx1PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gYSh0KXtpZihuPShlPXQpJiZlLmNvbnN0cnVjdG9yLGUhPT0oImZ1bmN0aW9uIj09dHlwZW9mIG4mJm4ucHJvdG90eXBlfHxyKSlyZXR1cm4gaSh0KTt2YXIgZSxuLG89W107Zm9yKHZhciBhIGluIE9iamVjdCh0KSl1LmNhbGwodCxhKSYmImNvbnN0cnVjdG9yIiE9YSYmby5wdXNoKGEpO3JldHVybiBvfXZhciBjPSJvYmplY3QiPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJmdsb2JhbC5PYmplY3Q9PT1PYmplY3QmJmdsb2JhbCxmPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYscz1jfHxmfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpLGw9cy5TeW1ib2wscD1PYmplY3QucHJvdG90eXBlLGg9cC5oYXNPd25Qcm9wZXJ0eSx5PXAudG9TdHJpbmcsdj1sP2wudG9TdHJpbmdUYWc6dm9pZCAwO3ZhciBiPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIGQ9IltvYmplY3QgTnVsbF0iLGc9IltvYmplY3QgVW5kZWZpbmVkXSIsXz1sP2wudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIGoodCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwPT09dD9nOmQ6XyYmXyBpbiBPYmplY3QodCk/ZnVuY3Rpb24odCl7dmFyIGU9aC5jYWxsKHQsdikscj10W3ZdO3RyeXt0W3ZdPXZvaWQgMDt2YXIgbj0hMH1jYXRjaCh0KXt9dmFyIG89eS5jYWxsKHQpO3JldHVybiBuJiYoZT90W3ZdPXI6ZGVsZXRlIHRbdl0pLG99KHQpOmZ1bmN0aW9uKHQpe3JldHVybiBiLmNhbGwodCl9KHQpfWZ1bmN0aW9uIHcodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJigib2JqZWN0Ij09ZXx8ImZ1bmN0aW9uIj09ZSl9dmFyIFM9IltvYmplY3QgQXN5bmNGdW5jdGlvbl0iLE89IltvYmplY3QgRnVuY3Rpb25dIixtPSJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIseD0iW29iamVjdCBQcm94eV0iO2Z1bmN0aW9uIHoodCl7aWYoIXcodCkpcmV0dXJuITE7dmFyIGU9aih0KTtyZXR1cm4gZT09T3x8ZT09bXx8ZT09U3x8ZT09eH12YXIgQSwkPXNbIl9fY29yZS1qc19zaGFyZWRfXyJdLEY9KEE9L1teLl0rJC8uZXhlYygkJiYkLmtleXMmJiQua2V5cy5JRV9QUk9UT3x8IiIpKT8iU3ltYm9sKHNyYylfMS4iK0E6IiI7dmFyIFA9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIEwodCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiBQLmNhbGwodCl9Y2F0Y2godCl7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaCh0KXt9fXJldHVybiIifXZhciBrPS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLEU9RnVuY3Rpb24ucHJvdG90eXBlLEk9T2JqZWN0LnByb3RvdHlwZSxOPUUudG9TdHJpbmcsVD1JLmhhc093blByb3BlcnR5LE09UmVnRXhwKCJeIitOLmNhbGwoVCkucmVwbGFjZSgvW1xcXiQuKis/KClbXF17fXxdL2csIlxcJCYiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCIkMS4qPyIpKyIkIik7ZnVuY3Rpb24gUih0KXtyZXR1cm4hKCF3KHQpfHxmdW5jdGlvbih0KXtyZXR1cm4hIUYmJkYgaW4gdH0odCkpJiYoeih0KT9NOmspLnRlc3QoTCh0KSl9ZnVuY3Rpb24gVSh0LGUpe3ZhciByPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbZV19KHQsZSk7cmV0dXJuIFIocik/cjp2b2lkIDB9dmFyIEI9VShzLCJEYXRhVmlldyIpLEM9VShzLCJNYXAiKSxEPVUocywiUHJvbWlzZSIpLFc9VShzLCJTZXQiKSxxPVUocywiV2Vha01hcCIpLFY9IltvYmplY3QgTWFwXSIsRz0iW29iamVjdCBQcm9taXNlXSIsSD0iW29iamVjdCBTZXRdIixKPSJbb2JqZWN0IFdlYWtNYXBdIixLPSJbb2JqZWN0IERhdGFWaWV3XSIsUT1MKEIpLFg9TChDKSxZPUwoRCksWj1MKFcpLHR0PUwocSksZXQ9ajsoQiYmZXQobmV3IEIobmV3IEFycmF5QnVmZmVyKDEpKSkhPUt8fEMmJmV0KG5ldyBDKSE9Vnx8RCYmZXQoRC5yZXNvbHZlKCkpIT1HfHxXJiZldChuZXcgVykhPUh8fHEmJmV0KG5ldyBxKSE9SikmJihldD1mdW5jdGlvbih0KXt2YXIgZT1qKHQpLHI9IltvYmplY3QgT2JqZWN0XSI9PWU/dC5jb25zdHJ1Y3Rvcjp2b2lkIDAsbj1yP0wocik6IiI7aWYobilzd2l0Y2gobil7Y2FzZSBROnJldHVybiBLO2Nhc2UgWDpyZXR1cm4gVjtjYXNlIFk6cmV0dXJuIEc7Y2FzZSBaOnJldHVybiBIO2Nhc2UgdHQ6cmV0dXJuIEp9cmV0dXJuIGV9KTt2YXIgcnQ9ZXQsbnQ9OTAwNzE5OTI1NDc0MDk5MTtmdW5jdGlvbiBvdCh0KXtyZXR1cm4gbnVsbCE9dCYmZnVuY3Rpb24odCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJnQ8PW50fSh0Lmxlbmd0aCkmJiF6KHQpfXZhciBpdD1BcnJheS5pc0FycmF5O2Z1bmN0aW9uIHV0KHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9dmFyIGF0PSJbb2JqZWN0IFN0cmluZ10iO3ZhciBjdCxmdD0oY3Q9Imxlbmd0aCIsZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbY3RdfSksc3Q9UmVnRXhwKCJbXFx1MjAwZFxcdWQ4MDAtXFx1ZGZmZlxcdTAzMDAtXFx1MDM2ZlxcdWZlMjAtXFx1ZmUyZlxcdTIwZDAtXFx1MjBmZlxcdWZlMGVcXHVmZTBmXSIpO3ZhciBsdD0iXFx1ZDgwMC1cXHVkZmZmIixwdD0iWyIrbHQrIl0iLGh0PSJbXFx1MDMwMC1cXHUwMzZmXFx1ZmUyMC1cXHVmZTJmXFx1MjBkMC1cXHUyMGZmXSIseXQ9IlxcdWQ4M2NbXFx1ZGZmYi1cXHVkZmZmXSIsdnQ9IlteIitsdCsiXSIsYnQ9Iig/OlxcdWQ4M2NbXFx1ZGRlNi1cXHVkZGZmXSl7Mn0iLGR0PSJbXFx1ZDgwMC1cXHVkYmZmXVtcXHVkYzAwLVxcdWRmZmZdIixndD0iKD86IitodCsifCIreXQrIikiKyI/IixfdD0iW1xcdWZlMGVcXHVmZTBmXT8iLGp0PV90K2d0KygiKD86XFx1MjAwZCg/OiIrW3Z0LGJ0LGR0XS5qb2luKCJ8IikrIikiK190K2d0KyIpKiIpLHd0PSIoPzoiK1t2dCtodCsiPyIsaHQsYnQsZHQscHRdLmpvaW4oInwiKSsiKSIsU3Q9UmVnRXhwKHl0KyIoPz0iK3l0KyIpfCIrd3QranQsImciKTtmdW5jdGlvbiBPdCh0KXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHN0LnRlc3QodCl9KHQpP2Z1bmN0aW9uKHQpe2Zvcih2YXIgZT1TdC5sYXN0SW5kZXg9MDtTdC50ZXN0KHQpOykrK2U7cmV0dXJuIGV9KHQpOmZ0KHQpfWZ1bmN0aW9uIG10KHQpe2lmKG51bGw9PXQpcmV0dXJuIDA7aWYob3QodCkpcmV0dXJuInN0cmluZyI9PXR5cGVvZihlPXQpfHwhaXQoZSkmJnV0KGUpJiZqKGUpPT1hdD9PdCh0KTp0Lmxlbmd0aDt2YXIgZSxyPXJ0KHQpO3JldHVybiJbb2JqZWN0IE1hcF0iPT1yfHwiW29iamVjdCBTZXRdIj09cj90LnNpemU6YSh0KS5sZW5ndGh9dmFyIHh0PSJbb2JqZWN0IFN5bWJvbF0iO2Z1bmN0aW9uIHp0KHQpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgdHx8dXQodCkmJmoodCk9PXh0fXZhciBBdD0vXC58XFsoPzpbXltcXV0qfChbIiddKSg/Oig/IVwxKVteXFxdfFxcLikqP1wxKVxdLywkdD0vXlx3KiQvO3ZhciBGdD1VKE9iamVjdCwiY3JlYXRlIik7dmFyIFB0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIEx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24ga3QodCl7dmFyIGU9LTEscj1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8cjspe3ZhciBuPXRbZV07dGhpcy5zZXQoblswXSxuWzFdKX19ZnVuY3Rpb24gRXQodCxlKXtmb3IodmFyIHIsbixvPXQubGVuZ3RoO28tLTspaWYoKHI9dFtvXVswXSk9PT0obj1lKXx8ciE9ciYmbiE9bilyZXR1cm4gbztyZXR1cm4tMX1rdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPUZ0P0Z0KG51bGwpOnt9LHRoaXMuc2l6ZT0wfSxrdC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1lPzE6MCxlfSxrdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoRnQpe3ZhciByPWVbdF07cmV0dXJuIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iPT09cj92b2lkIDA6cn1yZXR1cm4gUHQuY2FsbChlLHQpP2VbdF06dm9pZCAwfSxrdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX187cmV0dXJuIEZ0P3ZvaWQgMCE9PWVbdF06THQuY2FsbChlLHQpfSxrdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5fX2RhdGFfXztyZXR1cm4gdGhpcy5zaXplKz10aGlzLmhhcyh0KT8wOjEsclt0XT1GdCYmdm9pZCAwPT09ZT8iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyI6ZSx0aGlzfTt2YXIgSXQ9QXJyYXkucHJvdG90eXBlLnNwbGljZTtmdW5jdGlvbiBOdCh0KXt2YXIgZT0tMSxyPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxyOyl7dmFyIG49dFtlXTt0aGlzLnNldChuWzBdLG5bMV0pfX1mdW5jdGlvbiBUdCh0LGUpe3ZhciByLG4sbz10Ll9fZGF0YV9fO3JldHVybigic3RyaW5nIj09KG49dHlwZW9mKHI9ZSkpfHwibnVtYmVyIj09bnx8InN5bWJvbCI9PW58fCJib29sZWFuIj09bj8iX19wcm90b19fIiE9PXI6bnVsbD09PXIpP29bInN0cmluZyI9PXR5cGVvZiBlPyJzdHJpbmciOiJoYXNoIl06by5tYXB9ZnVuY3Rpb24gTXQodCl7dmFyIGU9LTEscj1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8cjspe3ZhciBuPXRbZV07dGhpcy5zZXQoblswXSxuWzFdKX19TnQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH0sTnQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLHI9RXQoZSx0KTtyZXR1cm4hKHI8MCkmJihyPT1lLmxlbmd0aC0xP2UucG9wKCk6SXQuY2FsbChlLHIsMSksLS10aGlzLnNpemUsITApfSxOdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19kYXRhX18scj1FdChlLHQpO3JldHVybiByPDA/dm9pZCAwOmVbcl1bMV19LE50LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIEV0KHRoaXMuX19kYXRhX18sdCk+LTF9LE50LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLl9fZGF0YV9fLG49RXQocix0KTtyZXR1cm4gbjwwPygrK3RoaXMuc2l6ZSxyLnB1c2goW3QsZV0pKTpyW25dWzFdPWUsdGhpc30sTXQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcga3QsbWFwOm5ldyhDfHxOdCksc3RyaW5nOm5ldyBrdH19LE10LnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9VHQodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX0sTXQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gVHQodGhpcyx0KS5nZXQodCl9LE10LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIFR0KHRoaXMsdCkuaGFzKHQpfSxNdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9VHQodGhpcyx0KSxuPXIuc2l6ZTtyZXR1cm4gci5zZXQodCxlKSx0aGlzLnNpemUrPXIuc2l6ZT09bj8wOjEsdGhpc307dmFyIFJ0PSJFeHBlY3RlZCBhIGZ1bmN0aW9uIjtmdW5jdGlvbiBVdCh0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0fHxudWxsIT1lJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFJ0KTt2YXIgcj1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxvPWU/ZS5hcHBseSh0aGlzLG4pOm5bMF0saT1yLmNhY2hlO2lmKGkuaGFzKG8pKXJldHVybiBpLmdldChvKTt2YXIgdT10LmFwcGx5KHRoaXMsbik7cmV0dXJuIHIuY2FjaGU9aS5zZXQobyx1KXx8aSx1fTtyZXR1cm4gci5jYWNoZT1uZXcoVXQuQ2FjaGV8fE10KSxyfVV0LkNhY2hlPU10O3ZhciBCdD0vW14uW1xdXSt8XFsoPzooLT9cZCsoPzpcLlxkKyk/KXwoWyInXSkoKD86KD8hXDIpW15cXF18XFwuKSo/KVwyKVxdfCg/PSg/OlwufFxbXF0pKD86XC58XFtcXXwkKSkvZyxDdD0vXFwoXFwpPy9nLER0PWZ1bmN0aW9uKHQpe3ZhciBlPVV0KHQsKGZ1bmN0aW9uKHQpe3JldHVybiA1MDA9PT1yLnNpemUmJnIuY2xlYXIoKSx0fSkpLHI9ZS5jYWNoZTtyZXR1cm4gZX0oKGZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiA0Nj09PXQuY2hhckNvZGVBdCgwKSYmZS5wdXNoKCIiKSx0LnJlcGxhY2UoQnQsKGZ1bmN0aW9uKHQscixuLG8pe2UucHVzaChuP28ucmVwbGFjZShDdCwiJDEiKTpyfHx0KX0pKSxlfSkpLFd0PUR0O3ZhciBxdD0xLzAsVnQ9bD9sLnByb3RvdHlwZTp2b2lkIDAsR3Q9VnQ/VnQudG9TdHJpbmc6dm9pZCAwO2Z1bmN0aW9uIEh0KHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gdDtpZihpdCh0KSlyZXR1cm4gZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9LTEsbj1udWxsPT10PzA6dC5sZW5ndGgsbz1BcnJheShuKTsrK3I8bjspb1tyXT1lKHRbcl0scix0KTtyZXR1cm4gb30odCxIdCkrIiI7aWYoenQodCkpcmV0dXJuIEd0P0d0LmNhbGwodCk6IiI7dmFyIGU9dCsiIjtyZXR1cm4iMCI9PWUmJjEvdD09LXF0PyItMCI6ZX1mdW5jdGlvbiBKdCh0LGUpe3JldHVybiBpdCh0KT90OmZ1bmN0aW9uKHQsZSl7aWYoaXQodCkpcmV0dXJuITE7dmFyIHI9dHlwZW9mIHQ7cmV0dXJuISgibnVtYmVyIiE9ciYmInN5bWJvbCIhPXImJiJib29sZWFuIiE9ciYmbnVsbCE9dCYmIXp0KHQpKXx8JHQudGVzdCh0KXx8IUF0LnRlc3QodCl8fG51bGwhPWUmJnQgaW4gT2JqZWN0KGUpfSh0LGUpP1t0XTpXdChmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD8iIjpIdCh0KX0odCkpfXZhciBLdD0xLzA7ZnVuY3Rpb24gUXQodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHx6dCh0KSlyZXR1cm4gdDt2YXIgZT10KyIiO3JldHVybiIwIj09ZSYmMS90PT0tS3Q/Ii0wIjplfWZ1bmN0aW9uIFh0KHQsZSxyKXt2YXIgbj1udWxsPT10P3ZvaWQgMDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wLG49KGU9SnQoZSx0KSkubGVuZ3RoO251bGwhPXQmJnI8bjspdD10W1F0KGVbcisrXSldO3JldHVybiByJiZyPT1uP3Q6dm9pZCAwfSh0LGUpO3JldHVybiB2b2lkIDA9PT1uP3I6bn1mdW5jdGlvbiBZdCh0KXtyZXR1cm4gZnVuY3Rpb24odCxlPXt9KXtsZXQgcj1YdChlLCJmcyIpO3JldHVybiEhci5leGlzdHNTeW5jKHQpJiYhci5sc3RhdFN5bmModCkuaXNEaXJlY3RvcnkoKSYmIXIubHN0YXRTeW5jKHQpLmlzU3ltYm9saWNMaW5rKCl9KHQse2ZzOmV9KX1jb25zdCBadD1uZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0OCw4LDk2LDMsMTI3LDEyNywxMjcsMSwxMjcsOTYsMywxMjcsMTI3LDEyNywwLDk2LDIsMTI3LDEyNywwLDk2LDEsMTI3LDEsMTI3LDk2LDMsMTI3LDEyNywxMjYsMSwxMjYsOTYsMywxMjYsMTI3LDEyNywxLDEyNiw5NiwyLDEyNywxMjYsMCw5NiwxLDEyNywxLDEyNiwzLDExLDEwLDAsMCwyLDEsMyw0LDUsNiwxLDcsNSwzLDEsMCwxLDcsODUsOSwzLDEwOSwxMDEsMTA5LDIsMCw1LDEyMCwxMjAsMTA0LDUxLDUwLDAsMCw2LDEwNSwxMTAsMTA1LDExNiw1MSw1MCwwLDIsOCwxMTcsMTEyLDEwMCw5NywxMTYsMTAxLDUxLDUwLDAsMyw4LDEwMCwxMDUsMTAzLDEwMSwxMTUsMTE2LDUxLDUwLDAsNCw1LDEyMCwxMjAsMTA0LDU0LDUyLDAsNSw2LDEwNSwxMTAsMTA1LDExNiw1NCw1MiwwLDcsOCwxMTcsMTEyLDEwMCw5NywxMTYsMTAxLDU0LDUyLDAsOCw4LDEwMCwxMDUsMTAzLDEwMSwxMTUsMTE2LDU0LDUyLDAsOSwxMCwyNTEsMjIsMTAsMjQyLDEsMSw0LDEyNywzMiwwLDMyLDEsMTA2LDMzLDMsMzIsMSw2NSwxNiw3OSw0LDEyNywzMiwzLDY1LDE2LDEwNywzMyw2LDMyLDIsNjUsMTY4LDEzNiwxNDEsMTYxLDIsMTA2LDMzLDMsMzIsMiw2NSwxMzcsMjM1LDIwOCwyMDgsNywxMDcsMzMsNCwzMiwyLDY1LDIwNywxNDAsMTYyLDE0Miw2LDEwNiwzMyw1LDMsNjQsMzIsMywzMiwwLDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDMsMzIsNCwzMiwwLDY1LDQsMTA2LDM0LDAsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsMzMsNCwzMiwyLDMyLDAsNjUsNCwxMDYsMzQsMCw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMywyLDMyLDUsMzIsMCw2NSw0LDEwNiwzNCwwLDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDUsMzIsNiwzMiwwLDY1LDQsMTA2LDM0LDAsNzksMTMsMCwxMSwzMiwyLDY1LDEyLDExOSwzMiw1LDY1LDE4LDExOSwxMDYsMzIsNCw2NSw3LDExOSwxMDYsMzIsMyw2NSwxLDExOSwxMDYsNSwzMiwyLDY1LDE3NywyMDcsMjE3LDE3OCwxLDEwNiwxMSwzMiwxLDEwNiwzMiwwLDMyLDEsNjUsMTUsMTEzLDE2LDEsMTEsMTQ2LDEsMCwzMiwxLDMyLDIsMTA2LDMzLDIsMyw2NCwzMiwxLDY1LDQsMTA2LDMyLDIsNzUsNjksNCw2NCwzMiwwLDMyLDEsNDAsMiwwLDY1LDE4OSwyMjAsMjAyLDE0OSwxMjQsMTA4LDEwNiw2NSwxNywxMTksNjUsMTc1LDIxNCwyMTEsMTkwLDIsMTA4LDMzLDAsMzIsMSw2NSw0LDEwNiwzMywxLDEyLDEsMTEsMTEsMyw2NCwzMiwxLDMyLDIsNzksNjksNCw2NCwzMiwwLDMyLDEsNDUsMCwwLDY1LDE3NywyMDcsMjE3LDE3OCwxLDEwOCwxMDYsNjUsMTEsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDAsMzIsMSw2NSwxLDEwNiwzMywxLDEyLDEsMTEsMTEsMzIsMCwzMiwwLDY1LDE1LDExOCwxMTUsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMzQsMCw2NSwxMywxMTgsMzIsMCwxMTUsNjUsMTg5LDIyMCwyMDIsMTQ5LDEyNCwxMDgsMzQsMCw2NSwxNiwxMTgsMzIsMCwxMTUsMTEsNjMsMCwzMiwwLDY1LDgsMTA2LDMyLDEsNjUsMTY4LDEzNiwxNDEsMTYxLDIsMTA2LDU0LDIsMCwzMiwwLDY1LDEyLDEwNiwzMiwxLDY1LDEzNywyMzUsMjA4LDIwOCw3LDEwNyw1NCwyLDAsMzIsMCw2NSwxNiwxMDYsMzIsMSw1NCwyLDAsMzIsMCw2NSwyMCwxMDYsMzIsMSw2NSwyMDcsMTQwLDE2MiwxNDIsNiwxMDYsNTQsMiwwLDExLDE5NSw0LDEsNiwxMjcsMzIsMSwzMiwyLDEwNiwzMyw2LDMyLDAsNjUsMjQsMTA2LDMzLDQsMzIsMCw2NSw0MCwxMDYsNDAsMiwwLDMzLDMsMzIsMCwzMiwwLDQwLDIsMCwzMiwyLDEwNiw1NCwyLDAsMzIsMCw2NSw0LDEwNiwzNCw1LDMyLDUsNDAsMiwwLDMyLDIsNjUsMTYsNzksMzIsMCw0MCwyLDAsNjUsMTYsNzksMTE0LDExNCw1NCwyLDAsMzIsMiwzMiwzLDEwNiw2NSwxNiw3Myw0LDY0LDMyLDMsMzIsNCwxMDYsMzIsMSwzMiwyLDI1MiwxMCwwLDAsMzIsMCw2NSw0MCwxMDYsMzIsMiwzMiwzLDEwNiw1NCwyLDAsMTUsMTEsMzIsMyw0LDY0LDMyLDMsMzIsNCwxMDYsMzIsMSw2NSwxNiwzMiwzLDEwNywzNCwyLDI1MiwxMCwwLDAsMzIsMCw2NSw4LDEwNiwzNCwzLDMyLDMsNDAsMiwwLDMyLDQsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsNTQsMiwwLDMyLDAsNjUsMTIsMTA2LDM0LDMsMzIsMyw0MCwyLDAsMzIsNCw2NSw0LDEwNiw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCw1NCwyLDAsMzIsMCw2NSwxNiwxMDYsMzQsMywzMiwzLDQwLDIsMCwzMiw0LDY1LDgsMTA2LDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDU0LDIsMCwzMiwwLDY1LDIwLDEwNiwzNCwzLDMyLDMsNDAsMiwwLDMyLDQsNjUsMTIsMTA2LDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDU0LDIsMCwzMiwwLDY1LDQwLDEwNiw2NSwwLDU0LDIsMCwzMiwxLDMyLDIsMTA2LDMzLDEsMTEsMzIsMSwzMiw2LDY1LDE2LDEwNyw3Nyw0LDY0LDMyLDYsNjUsMTYsMTA3LDMzLDgsMzIsMCw2NSw4LDEwNiw0MCwyLDAsMzMsMiwzMiwwLDY1LDEyLDEwNiw0MCwyLDAsMzMsMywzMiwwLDY1LDE2LDEwNiw0MCwyLDAsMzMsNSwzMiwwLDY1LDIwLDEwNiw0MCwyLDAsMzMsNywzLDY0LDMyLDIsMzIsMSw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMywyLDMyLDMsMzIsMSw2NSw0LDEwNiwzNCwxLDQwLDIsMCw2NSwyNDcsMTQ4LDE3NSwxNzUsMTIwLDEwOCwxMDYsNjUsMTMsMTE5LDY1LDE3NywyNDMsMjIxLDI0MSwxMjEsMTA4LDMzLDMsMzIsNSwzMiwxLDY1LDQsMTA2LDM0LDEsNDAsMiwwLDY1LDI0NywxNDgsMTc1LDE3NSwxMjAsMTA4LDEwNiw2NSwxMywxMTksNjUsMTc3LDI0MywyMjEsMjQxLDEyMSwxMDgsMzMsNSwzMiw3LDMyLDEsNjUsNCwxMDYsMzQsMSw0MCwyLDAsNjUsMjQ3LDE0OCwxNzUsMTc1LDEyMCwxMDgsMTA2LDY1LDEzLDExOSw2NSwxNzcsMjQzLDIyMSwyNDEsMTIxLDEwOCwzMyw3LDMyLDgsMzIsMSw2NSw0LDEwNiwzNCwxLDc5LDEzLDAsMTEsMzIsMCw2NSw4LDEwNiwzMiwyLDU0LDIsMCwzMiwwLDY1LDEyLDEwNiwzMiwzLDU0LDIsMCwzMiwwLDY1LDE2LDEwNiwzMiw1LDU0LDIsMCwzMiwwLDY1LDIwLDEwNiwzMiw3LDU0LDIsMCwxMSwzMiwxLDMyLDYsNzMsNCw2NCwzMiw0LDMyLDEsMzIsNiwzMiwxLDEwNywzNCwxLDI1MiwxMCwwLDAsMzIsMCw2NSw0MCwxMDYsMzIsMSw1NCwyLDAsMTEsMTEsOTcsMSwxLDEyNywzMiwwLDY1LDE2LDEwNiw0MCwyLDAsMzMsMSwzMiwwLDY1LDQsMTA2LDQwLDIsMCw0LDEyNywzMiwxLDY1LDEyLDExOSwzMiwwLDY1LDIwLDEwNiw0MCwyLDAsNjUsMTgsMTE5LDEwNiwzMiwwLDY1LDEyLDEwNiw0MCwyLDAsNjUsNywxMTksMTA2LDMyLDAsNjUsOCwxMDYsNDAsMiwwLDY1LDEsMTE5LDEwNiw1LDMyLDEsNjUsMTc3LDIwNywyMTcsMTc4LDEsMTA2LDExLDMyLDAsNDAsMiwwLDEwNiwzMiwwLDY1LDI0LDEwNiwzMiwwLDY1LDQwLDEwNiw0MCwyLDAsMTYsMSwxMSwyNTUsMywyLDMsMTI2LDEsMTI3LDMyLDAsMzIsMSwxMDYsMzMsNiwzMiwxLDY1LDMyLDc5LDQsMTI2LDMyLDYsNjUsMzIsMTA3LDMzLDYsMzIsMiw2NiwyMTQsMjM1LDEzMCwyMzgsMjM0LDI1MywxMzcsMjQ1LDIyNCwwLDEyNCwzMywzLDMyLDIsNjYsMTc3LDE2OSwxNzIsMTkzLDE3MywxODQsMjEyLDE2Niw2MSwxMjUsMzMsNCwzMiwyLDY2LDI0OSwyMzQsMjA4LDIwOCwyMzEsMjAxLDE2MSwyMjgsMjI1LDAsMTI0LDMzLDUsMyw2NCwzMiwzLDMyLDAsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMywzLDMyLDQsMzIsMCw2NSw4LDEwNiwzNCwwLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsNCwzMiwyLDMyLDAsNjUsOCwxMDYsMzQsMCw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDIsMzIsNSwzMiwwLDY1LDgsMTA2LDM0LDAsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMyw1LDMyLDYsMzIsMCw2NSw4LDEwNiwzNCwwLDc5LDEzLDAsMTEsMzIsMiw2NiwxMiwxMzcsMzIsNSw2NiwxOCwxMzcsMTI0LDMyLDQsNjYsNywxMzcsMTI0LDMyLDMsNjYsMSwxMzcsMTI0LDMyLDMsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsMzIsNCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSwzMiwyLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDEzMyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDY2LDE1NywxNjMsMTgxLDIzNCwxMzEsMTc3LDE0MSwxMzgsMjUwLDAsMTI1LDMyLDUsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsNSwzMiwyLDY2LDE5NywyMDcsMjE3LDE3OCwyNDEsMjI5LDE4NiwyMzQsMzksMTI0LDExLDMyLDEsMTczLDEyNCwzMiwwLDMyLDEsNjUsMzEsMTEzLDE2LDYsMTEsMTM0LDIsMCwzMiwxLDMyLDIsMTA2LDMzLDIsMyw2NCwzMiwyLDMyLDEsNjUsOCwxMDYsNzksNCw2NCwzMiwxLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMiwwLDEzMyw2NiwyNywxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSwzMywwLDMyLDEsNjUsOCwxMDYsMzMsMSwxMiwxLDExLDExLDMyLDEsNjUsNCwxMDYsMzIsMiw3Nyw0LDY0LDMyLDAsMzIsMSw1MywyLDAsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMjMsMTM3LDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDI0OSwyNDMsMjIxLDI0MSwxNTMsMjQ2LDE1MywxNzEsMjIsMTI0LDMzLDAsMzIsMSw2NSw0LDEwNiwzMywxLDExLDMsNjQsMzIsMSwzMiwyLDczLDQsNjQsMzIsMCwzMiwxLDQ5LDAsMCw2NiwxOTcsMjA3LDIxNywxNzgsMjQxLDIyOSwxODYsMjM0LDM5LDEyNiwxMzMsNjYsMTEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsMCwzMiwxLDY1LDEsMTA2LDMzLDEsMTIsMSwxMSwxMSwzMiwwLDMyLDAsNjYsMzMsMTM2LDEzMyw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwzNCwwLDMyLDAsNjYsMjksMTM2LDEzMyw2NiwyNDksMjQzLDIyMSwyNDEsMTUzLDI0NiwxNTMsMTcxLDIyLDEyNiwzNCwwLDMyLDAsNjYsMzIsMTM2LDEzMywxMSw3NywwLDMyLDAsNjUsOCwxMDYsMzIsMSw2NiwyMTQsMjM1LDEzMCwyMzgsMjM0LDI1MywxMzcsMjQ1LDIyNCwwLDEyNCw1NSwzLDAsMzIsMCw2NSwxNiwxMDYsMzIsMSw2NiwxNzcsMTY5LDE3MiwxOTMsMTczLDE4NCwyMTIsMTY2LDYxLDEyNSw1NSwzLDAsMzIsMCw2NSwyNCwxMDYsMzIsMSw1NSwzLDAsMzIsMCw2NSwzMiwxMDYsMzIsMSw2NiwyNDksMjM0LDIwOCwyMDgsMjMxLDIwMSwxNjEsMjI4LDIyNSwwLDEyNCw1NSwzLDAsMTEsMjQ0LDQsMiwzLDEyNyw0LDEyNiwzMiwxLDMyLDIsMTA2LDMzLDUsMzIsMCw2NSw0MCwxMDYsMzMsNCwzMiwwLDY1LDIwMCwwLDEwNiw0MCwyLDAsMzMsMywzMiwwLDMyLDAsNDEsMywwLDMyLDIsMTczLDEyNCw1NSwzLDAsMzIsMiwzMiwzLDEwNiw2NSwzMiw3Myw0LDY0LDMyLDMsMzIsNCwxMDYsMzIsMSwzMiwyLDI1MiwxMCwwLDAsMzIsMCw2NSwyMDAsMCwxMDYsMzIsMiwzMiwzLDEwNiw1NCwyLDAsMTUsMTEsMzIsMyw0LDY0LDMyLDMsMzIsNCwxMDYsMzIsMSw2NSwzMiwzMiwzLDEwNywzNCwyLDI1MiwxMCwwLDAsMzIsMCw2NSw4LDEwNiwzNCwzLDMyLDMsNDEsMywwLDMyLDQsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw1NSwzLDAsMzIsMCw2NSwxNiwxMDYsMzQsMywzMiwzLDQxLDMsMCwzMiw0LDY1LDgsMTA2LDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNTUsMywwLDMyLDAsNjUsMjQsMTA2LDM0LDMsMzIsMyw0MSwzLDAsMzIsNCw2NSwxNiwxMDYsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw1NSwzLDAsMzIsMCw2NSwzMiwxMDYsMzQsMywzMiwzLDQxLDMsMCwzMiw0LDY1LDI0LDEwNiw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDU1LDMsMCwzMiwwLDY1LDIwMCwwLDEwNiw2NSwwLDU0LDIsMCwzMiwxLDMyLDIsMTA2LDMzLDEsMTEsMzIsMSw2NSwzMiwxMDYsMzIsNSw3Nyw0LDY0LDMyLDUsNjUsMzIsMTA3LDMzLDIsMzIsMCw2NSw4LDEwNiw0MSwzLDAsMzMsNiwzMiwwLDY1LDE2LDEwNiw0MSwzLDAsMzMsNywzMiwwLDY1LDI0LDEwNiw0MSwzLDAsMzMsOCwzMiwwLDY1LDMyLDEwNiw0MSwzLDAsMzMsOSwzLDY0LDMyLDYsMzIsMSw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDYsMzIsNywzMiwxLDY1LDgsMTA2LDM0LDEsNDEsMywwLDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDEyNCw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwzMyw3LDMyLDgsMzIsMSw2NSw4LDEwNiwzNCwxLDQxLDMsMCw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiwxMjQsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMzMsOCwzMiw5LDMyLDEsNjUsOCwxMDYsMzQsMSw0MSwzLDAsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsMTI0LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDMzLDksMzIsMiwzMiwxLDY1LDgsMTA2LDM0LDEsNzksMTMsMCwxMSwzMiwwLDY1LDgsMTA2LDMyLDYsNTUsMywwLDMyLDAsNjUsMTYsMTA2LDMyLDcsNTUsMywwLDMyLDAsNjUsMjQsMTA2LDMyLDgsNTUsMywwLDMyLDAsNjUsMzIsMTA2LDMyLDksNTUsMywwLDExLDMyLDEsMzIsNSw3Myw0LDY0LDMyLDQsMzIsMSwzMiw1LDMyLDEsMTA3LDM0LDEsMjUyLDEwLDAsMCwzMiwwLDY1LDIwMCwwLDEwNiwzMiwxLDU0LDIsMCwxMSwxMSwxODgsMiwxLDUsMTI2LDMyLDAsNjUsMjQsMTA2LDQxLDMsMCwzMywxLDMyLDAsNDEsMywwLDM0LDIsNjYsMzIsOTAsNCwxMjYsMzIsMCw2NSw4LDEwNiw0MSwzLDAsMzQsMyw2NiwxLDEzNywzMiwwLDY1LDE2LDEwNiw0MSwzLDAsMzQsNCw2Niw3LDEzNywxMjQsMzIsMSw2NiwxMiwxMzcsMzIsMCw2NSwzMiwxMDYsNDEsMywwLDM0LDUsNjYsMTgsMTM3LDEyNCwxMjQsMzIsMyw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSwzMiw0LDY2LDIwNywyMTQsMjExLDE5MCwyMTAsMTk5LDE3MSwyMTcsNjYsMTI2LDY2LDMxLDEzNyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDEzMyw2NiwxMzUsMTQ5LDE3NSwxNzUsMTUyLDE4MiwyMjIsMTU1LDE1OCwxMjcsMTI2LDY2LDE1NywxNjMsMTgxLDIzNCwxMzEsMTc3LDE0MSwxMzgsMjUwLDAsMTI1LDMyLDEsNjYsMjA3LDIxNCwyMTEsMTkwLDIxMCwxOTksMTcxLDIxNyw2NiwxMjYsNjYsMzEsMTM3LDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsMTMzLDY2LDEzNSwxNDksMTc1LDE3NSwxNTIsMTgyLDIyMiwxNTUsMTU4LDEyNywxMjYsNjYsMTU3LDE2MywxODEsMjM0LDEzMSwxNzcsMTQxLDEzOCwyNTAsMCwxMjUsMzIsNSw2NiwyMDcsMjE0LDIxMSwxOTAsMjEwLDE5OSwxNzEsMjE3LDY2LDEyNiw2NiwzMSwxMzcsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiwxMzMsNjYsMTM1LDE0OSwxNzUsMTc1LDE1MiwxODIsMjIyLDE1NSwxNTgsMTI3LDEyNiw2NiwxNTcsMTYzLDE4MSwyMzQsMTMxLDE3NywxNDEsMTM4LDI1MCwwLDEyNSw1LDMyLDEsNjYsMTk3LDIwNywyMTcsMTc4LDI0MSwyMjksMTg2LDIzNCwzOSwxMjQsMTEsMzIsMiwxMjQsMzIsMCw2NSw0MCwxMDYsMzIsMiw2NiwzMSwxMzEsMTY3LDE2LDYsMTFdKTtmdW5jdGlvbiB0ZSh0KXtyZXR1cm4hKCFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBTdHJpbmddIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCl8fCIiPT09dCl9ZnVuY3Rpb24gZWUodCl7bGV0IGU9ITE7aWYodGUodCkpZT0haXNOYU4oTnVtYmVyKHQpKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7aWYoZnVuY3Rpb24odCl7cmV0dXJuIHQhPXR9KHQpKXJldHVybiExO2U9ITB9cmV0dXJuIGV9dmFyIHJlPS9ccy87dmFyIG5lPS9eXHMrLztmdW5jdGlvbiBvZSh0KXtyZXR1cm4gdD90LnNsaWNlKDAsZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoO2UtLSYmcmUudGVzdCh0LmNoYXJBdChlKSk7KTtyZXR1cm4gZX0odCkrMSkucmVwbGFjZShuZSwiIik6dH12YXIgaWU9TmFOLHVlPS9eWy0rXTB4WzAtOWEtZl0rJC9pLGFlPS9eMGJbMDFdKyQvaSxjZT0vXjBvWzAtN10rJC9pLGZlPXBhcnNlSW50O3ZhciBzZT0xLzAsbGU9MTc5NzY5MzEzNDg2MjMxNTdlMjkyO2Z1bmN0aW9uIHBlKHQpe3JldHVybiB0Pyh0PWZ1bmN0aW9uKHQpe2lmKCJudW1iZXIiPT10eXBlb2YgdClyZXR1cm4gdDtpZih6dCh0KSlyZXR1cm4gaWU7aWYodyh0KSl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQudmFsdWVPZj90LnZhbHVlT2YoKTp0O3Q9dyhlKT9lKyIiOmV9aWYoInN0cmluZyIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9b2UodCk7dmFyIHI9YWUudGVzdCh0KTtyZXR1cm4gcnx8Y2UudGVzdCh0KT9mZSh0LnNsaWNlKDIpLHI/Mjo4KTp1ZS50ZXN0KHQpP2llOit0fSh0KSk9PT1zZXx8dD09PS1zZT8odDwwPy0xOjEpKmxlOnQ9PXQ/dDowOjA9PT10P3Q6MH1hc3luYyBmdW5jdGlvbiBoZSh0LGU9e30pe2lmKHI9dCwiW29iamVjdCBCbG9iXSIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocikmJiFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBGaWxlXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpKXJldHVybiBjb25zb2xlLmxvZygiaW5wIix0KSxQcm9taXNlLnJlamVjdCgiaW5wIGlzIG5vdCBhIEJsb2Igb3IgRmlsZSIpO3ZhciByO2xldCBuPVh0KGUsImNodW5rU2l6ZSIpO2VlKG4pfHwobj02NzEwODg2NCksbj1mdW5jdGlvbih0KXtyZXR1cm4gZWUodCk/cGUodCk6MH0obik7bGV0e2NyZWF0ZTY0Om99PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnN0e2V4cG9ydHM6e21lbTplLHh4aDMyOnIseHhoNjQ6bixpbml0MzI6byx1cGRhdGUzMjppLGRpZ2VzdDMyOnUsaW5pdDY0OmEsdXBkYXRlNjQ6YyxkaWdlc3Q2NDpmfX09dDtsZXQgcz1uZXcgVWludDhBcnJheShlLmJ1ZmZlcik7ZnVuY3Rpb24gbCh0LHIpe2lmKGUuYnVmZmVyLmJ5dGVMZW5ndGg8dCtyKXtjb25zdCBuPU1hdGguY2VpbCgodCtyLWUuYnVmZmVyLmJ5dGVMZW5ndGgpLzY1NTM2KTtlLmdyb3cobikscz1uZXcgVWludDhBcnJheShlLmJ1ZmZlcil9fWZ1bmN0aW9uIHAodCxlLHIsbixvLGkpe2wodCk7Y29uc3QgdT1uZXcgVWludDhBcnJheSh0KTtyZXR1cm4gcy5zZXQodSkscigwLGUpLHUuc2V0KHMuc3ViYXJyYXkoMCx0KSkse3VwZGF0ZShlKXtsZXQgcjtyZXR1cm4gcy5zZXQodSksInN0cmluZyI9PXR5cGVvZiBlPyhsKDMqZS5sZW5ndGgsdCkscj1iLmVuY29kZUludG8oZSxzLnN1YmFycmF5KHQpKS53cml0dGVuKToobChlLmJ5dGVMZW5ndGgsdCkscy5zZXQoZSx0KSxyPWUuYnl0ZUxlbmd0aCksbigwLHQsciksdS5zZXQocy5zdWJhcnJheSgwLHQpKSx0aGlzfSxkaWdlc3Q6KCk9PihzLnNldCh1KSxpKG8oMCkpKX19ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdD4+PjB9Y29uc3QgeT0ybioqNjRuLTFuO2Z1bmN0aW9uIHYodCl7cmV0dXJuIHQmeX1jb25zdCBiPW5ldyBUZXh0RW5jb2RlcixkPTAsZz0wbjtmdW5jdGlvbiBfKHQsZT1kKXtyZXR1cm4gbCgzKnQubGVuZ3RoLDApLGgocigwLGIuZW5jb2RlSW50byh0LHMpLndyaXR0ZW4sZSkpfWZ1bmN0aW9uIGoodCxlPWcpe3JldHVybiBsKDMqdC5sZW5ndGgsMCksdihuKDAsYi5lbmNvZGVJbnRvKHQscykud3JpdHRlbixlKSl9cmV0dXJue2gzMjpfLGgzMlRvU3RyaW5nOih0LGU9ZCk9Pl8odCxlKS50b1N0cmluZygxNikucGFkU3RhcnQoOCwiMCIpLGgzMlJhdzoodCxlPWQpPT4obCh0LmJ5dGVMZW5ndGgsMCkscy5zZXQodCksaChyKDAsdC5ieXRlTGVuZ3RoLGUpKSksY3JlYXRlMzI6KHQ9ZCk9PnAoNDgsdCxvLGksdSxoKSxoNjQ6aixoNjRUb1N0cmluZzoodCxlPWcpPT5qKHQsZSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDE2LCIwIiksaDY0UmF3Oih0LGU9Zyk9PihsKHQuYnl0ZUxlbmd0aCwwKSxzLnNldCh0KSx2KG4oMCx0LmJ5dGVMZW5ndGgsZSkpKSxjcmVhdGU2NDoodD1nKT0+cCg4OCx0LGEsYyxmLHYpfX0oKGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKFp0KSkuaW5zdGFuY2UpfSgpLGk9bygpLHU9MDtmb3IoO3U8dC5zaXplOyl7bGV0IGU9dC5zbGljZSh1LHUrbikscj1hd2FpdCBlLmFycmF5QnVmZmVyKCk7aS51cGRhdGUobmV3IFVpbnQ4QXJyYXkocikpLHUrPW59cmV0dXJuIGkuZGlnZXN0KCkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDE2LCIwIil9bGV0IGNoZWNrU2xpY2VzSGFzaD1hc3luYyhyLG4sbyk9PntpZigwPT09bXQocikpe3JldHVybntlcnJvcjoibm8gZmlsZVNsaWNlSGFzaHMifX1sZXQgaT1bXTtmb3IobGV0IHU9MDt1PHIubGVuZ3RoO3UrKyl7bGV0IGE9clt1XSxjPXQucmVzb2x2ZShvLGAke259XyR7YS5pfWApLGY9IiI7YXdhaXQgaGUobmV3IEJsb2IoW2UucmVhZEZpbGVTeW5jKGMpXSkpLnRoZW4oKHQ9PntmPXR9KSkuY2F0Y2goKHQ9Pntjb25zb2xlLmxvZygiZnNJc0ZpbGUoX3BhdGhGaWxlKSIsYyxZdChjKSksY29uc29sZS5sb2codCl9KSksYS5oPT09ZiYmaS5wdXNoKGEuaSl9cmV0dXJue3Nsa3M6aX19OwoKCmxldCBpbnN0YW5jZSA9IG51bGwKZnVuY3Rpb24gaW5pdChpbnB1dCl7CgogICAgLy9pbml0CiAgICBsZXQgcgogICAgCiAgICAgICAgciA9IHsKICAgICAgICAgICAgbWFpbjogY2hlY2tTbGljZXNIYXNoCiAgICAgICAgfQogICAgICAgIAoKICAgIC8vb24KICAgIAoKICAgIC8vc2F2ZQogICAgaW5zdGFuY2UgPSByCgp9CgpmdW5jdGlvbiBzZW5kTWVzc2FnZShkYXRhKSB7CiAgICAKICAgICAgICBwYXJlbnRQb3J0LnBvc3RNZXNzYWdlKGRhdGEpCiAgICAgICAgCn0KCmFzeW5jIGZ1bmN0aW9uIHJ1bihkYXRhKSB7CiAgICAvLyBjb25zb2xlLmxvZygnaW5uZXIgd29ya2VyIHJ1bicsZGF0YSkKCiAgICAvL21vZGUKICAgIGxldCBtb2RlID0gZGF0YS5tb2RlCgogICAgLy9jaGVjawogICAgaWYobW9kZSAhPT0gJ2luaXQnICYmIG1vZGUgIT09ICdjYWxsJyl7CiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgLy9pbml0CiAgICBpZihtb2RlID09PSAnaW5pdCcpewogICAgICAgIAogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vdHlwZQogICAgICAgICAgICBsZXQgdHlwZSA9IGRhdGEudHlwZQoKICAgICAgICAgICAgLy9pbnB1dAogICAgICAgICAgICBsZXQgaW5wdXQgPSBkYXRhLmlucHV0CiAgICAKICAgICAgICAgICAgLy9pbnN0YW5jZQogICAgICAgICAgICBpZih0eXBlID09PSAnZnVuY3Rpb24nKXsKICAgICAgICAgICAgICAgIGluaXQoLi4uaW5wdXQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih0eXBlID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGNoZWNrU2xpY2VzSGFzaAogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBjYXRjaChlcnIpewogICAgICAgIAogICAgICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZW1pdCcsCiAgICAgICAgICAgICAgICBldk5hbWU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICBtc2c6IGVyciwKICAgICAgICAgICAgfQogICAgICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgICAgIH0KICAgICAgICAgICAgCiAgICB9CgogICAgLy9jaGVjawogICAgaWYobW9kZSA9PT0gJ2NhbGwnKXsKICAgICAgICBsZXQgc3RhdGUgPSAnJwogICAgICAgIGxldCBtc2cgPSBudWxsCgogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vZnVuCiAgICAgICAgICAgIGxldCBmdW4gPSBpbnN0YW5jZVtkYXRhLmZ1bl0KCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAoKICAgICAgICAgICAgLy9leGVjCiAgICAgICAgICAgIGF3YWl0IGZ1biguLi5pbnB1dCkKICAgICAgICAgICAgICAgIC50aGVuKChzdWMpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICBtc2c9c3VjCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nZXJyb3InCiAgICAgICAgICAgICAgICAgICAgbXNnPWVycgogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgICAgIHN0YXRlID0gJ2Vycm9yJwogICAgICAgICAgICBtc2cgPSBlcnIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9zZW5kTWVzc2FnZQogICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgIG1vZGU6ICdyZXR1cm4nLAogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAgZnVuOiBkYXRhLmZ1biwKICAgICAgICAgICAgc3RhdGUsCiAgICAgICAgICAgIG1zZywKICAgICAgICB9CiAgICAgICAgc2VuZE1lc3NhZ2UocmVzKQoKICAgIH0KCn0KCmZ1bmN0aW9uIHJlY3ZNZXNzYWdlKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcmVjdjonLCBkYXRhKQoKICAgIC8vZGF0YVJlY3YKICAgIGxldCBkYXRhUmVjdiA9IGRhdGEKCiAgICAvL3J1bgogICAgcnVuKGRhdGFSZWN2KQoKfQoKCiAgICAgICAgcGFyZW50UG9ydC5vbignbWVzc2FnZScsIHJlY3ZNZXNzYWdlKQogICAgICAgIAoKdHJ5ewogICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmhhbmRsZWRSZWplY3Rpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuY2F1Z2h0RXhjZXB0aW9uJywgZXJyKQogICAgfSkKICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uTW9uaXRvcicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgZXJyKQogICAgfSkKfQpjYXRjaChlcnIpe30KCg==",Buffer.from(s,"base64").toString("utf8"));var s;function o(){let n=new i,s=function(t){try{return new e.Worker(t,{eval:!0})}catch(e){a(e)}}(t);if(!s)return a("invalid worker"),null;function o(){let e=function(){let e,t,i=new Promise((function(){e=arguments[0],t=arguments[1]}));return i.resolve=e,i.reject=t,i}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=i.length;for(let s=0;s<e;s++)t[s]=i[0|Math.random()*n];return t.join("")}(),i={mode:"call",id:t,fun:"main",input:[...arguments]};return s.postMessage(i),n.once(t,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function a(e){n.emit("error",e)}return s.on("message",(function(e){let t=e,i=t.mode;"emit"!==i&&"return"!==i||("emit"===i&&n.emit(t.evName,t.msg),"return"===i&&n.emit(t.id,t))})),s.on("error",a),s.on("exit",(e=>{1!==e&&a("exit code["+e+"] !== 1")})),function(){let e={mode:"init",type:"function",input:[...arguments]};s.postMessage(e)}([...arguments]),n.main=o,n.main=o,n.terminate=function(){s?(s.terminate(),s=void 0):a("worker has been terminated")},n}n=async function(){let e=[...arguments],t=o();return await t.main(...e).finally((()=>{t.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return n}(t)}({get exports(){return i},set exports(e){i=e}}),i)}(hs);var gs=Ct(hs.exports);function fs(o={}){let a=ve(o,"port");Ve(a)||(a=8080);let r=ve(o,"useInert");Tt(r)||(r=!0);let c=ve(o,"pathStaticFiles");be(c)||(c="dist");let l=ve(o,"pathUploadTemp");be(l)||(l="./uploadTemp"),yt(l)||Xt(l);let u=ve(o,"apiName");be(u)||(u="api");let p=ve(o,"tokenType");be(p)||(p="Bearer");let d=ve(o,"sizeSlice");Ve(d)||(d=1048576);let m=ve(o,"verifyConn");lt(m)||(m=()=>!0);let h=ve(o,"corsOrigins",[]);Je(h)||(h=["*"]);let g=ve(o,"delayForSlice","");ut(g)||(g=100),g=Pe(g);let f=null;f=ve(o,"serverHapi")?o.serverHapi:i.server({port:a,routes:{timeout:{server:!1,socket:!1},cors:{origin:h,credentials:!1}}});let w=Zt(),y=(e,...t)=>{setTimeout((()=>{w.emit(e,...t)}),1)};async function x(e){let t=ht(),i=ht();return i.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),y("upload",e,i),t}async function D(e){let t=ht(),i=ht();return i.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),y("download",e,i),t}function v(e,t,i={}){let n=new s.Readable;n._read=()=>{},n.push(t),n.push(null);let o=ve(i,"returnType",""),a=ve(i,"returnMsg",""),r=e.response(n).header("Cache-Control","no-cache, no-store, must-revalidate").header("Content-Type","application/octet-stream").header("Content-Length",n.readableLength);return be(o)&&r.header("Return-Type",o),be(a)&&r.header("Return-Msg",a),r}function M(e,t){return be(t)||(console.log("msg",t),console.log("msg is not an effective string, set msg=''"),t=""),v(e,zi({error:t}),{returnType:"error",returnMsg:t})}let C={path:`/${u}/main`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=ve(e,"headers");i=Ce(i)?i:"";let n=ve(e,"query");n=Ce(n)?n:"";let o=ve(i,"authorization","");o=be(o)?o:"";{let s=!1;try{s=m({apiType:"main",authorization:o,query:n,headers:i,req:e}),gt(s)&&(s=await s.catch((e=>{console.log(e),s=!1})))}catch(e){console.log(e),s=!1}if(!0!==s)return M(t,"permission denied")}y("handler",{api:"apiMain",headers:i,query:n});let a=await(()=>{let t=ht(),i=[],n=new s.Writable({write(e,t,n){i.push(e),n()}});return n.on("finish",(()=>{})),e.payload.pipe(n),e.payload.on("end",(()=>{let e=Buffer.concat(i);i=[],t.resolve(e)})),e.payload.on("close",(()=>{})),e.payload.on("error",(e=>{console.log("apiMain req.payload err",e),y("error",`receive payload error: ${e.message}`),t.reject(`receive payload error: ${e.message}`)})),t})(),r=Bi(new Uint8Array(a)),c={},l="",u="";return await async function(e){let t=ht(),i=ht();i.then((i=>{e.output=i,delete e.input,t.resolve(e)})).catch((e=>{t.reject(e)}));{let t=ve(e,"func",""),n=ve(e,"input",null);y("execute",t,n,i)}return t}(r).then((e=>{c.success=e,l="success",u="need to parse"})).catch((e=>{c.error=e,l="error",u="need to parse"})),v(t,zi(c),{returnType:l,returnMsg:u})}},I={path:`/${u}/ulctr`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=ve(e,"headers");i=Ce(i)?i:"";let n=ve(e,"query");n=Ce(n)?n:"";let s=ve(i,"authorization","");s=be(s)?s:"";{let e=m({apiType:"upload-controller",authorization:s,headers:i,query:n});if(gt(e)&&(e=await e),!0!==e)return M(t,"permission denied")}y("handler",{api:"apiUploadCheck",headers:i,query:n});let o=ve(e,"payload.mode","");if("check-total-hash"!==o&&"check-slices-hash"!==o&&"merge-slices-push"!==o&&"merge-slices-get"!==o)return M(t,`invalid mode[${o}] in payload`);let a=ve(e,"payload.fileHash","");if(!be(a))return M(t,"invalid fileHash in payload");let r={},c="",u="";return await(async()=>{let t=null;if("check-total-hash"===o){let i=ve(e,"payload.filename",""),n=ve(e,"payload.fileSize","");if(t=await ms(n,d,a,l),t.bAllHash){let e={from:"check-total-hash",filename:i,path:t.path},n=await x(e);t={...t,msg:n}}}else if("check-slices-hash"===o){let i=ve(e,"payload.fileSliceHashs",[]);t=await gs(i,a,l)}else if("merge-slices-push"===o){let i=ve(e,"payload.chunkTotal","");t={queueId:us(a,i,l)}}else if("merge-slices-get"===o){let i=ve(e,"payload.filename",""),n=ve(e,"payload.queueId",""),s=ps(n,l);if(t={state:s.state,msg:s.msg,queueId:n,filename:i,path:s.path},"success"===s.state){let e={from:"merge-slices-get",filename:i,path:s.path},n=await x(e);t={...t,msg:n}}}return t})().then((e=>{r.success=e,c="success",u="need to parse"})).catch((e=>{r.error=e,c="error",u="need to parse"})),v(t,zi(r),{returnType:c,returnMsg:u})}},b={path:`/${u}/slc`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(i,n){let s=ve(i,"headers");s=Ce(s)?s:"";let o=ve(i,"query");o=Ce(o)?o:"";let a=ve(s,"authorization","");a=be(a)?a:"";{let e=m({apiType:"upload-slice",authorization:a,headers:s,query:o});if(gt(e)&&(e=await e),!0!==e)return M(n,"permission denied")}y("handler",{api:"apiUploadSlice",headers:s,query:o});let r=ve(s,"chunk-index",""),c=ve(s,"chunk-total",""),u=ve(s,"package-id","");if(!ut(r))return M(n,"invalid chunkIndex in headers");if(r=Pe(r),!ut(c))return M(n,"invalid chunkTotal in headers");if(c=Pe(c),!be(u))return M(n,"invalid packageId in headers");let p=e.resolve(l,`${u}_${r}`),d=t.createWriteStream(p),h={},f="",w="";return await(()=>{let e=ht();return i.payload.pipe(d),i.payload.on("end",(()=>{setTimeout((()=>{e.resolve(`chunk[${r+1}/${c}] of packageId[${u}] done`)}),g)})),i.payload.on("error",(t=>{console.log(`apiUploadSlice req.payload chunk[${r+1}/${c}] of packageId[${u}] err`,t),y("error",`receive chunk[${r+1}/${c}] of packageId[${u}] error: ${t.message}`),e.reject(`receive chunk[${r+1}/${c}] of packageId[${u}] error: ${t.message}`)})),e})().then((e=>{h.success=e,f="success",w="need to parse"})).catch((e=>{h.error=e,f="error",w="need to parse",y("error",e)})),v(n,zi(h),{returnType:f,returnMsg:w})}},L={path:`/${u}/dwgfn`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=ve(e,"headers");i=Ce(i)?i:"";let n=ve(e,"query");n=Ce(n)?n:"";let s=ve(i,"authorization","");s=be(s)?s:"";{let e=m({apiType:"download-get-filename",authorization:s,headers:i,query:n});if(gt(e)&&(e=await e),!0!==e)return M(t,"permission denied")}y("handler",{api:"apiDownloadGetFilename",headers:i,query:n});let o=ve(e,"payload.fileId","");if(!be(o))return M(t,"invalid fileId in payload");let a={fileId:o},r={},c="",l="";await D(a).then((e=>{r.success=e,c="success",l="need to parse"})).catch((e=>{r.error=e,c="error",l="need to parse"}));let u=ve(r,"success"),p=ve(u,"streamRead");try{p.destroy()}catch(e){}let d=ve(u,"filename");return be(d)?(r={success:{filename:d}},v(t,zi(r),{returnType:c,returnMsg:l})):M(t,"invalid filename")}},A={path:`/${u}/dwgf`,method:"GET",options:{timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=ve(e,"headers");i=Ce(i)?i:"";let n=ve(e,"query");n=Ce(n)?n:"";let s=ve(n,"token","");s=be(s)?s:"";let o="";be(s)&&(o=`${p} ${s}`);{let e=m({apiType:"download-get-file",authorization:o,headers:i,query:n});if(gt(e)&&(e=await e),!0!==e)return M(t,"permission denied")}y("handler",{api:"apiDownloadGetFilename",headers:i,query:n});let a=ve(n,"fileId","");if(a=be(a)?a:"",!be(a))return M(t,"invalid fileId in query");let r={fileId:a},c={};if(await D(r).then((e=>{c.success=e})).catch((e=>{c.error=e})),Vt(c,"error"))return M(t,"can not get file from fileId");let l=ve(c,"success"),u=ve(l,"streamRead"),d=ve(l,"fileSize");if(!Yt(d)){try{u.destroy()}catch(e){}return M(t,"invalid fileSize")}let h=ve(l,"fileType");if(!be(h)){try{u.destroy()}catch(e){}return M(t,"invalid fileType")}return h=zt(h),t.response(u).type(h).header("Content-Length",d)}},E={path:`/${u}/dw`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=ve(e,"headers");i=Ce(i)?i:"";let n=ve(e,"query");n=Ce(n)?n:"";let s=ve(i,"authorization","");s=be(s)?s:"";{let e=m({apiType:"download",authorization:s,headers:i,query:n});if(gt(e)&&(e=await e),!0!==e)return M(t,"permission denied")}y("handler",{api:"apiDownload",headers:i,query:n});let o=ve(e,"payload.fileId","");if(!be(o))return M(t,"invalid fileId in payload");let a={fileId:o},r={};if(await D(a).then((e=>{r.success=e})).catch((e=>{r.error=e})),Vt(r,"error"))return M(t,"can not get file from fileId");let c=ve(r,"success"),l=ve(c,"streamRead"),u=ve(c,"filename");if(!be(u)){try{l.destroy()}catch(e){}return M(t,"invalid filename")}u=Pt(u);let p=ve(c,"fileSize");if(!Yt(p)){try{l.destroy()}catch(e){}return M(t,"invalid fileSize")}let d=ve(c,"fileType");if(!be(d)){try{l.destroy()}catch(e){}return M(t,"invalid fileType")}return d=zt(d),t.response(l).type(d).header("Content-Disposition",`attachment; filename="${u}"`).header("Content-Length",p)}};ve(o,"serverHapi")?f.route([C,I,b,L,A,E]):async function(){r&&await f.register(n);let e=[];if(r){let t={method:"GET",path:"/{file*}",handler:{directory:{path:`${c}/`}}};e=[...e,t]}e=[...e,C,I,b,L,A,E],f.route(e),await f.start(),console.log(`Server running at: ${f.info.uri}`)}();return w.stop=()=>{f.stop()},w}var ws=function(){return M.Date.now()},ys=Math.max,xs=Math.min;function Ds(e,t,i){var n,s,o,a,r,c,l=0,u=!1,p=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var i=n,o=s;return n=s=void 0,l=t,a=e.apply(o,i)}function h(e){var i=e-c;return void 0===c||i>=t||i<0||p&&e-l>=o}function g(){var e=ws();if(h(e))return f(e);r=setTimeout(g,function(e){var i=t-(e-c);return p?xs(i,o-(e-l)):i}(e))}function f(e){return r=void 0,d&&n?m(e):(n=s=void 0,a)}function w(){var e=ws(),i=h(e);if(n=arguments,s=this,c=e,i){if(void 0===r)return function(e){return l=e,r=setTimeout(g,t),u?m(e):a}(c);if(p)return clearTimeout(r),r=setTimeout(g,t),m(c)}return void 0===r&&(r=setTimeout(g,t)),a}return t=Ze(t)||0,Y(i)&&(u=!!i.leading,o=(p="maxWait"in i)?ys(Ze(i.maxWait)||0,t):o,d="trailing"in i?!!i.trailing:d),w.cancel=function(){void 0!==r&&clearTimeout(r),l=0,n=c=s=r=void 0},w.flush=function(){return void 0===r?a:f(ws())},w}var vs=function(){try{var e=O(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ms=vs;function Cs(e,t,i){"__proto__"==t&&Ms?Ms(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Is(e,t,i){(void 0!==i&&!te(e[t],i)||void 0===i&&!(t in e))&&Cs(e,t,i)}var bs="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ls=bs&&"object"==typeof module&&module&&!module.nodeType&&module,As=Ls&&Ls.exports===bs?M.Buffer:void 0,Es=As?As.allocUnsafe:void 0;function Ns(e,t){if(t)return e.slice();var i=e.length,n=Es?Es(i):new e.constructor(i);return e.copy(n),n}function Ts(e){var t=new e.constructor(e.byteLength);return new Ri(t).set(new Ri(e)),t}function Ss(e,t){var i=t?Ts(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function ks(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}var Zs=Object.create,js=function(){function e(){}return function(t){if(!Y(t))return{};if(Zs)return Zs(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function Xs(e){return"function"!=typeof e.constructor||Di(e)?{}:js(et(e))}function Ys(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var zs=Object.prototype.hasOwnProperty;function Fs(e,t,i){var n=e[t];zs.call(e,t)&&te(n,i)&&(void 0!==i||t in e)||Cs(e,t,i)}function Gs(e,t,i,n){var s=!i;i||(i={});for(var o=-1,a=t.length;++o<a;){var r=t[o],c=n?n(i[r],e[r],r,i,e):void 0;void 0===c&&(c=e[r]),s?Cs(i,r,c):Fs(i,r,c)}return i}var Hs=Object.prototype.hasOwnProperty;function Ks(e){if(!Y(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=Di(e),i=[];for(var n in e)("constructor"!=n||!t&&Hs.call(e,n))&&i.push(n);return i}function Bs(e){return Ii(e)?yi(e,!0):Ks(e)}function Ws(e,t,i,n,s,o,a){var r=Ys(e,i),c=Ys(t,i),l=a.get(c);if(l)Is(e,i,l);else{var u,p=o?o(r,c,i+"",e,t,a):void 0,d=void 0===p;if(d){var m=x(c),h=!m&&oi(c),g=!m&&!h&&fi(c);p=c,m||h||g?x(r)?p=r:S(u=r)&&Ii(u)?p=ks(r):h?(d=!1,p=Ns(c,!0)):g?(d=!1,p=Ss(c,!0)):p=[]:at(c)||ti(c)?(p=r,ti(r)?p=function(e){return Gs(e,Bs(e))}(r):Y(r)&&!z(r)||(p=Xs(c))):d=!1}d&&(a.set(c,p),s(p,c,n,o,a),a.delete(c)),Is(e,i,p)}}function Us(e,t,i,n,s){e!==t&&Qt(t,(function(o,a){if(s||(s=new Wi),Y(o))Ws(e,t,a,i,Us,n,s);else{var r=n?n(Ys(e,a),o,a+"",e,t,s):void 0;void 0===r&&(r=o),Is(e,a,r)}}),Bs)}var Ps=Math.max;var Vs=Ms?function(e,t){return Ms(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:Ni,_s=Vs,Rs=Date.now;var Qs=function(e){var t=0,i=0;return function(){var n=Rs(),s=16-(n-i);if(i=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(_s),Os=Qs;function Js(e,t){return Os(function(e,t,i){return t=Ps(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,o=Ps(n.length-t,0),a=Array(o);++s<o;)a[s]=n[t+s];s=-1;for(var r=Array(t+1);++s<t;)r[s]=n[s];return r[t]=i(a),function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(e,this,r)}}(e,t,Ni),e+"")}var qs,$s=(qs=function(e,t,i){Us(e,t,i)},Js((function(e,t){var i=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=qs.length>3&&"function"==typeof s?(n--,s):void 0,o&&function(e,t,i){if(!Y(i))return!1;var n=typeof t;return!!("number"==n?Ii(i)&&ri(t,i.length):"string"==n&&t in i)&&te(i[t],e)}(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=t[i];a&&qs(e,a,i,s)}return e})));function eo(e){if(!be(e))return{};let t={};try{t=JSON.parse(e)}catch(e){t={}}return t}function to(e,i={}){let n={};if(Ce(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=Zt()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let s=ve(i,"fpTableTags","");be(s)||(s="./tableTags.json");let o=ve(i,"genTag");lt(o)||(o=()=>Lt()+"|"+Nt(6));let a=(t,...i)=>{setTimeout((()=>{e.emit(t,...i)}),1)};function r(){let e={};try{if(t.existsSync(s)){let i=eo(t.readFileSync(s,"utf8"));Ce(i)&&(e=i)}}catch(e){a("error",{msg:"readTableTags catch",err:e})}return e}function c(){try{let e=function(e,t=!1){if(Re(e))return"";let i="";try{i=t?JSON.stringify(e,null,2):JSON.stringify(e)}catch(e){i=""}return i}(n);t.writeFileSync(s,e,"utf8")}catch(e){a("error",{msg:"writeTableTags catch",err:e})}}let l=Ds((()=>{c(),a("changeTableTags",n)}),200);return e.readTableTags=r,e.writeTableTags=c,e.initTableTags=function(e={},t="useInputFirst"){if("useInputOnly"===t)n=e;else if("useStorageOnly"===t)n=r();else if("useInputFirst"===t)n=$s(r(),e);else{if("useStorageFirst"!==t)throw new Error(`invalid mode[${t}]`);n=$s(e,r())}c()},e.setTableTags=function(e={}){n=$s(n,e),c()},e.getTableTags=function(){return n},e.updateTableTag=function(e){n[e]=o(),l()},e}var io=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$i(t,an(e)),e=et(e);return t}:nn;function no(e){return en(e,Bs,io)}var so=Object.prototype.hasOwnProperty;var oo=/\w*$/;var ao=C?C.prototype:void 0,ro=ao?ao.valueOf:void 0;function co(e,t,i){var n,s,o,a=e.constructor;switch(t){case"[object ArrayBuffer]":return Ts(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var i=t?Ts(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ss(e,i);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(o=new(s=e).constructor(s.source,oo.exec(s))).lastIndex=s.lastIndex,o;case"[object Symbol]":return n=e,ro?Object(ro.call(n)):{}}}var lo=hi&&hi.isMap,uo=lo?ui(lo):function(e){return S(e)&&"[object Map]"==In(e)};var po=hi&&hi.isSet,mo=po?ui(po):function(e){return S(e)&&"[object Set]"==In(e)},ho="[object Arguments]",go="[object Function]",fo="[object Object]",wo={};function yo(e,t,i,n,s,o){var a,r=1&t,c=2&t,l=4&t;if(i&&(a=s?i(e,n,s,o):i(e)),void 0!==a)return a;if(!Y(e))return e;var u=x(e);if(u){if(a=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&so.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!r)return ks(e,a)}else{var p=In(e),d=p==go||"[object GeneratorFunction]"==p;if(oi(e))return Ns(e,r);if(p==fo||p==ho||d&&!s){if(a=c||d?{}:Xs(e),!r)return c?function(e,t){return Gs(e,io(e),t)}(e,function(e,t){return e&&Gs(t,Bs(t),e)}(a,e)):function(e,t){return Gs(e,an(e),t)}(e,function(e,t){return e&&Gs(t,bi(t),e)}(a,e))}else{if(!wo[p])return s?e:{};a=co(e,p,r)}}o||(o=new Wi);var m=o.get(e);if(m)return m;o.set(e,a),mo(e)?e.forEach((function(n){a.add(yo(n,t,i,n,e,o))})):uo(e)&&e.forEach((function(n,s){a.set(s,yo(n,t,i,s,e,o))}));var h=u?void 0:(l?c?no:rn:c?Bs:bi)(e);return _t(h||e,(function(n,s){h&&(n=e[s=n]),Fs(a,s,yo(n,t,i,s,e,o))})),a}wo[ho]=wo["[object Array]"]=wo["[object ArrayBuffer]"]=wo["[object DataView]"]=wo["[object Boolean]"]=wo["[object Date]"]=wo["[object Float32Array]"]=wo["[object Float64Array]"]=wo["[object Int8Array]"]=wo["[object Int16Array]"]=wo["[object Int32Array]"]=wo["[object Map]"]=wo["[object Number]"]=wo[fo]=wo["[object RegExp]"]=wo["[object Set]"]=wo["[object String]"]=wo["[object Symbol]"]=wo["[object Uint8Array]"]=wo["[object Uint8ClampedArray]"]=wo["[object Uint16Array]"]=wo["[object Uint32Array]"]=!0,wo["[object Error]"]=wo[go]=wo["[object WeakMap]"]=!1;function xo(e){return yo(e,5)}var Do=Yn("length"),vo="\\ud800-\\udfff",Mo="["+vo+"]",Co="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Io="\\ud83c[\\udffb-\\udfff]",bo="[^"+vo+"]",Lo="(?:\\ud83c[\\udde6-\\uddff]){2}",Ao="[\\ud800-\\udbff][\\udc00-\\udfff]",Eo="(?:"+Co+"|"+Io+")"+"?",No="[\\ufe0e\\ufe0f]?",To=No+Eo+("(?:\\u200d(?:"+[bo,Lo,Ao].join("|")+")"+No+Eo+")*"),So="(?:"+[bo+Co+"?",Co,Lo,Ao,Mo].join("|")+")",ko=RegExp(Io+"(?="+Io+")|"+So+To,"g");function Zo(e){return Pn(e)?function(e){for(var t=ko.lastIndex=0;ko.test(e);)++t;return t}(e):Do(e)}function jo(e){if(null==e)return 0;if(Ii(e))return"string"==typeof(t=e)||!x(t)&&S(t)&&"[object String]"==T(t)?Zo(e):e.length;var t,i=In(e);return"[object Map]"==i||"[object Set]"==i?e.size:Ci(e).length}function Xo(e={}){let t=Zt(),i={},n=null,s=ve(e,"timeAlive");Ve(s)||(s=1e4),s=Pe(s);let o=ve(e,"timeDetect");return Ve(o)||(o=50),o=Pe(o),t.trigger=function(e,a){be(e)?(Vt(i,e)||setTimeout((()=>{t.emit("message",{eventName:"enter",key:e,data:a,now:jo(i)})}),1),i[e]={data:a,time:Date.now()},null===n&&(n=setInterval((()=>{Ti(i,((e,n)=>{if(Date.now()-e.time>s){let e=xo(i[n]);delete i[n],t.emit("message",{eventName:"leave",key:n,data:e.data,now:jo(i)})}})),Ce(i)||(clearInterval(n),n=null)}),o))):console.log("trigger need key")},t.get=function(){let e=[];return Ti(i,((t,i)=>{e.push({key:i,data:t.data})})),e=xo(e),e},t}function Yo(e,t={}){let i={};if(Ce(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=Zt()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let n=(t,...i)=>{setTimeout((()=>{e.emit(t,...i)}),1)},s=Xo(),o=setInterval((()=>{let e=Hn(s.get(),"key"),t={};Ti(e,(e=>{t[e]=ve(i,e,[])})),i=t}),1e3);s.on("message",(function({eventName:e,key:t,data:i,now:s}){"enter"===e?n("clientEnter",t,i):"leave"===e&&n("clientLeave",t,i),n("clientChange",s)})),e.on("execute",(function(e,t,o){if("[sys:polling]"===e)try{let e=ve(t,"clientId",""),n=ve(i,e,[]);n=xo(n),i[e]=[],s.trigger(e,t),o.resolve(n)}catch(e){n("error",e),o.reject("[sys:polling] error")}}));return e.getClients=s.get,e.getMessages=()=>xo(i),e.broadcast=e=>{if(!Ce(i))return;let t={};Ti(i,((i,n)=>{i.push({mode:"broadcast",data:e}),t[n]=i})),i=t},e.clearBroadcast=()=>{clearInterval(o)},e}let zo=(e,t)=>{let i={};return Ti(e,(e=>{let n=e,s=ve(t,e,"");be(s)&&(i[n]=s)})),i};function Fo(e,t,i,n={}){if(!Ce(e))throw new Error("invalid instWConverServer");if(0===jo(t))return e;if(!Ce(i))return e;let s=ve(n,"genTag");lt(s)||(s=()=>Lt()+"|"+Nt(6));let o={};return Ti(t,(e=>{o[e]=s()})),e.initTableTags(o,"useInputOnly"),Ti(t,(t=>{let n=i[t];if(!n)throw new Error(`invalid kpOrm[${t}]`);try{n.on("change",(()=>{e.updateTableTag(t)}))}catch(e){throw new Error(`kpOrm[${t}] can not listen to change events`)}})),e.on("changeTableTags",(i=>{e.broadcast({mode:"syncKpTable",data:zo(t,i)})})),e}function Go(e,t,i,n){for(var s=i-1,o=e.length;++s<o;)if(n(e[s],t))return s;return-1}var Ho=Array.prototype.splice;function Ko(e,t){return e&&e.length&&t&&t.length?function(e,t,i,n){var s=n?Go:Wn,o=-1,a=t.length,r=e;for(e===t&&(t=ks(t)),i&&(r=me(e,ui(i)));++o<a;)for(var c=0,l=t[o],u=i?i(l):l;(c=s(r,u,c,n))>-1;)r!==e&&Ho.call(r,c,1),Ho.call(e,c,1);return e}(e,t):e}function Bo(e,t={}){if(!Ce(e))throw new Error("invalid instWConverServer");let i=ve(t,"getUserIdByToken",null);lt(i)||(i=async()=>"");let n=ve(t,"useDbOrm",null);Tt(n)||(n=!1);let s=null;if(n&&(s=ve(t,"operOrm",null),!lt(s)))throw new Error("invalid opt.operOrm when useDbOrm=true");let o=[];if(n&&(o=ve(t,"tableNames",null),!_e(o)))throw new Error("invalid opt.tableNames when useDbOrm=true");let a=[];n&&(a=ve(t,"methods",null),_e(a)||(a=["select","insert","save","del"]));let r=ve(t,"kpFunExt",null);let c={};async function l(e,t,n){if(!be(e))return n.resolve({state:"error",msg:"invalid func"}),n;let s="";if(!Vt(t,"__sysToken__"))return n.resolve({state:"error",msg:"invalid token"}),n;if(s=zt(t.__sysToken__),!Vt(t,"__sysInputArgs__"))return n.resolve({state:"error",msg:"invalid input"}),n;t=t.__sysInputArgs__;let o="";if(o=i(s),gt(o)&&(o=await o),be(o)||(o=""),"[sys:getFuncList]"===e){let e=bi(c);e=function(e,t){if(!Je(e))return[];if((Me(t)||Fe(t)||Ie(t)||Tt(t))&&(t=[t]),!Je(t))return e;let i=xo(e);return Ko(i,t),i}(e,"[sys:getTableTags]");let t={state:"success",msg:e};return n.resolve(t),n}if(!Vt(c,e))return n.resolve({state:"error",msg:`invalid func[${e}]`}),n;let a=c[e];try{let e=await ft(a)(o,...t);n.resolve(e)}catch(t){n.resolve({state:"error",msg:`call func[${e}] has an error: ${t.message}`})}return n}return n&&(o=xo(o),c=function(e,t,i){let n={};return Ti(e,(e=>{Ti(t,(t=>{n[`${e}.${t}`]=async function(n,s){return await i(n,e,t,s)}}))})),n}(o,a,s)),Ce(r)&&Ti(r,((e,t)=>{c[t]=e})),e.on("execute",(async function(t,i,n){await l(t,i,n).catch((i=>{e.emit("error",i),n.resolve({state:"error",msg:`execFun func[${t}] has an error: ${i.message}`})}))})),e}function Wo(e,t={}){if(Ce(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=Zt()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let i=ve(t,"fpTableTags",null);be(i)||(i="./tableTags.json");let n=ve(t,"genTag");lt(n)||(n=()=>Lt()+"|"+Nt(6)),e=new Yo(e=new to(e,{fpTableTags:i,genTag:n}));let s=ve(t,"useDbOrm",null);Tt(s)||(s=!0);let o=ve(t,"kpOrm",null),a=ve(t,"operOrm",null),r=ve(t,"tableNamesExec",null),c=ve(t,"methodsExec",null),l=ve(t,"tableNamesSync",null),u=ve(t,"getUserIdByToken",null),p=ve(t,"kpFunExt",null);if(Ce(p)||(p={}),p={...p,"[sys:getTableTags]":()=>{let t=e.getTableTags();return{mode:"syncKpTable",data:zo(l,t)}}},e=new Bo(e,{getUserIdByToken:u,useDbOrm:s,operOrm:a,tableNames:r,methods:c,kpFunExt:p}),s){if(!Me(o))return e.emit("error","invalid opt.kpOrm when useDbOrm=true"),e;e=new Fo(e,l,o,{genTag:n})}return e}function Uo(e={}){let t=Zt(),s=null,o=null,a=ve(e,"port");He(a)||(a=8080);let r=ve(e,"corsOrigins",[]);Je(r)||(r=["http://localhost"]);let c=ve(e,"delayForSlice","");ut(c)||(c=100),c=Pe(c);let l=ve(e,"useInert");Tt(l)||(l=!0);let u=ve(e,"pathStaticFiles");be(u)||(u="dist");let p=ve(e,"apis");Je(p)||(p=[]);let d=ve(e,"apiName");be(d)||(d="api");let m=ve(e,"pathUploadTemp");be(m)||(m="./uploadTemp"),yt(m)||Xt(m);let h=ve(e,"tokenType");be(h)||(h="Bearer");let g=ve(e,"sizeSlice");Ve(g)||(g=1048576);let f=ve(e,"verifyConn");lt(f)||(f=()=>!0);let w=ve(e,"getUserIdByToken",null),y=ve(e,"useDbOrm",null);Tt(y)||(y=!0);let x=ve(e,"kpOrm",null),D=ve(e,"operOrm",null),v=ve(e,"tableNamesExec",null),M=ve(e,"methodsExec",null),C=ve(e,"tableNamesSync",null),I=ve(e,"kpFunExt",null),b=ve(e,"fnTableTags",null),L=ve(e,"genTag");lt(L)||(L=()=>Lt()+"|"+Nt(6));let A=ve(e,"showLog");Tt(A)||(A=!0);(async()=>{await(async()=>{s=new i.Server({port:a,routes:{timeout:{server:!1,socket:!1},cors:{origin:r,credentials:!1}}}),l&&await s.register(n);let e=[];l&&(e=[{method:"GET",path:"/{file*}",handler:{directory:{path:`${u}/`}}}]),e=[...e,...p],s.route(e)})(),await(async()=>{o=new fs({serverHapi:s,apiName:d,pathUploadTemp:m,tokenType:h,sizeSlice:g,verifyConn:f,corsOrigins:r,delayForSlice:c}),o.on("open",(function(){A&&console.log(`Server[port:${a}]: open`)})),o.on("clientChange",(function(e){A&&console.log(`Server[port:${a}]: now clients: ${e}`)}))})(),await(async()=>{o=new Wo(o,{getUserIdByToken:w,useDbOrm:y,kpOrm:x,operOrm:D,tableNamesExec:v,tableNamesSync:C,methodsExec:M,kpFunExt:I,fnTableTags:b,genTag:L}),o.on("error",(e=>{t.emit("error",e)}))})(),await s.start(),A&&console.log(`Server running at: ${s.info.uri}`)})().catch((e=>{t.emit("error",e)})),process.on("unhandledRejection",(e=>{console.log("unhandledRejection",e),t.emit("error",{mode:"unhandledRejection",err:e})})),process.on("uncaughtException",(e=>{console.log("uncaughtException",e),t.emit("error",{mode:"uncaughtException",err:e})}));return t.getServer=async()=>(await jt((()=>null!==s)),s),t.getInstWConverServer=async()=>(await jt((()=>null!==o)),o),t}function Po(e,t){let i=ht();if(!_e(e)&&!Me(e))return i.reject("rs is not an array or object"),i;let n=!1;if(Me(e)){n=!0;let t=[];Ti(e,((e,i)=>{t.push({k:i,v:e})})),e=t}lt(t)||(t=function(e){return e});let s=-1,o=[];return e.reduce((function(e,i){return e.then((function(e){o.push(e),s+=1;let a=s,r=i;return n&&(a=i.k,r=i.v),lt(t)?t(r,a):r}))}),Promise.resolve()).then((function(e){var t,n,s,a;o.push(e),a=null==(t=o)?0:t.length,o=a?Kn(t,(n=s||void 0===n?1:Ye(n))<0?0:n,a):[],i.resolve(o)})).catch((function(e){i.reject(e)})),i}let Vo={backup:async function(e){return await Po(e,(async(e,t)=>(console.log("backup...",t),{name:t,data:await e.select()})))},recover:async function(e,i,n,s=!1){if(!Dt(e))throw console.log("fp",e),new Error("fp is not exist");if(!Ce(i))throw console.log("woItems",i),new Error("invalid woItems");lt(n)||(n=null),Tt(s)||(s=!1);let o=t.readFileSync(e,"utf8");o=os(o);let a=eo(o);lt(n)&&n(),await Po(a,(async e=>{console.log("recover...",e.name),s&&(console.log("needCreateStorage"),await i[e.name].createStorage());let t=null;return jo(e.data)>0&&(t=await i[e.name].insert(e.data)),t}))}};function _o(){if(!lt(bt))throw new Error("invalid dayjs");return bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")}var Ro={exports:{}},Qo={},Oo={exports:{}},Jo={};function qo(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var $o=/javascript\s*\:/gim;Jo.whiteList=qo(),Jo.getDefaultWhiteList=qo,Jo.onAttr=function(e,t,i){},Jo.onIgnoreAttr=function(e,t,i){},Jo.safeAttrValue=function(e,t){return $o.test(t)?"":t};var ea={indexOf:function(e,t){var i,n;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var n,s;if(Array.prototype.forEach)return e.forEach(t,i);for(n=0,s=e.length;n<s;n++)t.call(i,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},ta=ea;var ia=function(e,t){";"!==(e=ta.trimRight(e))[e.length-1]&&(e+=";");var i=e.length,n=!1,s=0,o=0,a="";function r(){if(!n){var i=ta.trim(e.slice(s,o)),r=i.indexOf(":");if(-1!==r){var c=ta.trim(i.slice(0,r)),l=ta.trim(i.slice(r+1));if(c){var u=t(s,a.length,c,l,i);u&&(a+=u+"; ")}}}s=o+1}for(;o<i;o++){var c=e[o];if("/"===c&&"*"===e[o+1]){var l=e.indexOf("*/",o+2);if(-1===l)break;s=(o=l+1)+1,n=!1}else"("===c?n=!0:")"===c?n=!1:";"===c?n||r():"\n"===c&&r()}return ta.trim(a)},na=Jo,sa=ia;function oa(e){return null==e}function aa(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).whiteList=e.whiteList||na.whiteList,e.onAttr=e.onAttr||na.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||na.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||na.safeAttrValue,this.options=e}aa.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,n=t.onAttr,s=t.onIgnoreAttr,o=t.safeAttrValue,a=sa(e,(function(e,t,a,r,c){var l=i[a],u=!1;if(!0===l?u=l:"function"==typeof l?u=l(r):l instanceof RegExp&&(u=l.test(r)),!0!==u&&(u=!1),r=o(a,r)){var p,d={position:t,sourcePosition:e,source:c,isWhite:u};return u?oa(p=n(a,r,d))?a+":"+r:p:oa(p=s(a,r,d))?void 0:p}}));return a};var ra=aa;!function(e,t){var i=Jo,n=ra;for(var s in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,i)t[s]=i[s];"undefined"!=typeof window&&(window.filterCSS=e.exports)}(Oo,Oo.exports);var ca=Oo.exports,la={indexOf:function(e,t){var i,n;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var n,s;if(Array.prototype.forEach)return e.forEach(t,i);for(n=0,s=e.length;n<s;n++)t.call(i,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},ua=ca.FilterCSS,pa=ca.getDefaultWhiteList,da=la;function ma(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ha=new ua;function ga(e){return e.replace(fa,"&lt;").replace(wa,"&gt;")}var fa=/</g,wa=/>/g,ya=/"/g,xa=/&quot;/g,Da=/&#([a-zA-Z0-9]*);?/gim,va=/&colon;?/gim,Ma=/&newline;?/gim,Ca=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ia=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ba=/u\s*r\s*l\s*\(.*/gi;function La(e){return e.replace(ya,"&quot;")}function Aa(e){return e.replace(xa,'"')}function Ea(e){return e.replace(Da,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Na(e){return e.replace(va,":").replace(Ma," ")}function Ta(e){for(var t="",i=0,n=e.length;i<n;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return da.trim(t)}function Sa(e){return e=Ta(e=Na(e=Ea(e=Aa(e))))}function ka(e){return e=ga(e=La(e))}Qo.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Qo.getDefaultWhiteList=ma,Qo.onTag=function(e,t,i){},Qo.onIgnoreTag=function(e,t,i){},Qo.onTagAttr=function(e,t,i){},Qo.onIgnoreTagAttr=function(e,t,i){},Qo.safeAttrValue=function(e,t,i,n){if(i=Sa(i),"href"===t||"src"===t){if("#"===(i=da.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===t){if(Ca.lastIndex=0,Ca.test(i))return""}else if("style"===t){if(Ia.lastIndex=0,Ia.test(i))return"";if(ba.lastIndex=0,ba.test(i)&&(Ca.lastIndex=0,Ca.test(i)))return"";!1!==n&&(i=(n=n||ha).process(i))}return i=ka(i)},Qo.escapeHtml=ga,Qo.escapeQuote=La,Qo.unescapeQuote=Aa,Qo.escapeHtmlEntities=Ea,Qo.escapeDangerHtml5Entities=Na,Qo.clearNonPrintableCharacter=Ta,Qo.friendlyAttrValue=Sa,Qo.escapeAttrValue=ka,Qo.onIgnoreTagStripAll=function(){return""},Qo.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),n=[],s=!1;return{onIgnoreTag:function(o,a,r){if(function(t){return!!i||-1!==da.indexOf(e,t)}(o)){if(r.isClosing){var c="[/removed]",l=r.position+10;return n.push([!1!==s?s:r.position,l]),s=!1,c}return s||(s=r.position),"[removed]"}return t(o,a,r)},remove:function(e){var t="",i=0;return da.forEach(n,(function(n){t+=e.slice(i,n[0]),i=n[1]})),t+=e.slice(i)}}},Qo.stripCommentTag=function(e){for(var t="",i=0;i<e.length;){var n=e.indexOf("\x3c!--",i);if(-1===n){t+=e.slice(i);break}t+=e.slice(i,n);var s=e.indexOf("--\x3e",n);if(-1===s)break;i=s+3}return t},Qo.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},Qo.attributeWrapSign='"',Qo.cssFilter=ha,Qo.getDefaultCSSWhiteList=pa;var Za={},ja=la;function Xa(e){var t,i=ja.spaceIndex(e);return t=-1===i?e.slice(1,-1):e.slice(1,i+1),"/"===(t=ja.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function Ya(e){return"</"===e.slice(0,2)}var za=/[^a-zA-Z0-9\\_:.-]/gim;function Fa(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"="===i?t:-1}}function Ga(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"'"===i||'"'===i?t:-1}}function Ha(e,t){for(;t>0;t--){var i=e[t];if(" "!==i)return"="===i?t:-1}}function Ka(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Za.parseTag=function(e,t,i){var n="",s=0,o=!1,a=!1,r=0,c=e.length,l="",u="";e:for(r=0;r<c;r++){var p=e.charAt(r);if(!1===o){if("<"===p){o=r;continue}}else if(!1===a){if("<"===p){n+=i(e.slice(s,r)),o=r,s=r;continue}if(">"===p||r===c-1){n+=i(e.slice(s,o)),l=Xa(u=e.slice(o,r+1)),n+=t(o,n.length,l,u,Ya(u)),s=r+1,o=!1;continue}if('"'===p||"'"===p)for(var d=1,m=e.charAt(r-d);""===m.trim()||"="===m;){if("="===m){a=p;continue e}m=e.charAt(r-++d)}}else if(p===a){a=!1;continue}}return s<c&&(n+=i(e.substr(s))),n},Za.parseAttr=function(e,t){var i=0,n=0,s=[],o=!1,a=e.length;function r(e,i){if(!((e=(e=ja.trim(e)).replace(za,"").toLowerCase()).length<1)){var n=t(e,i||"");n&&s.push(n)}}for(var c=0;c<a;c++){var l,u=e.charAt(c);if(!1!==o||"="!==u)if(!1===o||c!==n)if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(l=Fa(e,c))){r(ja.trim(e.slice(i,c))),o=!1,i=c+1;continue}c=l-1;continue}if(-1===(l=Ha(e,c-1))){r(o,Ka(ja.trim(e.slice(i,c)))),o=!1,i=c+1;continue}}else;else{if(-1===(l=e.indexOf(u,c+1)))break;r(o,ja.trim(e.slice(n+1,l))),o=!1,i=(c=l)+1}else o=e.slice(i,c),i=c+1,n='"'===e.charAt(i)||"'"===e.charAt(i)?i:Ga(e,c+1)}return i<e.length&&(!1===o?r(e.slice(i)):r(o,Ka(ja.trim(e.slice(i))))),ja.trim(s.join(" "))};var Ba=ca.FilterCSS,Wa=Qo,Ua=Za,Pa=Ua.parseTag,Va=Ua.parseAttr,_a=la;function Ra(e){return null==e}function Qa(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Wa.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map((function(e){return e.toLowerCase()})):t[i.toLowerCase()]=e[i];return t}(e.whiteList||e.allowList):e.whiteList=Wa.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":Wa.attributeWrapSign,e.onTag=e.onTag||Wa.onTag,e.onTagAttr=e.onTagAttr||Wa.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Wa.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Wa.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Wa.safeAttrValue,e.escapeHtml=e.escapeHtml||Wa.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ba(e.css))}Qa.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,i=t.options,n=i.whiteList,s=i.onTag,o=i.onIgnoreTag,a=i.onTagAttr,r=i.onIgnoreTagAttr,c=i.safeAttrValue,l=i.escapeHtml,u=t.attributeWrapSign,p=t.cssFilter;i.stripBlankChar&&(e=Wa.stripBlankChar(e)),i.allowCommentTag||(e=Wa.stripCommentTag(e));var d=!1;i.stripIgnoreTagBody&&(d=Wa.StripTagBody(i.stripIgnoreTagBody,o),o=d.onIgnoreTag);var m=Pa(e,(function(e,t,i,d,m){var h={sourcePosition:e,position:t,isClosing:m,isWhite:Object.prototype.hasOwnProperty.call(n,i)},g=s(i,d,h);if(!Ra(g))return g;if(h.isWhite){if(h.isClosing)return"</"+i+">";var f=function(e){var t=_a.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var i="/"===(e=_a.trim(e.slice(t+1,-1)))[e.length-1];return i&&(e=_a.trim(e.slice(0,-1))),{html:e,closing:i}}(d),w=n[i],y=Va(f.html,(function(e,t){var n=-1!==_a.indexOf(w,e),s=a(i,e,t,n);return Ra(s)?n?(t=c(i,e,t,p))?e+"="+u+t+u:e:Ra(s=r(i,e,t,n))?void 0:s:s}));return d="<"+i,y&&(d+=" "+y),f.closing&&(d+=" /"),d+=">"}return Ra(g=o(i,d,h))?l(d):g}),l);return d&&(m=d.remove(m)),m};var Oa=Qa;!function(e,t){var i=Qo,n=Za,s=Oa;function o(e,t){return new s(t).process(e)}(t=e.exports=o).filterXSS=o,t.FilterXSS=s,function(){for(var e in i)t[e]=i[e];for(var s in n)t[s]=n[s]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Ro,Ro.exports);var Ja=Ct(Ro.exports);function qa(){return"undefined"!=typeof self?self:"undefined"!=typeof window&&void 0!==window.document?window:"undefined"!=typeof global?global:null}function $a(e){let t=function(){let e=qa();return Ja||e.xss}();let i=function e(i){return _e(i)||Me(i)?(Ti(i,(function(t,n){i[n]=e(t)})),i):be(i)?t(i,{onIgnoreTagAttr:function(e,i,n,s){if("style"===i)return i+'="'+t.escapeAttrValue(n)+'"'}}):i}(xo(e));return i}let er=null,tr=null;function ir(e,t,i,n="save"){if(!Ce(er))throw console.log("ds",er),new Error("invalid ds");let s=er[e].keys,o=!1;_e(i)||(o=!0,i=[i]);let a=_o();return n.indexOf("insert")>=0&&(s.indexOf("userId")>=0&&Ti(i,((e,n)=>{i[n].userId=t})),s.indexOf("timeCreate")>=0&&Ti(i,((e,t)=>{i[t].timeCreate=a})),s.indexOf("userIdUpdate")>=0&&Ti(i,((e,n)=>{i[n].userIdUpdate=t})),s.indexOf("timeUpdate")>=0&&Ti(i,((e,t)=>{i[t].timeUpdate=a}))),(n.indexOf("insert")>=0||n.indexOf("save")>=0)&&(s.indexOf("userIdUpdate")>=0&&Ti(i,((e,n)=>{i[n].userIdUpdate=t})),s.indexOf("timeUpdate")>=0&&Ti(i,((e,t)=>{i[t].timeUpdate=a}))),i=Hn(i,((e,t)=>{let i={};return Ti(e,((e,t)=>{e=$a(e),i[t]=e})),i})),i=o?i[0]:i}async function nr(e,t,i,n){let s,o=null;if(!Ce(tr))return Promise.reject("無有效woItems");let a=ve(tr,t,null);if(null===a)return Promise.reject(`ORM找不到表名稱: ${t}`);if("select"===i){if(s=await a.select(n).catch((e=>{console.log(`${t}.select catch`,e),o="取得資料失敗"})),be(o))return Promise.reject(o)}else if("insert"===i||"save"===i){try{n=ir(t,e,n,i)}catch(e){return console.log("adjustData catch",e.toString()),o="調整資料失敗",Promise.reject(o)}if("insert"===i?s=await a.insert(n).catch((e=>{console.log(`${t}.save catch`,e),o="新增資料失敗"})):"save"===i&&(s=await a.save(n).catch((e=>{console.log(`${t}.save catch`,e),o="儲存資料失敗"}))),be(o))return Promise.reject(o);s=_e(n)?Hn(n,(e=>({id:e.id}))):{id:n.id}}else if("del"===i)s=await a.del(n).catch((e=>{console.log(`${t}.del catch`,e),o="刪除資料失敗"}));else if("delAll"===i)s=await a.delAll(n).catch((e=>{console.log(`${t}.delAll catch`,e),o="刪除資料失敗"}));else if("mix"===i){if(!Ce(n))return Promise.reject("mix僅支援輸入ltdtDiffByKey結果物件");let i;s=[];let r=ve(n,"add",[]);if(jo(r)>0){try{r=ir(t,e,r,"insert+save")}catch(e){return console.log("adjustData catch",e.toString()),o="調整資料失敗",Promise.reject(o)}if(await a.insert(r).catch((e=>{console.log(`${t}.save catch`,e),o="新增資料失敗"})),be(o))return Promise.reject(o);i=Hn(r,(e=>({id:e.id}))),s=[...s,...i]}let c=ve(n,"del",[]);if(jo(c)>0){if(await a.del(c).catch((e=>{console.log(`${t}.save catch`,e),o="刪除資料失敗"})),be(o))return Promise.reject(o);i=Hn(c,(e=>({id:e.id}))),s=[...s,...i]}let l=ve(n,"diff",[]);if(jo(l)>0){try{l=ir(t,e,l)}catch(e){return console.log("adjustData catch",e.toString()),o="調整資料失敗",Promise.reject(o)}if(await a.save(l).catch((e=>{console.log(`${t}.save catch`,e),o="變更資料失敗"})),be(o))return Promise.reject(o);i=Hn(l,(e=>({id:e.id}))),s=[...s,...i]}}else o=`invalid mode: ${i}`;return be(o)?Promise.reject(o):s}function sr(e,t){return er=e,tr=t,nr}function or(e,t){var i=[];return Ei(e,(function(e,n,s){t(e,n,s)&&i.push(e)})),i}function ar(e,t){return(x(e)?tn:or)(e,Fn(t))}function rr(e,t=null){if(!_e(e)){let e=ht();return e.reject("pms is not an array"),e}return e.reduce(((e,t)=>e.then(t)),Promise.resolve(t))}let cr=[],lr=[],ur=[],pr=null,dr=null,mr=!0,hr=!0;function gr(e){setTimeout((()=>{cr.push(e)}),1)}function fr(e){setTimeout((()=>{lr.push(e)}),1)}function wr(e){setTimeout((()=>{ur.push(e)}),1)}async function yr(e,t,i,n){if(!lt(pr))return Promise.reject("invalid mapOrm");if(mr&&!be(e))return console.log("userId",e),console.log("找不到使用者主鍵"),Promise.reject("找不到使用者主鍵");let s="n";if(mr){if(!lt(dr))return Promise.reject("invalid getUserById");let t=await dr(e);if(!t)return console.log("userId",e),console.log("找不到使用者資訊"),Promise.reject("找不到使用者資訊");s=ve(t,"isAdmin"),"y"!==s&&"n"!==s&&(s="n");let i=ve(t,"isActive");if("y"!==i&&"n"!==i&&(i="n"),"y"!==i)return console.log("userId",e),console.log("oSelf",t),console.log("使用者被停權或無有效使用者資訊"),Promise.reject("使用者被停權或無有效使用者資訊")}if(await Po(cr,(o=>o({woName:t,userId:e,isAdmin:s,mode:i,input:n}))),jo(lr)>0){let o={woName:t,userId:e,isAdmin:s,mode:i,input:n},a=await rr(lr,o);n=a.input}let o=await pr(e,t,i,n);return hr&&"n"===s&&"select"===i&&_e(o)&&(o=ar(o,(e=>!Vt(e,"isActive")||!("n"===e.isActive)))),jo(ur)>0&&(o=await rr(ur,{woName:t,userId:e,isAdmin:s,mode:i,input:n,output:o})),o}function xr(e,t,i,n,s={}){let o=function(e,t,i,n){if(!Ce(e))throw console.log("ds",e),new Error("invalid ds");if(!lt(t))throw console.log("WOrm",t),new Error("invalid WOrm");if(!be(i))throw console.log("url",i),new Error("invalid url");if(!be(n))throw console.log("db",n),new Error("invalid db");let s={};return Ti(bi(e),(e=>{let o=new t({url:i,db:n,cl:e});s[e]=o})),s}(e,t,i,n),a=function(e,t={}){return lt(e)?(pr=e,mr=ve(t,"useCheckUser"),Tt(mr)||(mr=!0),dr=ve(t,"getUserById"),hr=ve(t,"useExcludeWhenNotAdmin"),Tt(hr)||(hr=!0),{addFunCheck:gr,addFunPreProcessing:fr,addFunPostProcessing:wr,procOrm:yr}):Promise.reject("invalid mapOrm")}(sr(e,o),s);return{...Vo,woItems:o,...a}}const Dr=[];for(let e=0;e<256;++e)Dr.push((e+256).toString(16).slice(1));let vr;const Mr=new Uint8Array(16);function Cr(){if(!vr){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vr=crypto.getRandomValues.bind(crypto)}return vr(Mr)}const Ir={};function br(e,t,i){let n;if(e)n=Lr(e.random??e.rng?.()??Cr(),e.msecs,e.seq,t,i);else{const e=Date.now(),s=Cr();!function(e,t,i){e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=i[6]<<23|i[7]<<16|i[8]<<8|i[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++)}(Ir,e,s),n=Lr(s,Ir.msecs,Ir.seq,t,i)}return t??function(e,t=0){return(Dr[e[t+0]]+Dr[e[t+1]]+Dr[e[t+2]]+Dr[e[t+3]]+"-"+Dr[e[t+4]]+Dr[e[t+5]]+"-"+Dr[e[t+6]]+Dr[e[t+7]]+"-"+Dr[e[t+8]]+Dr[e[t+9]]+"-"+Dr[e[t+10]]+Dr[e[t+11]]+Dr[e[t+12]]+Dr[e[t+13]]+Dr[e[t+14]]+Dr[e[t+15]]).toLowerCase()}(n)}function Lr(e,t,i,n,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(s<0||s+16>n.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`)}else n=new Uint8Array(16),s=0;return t??=Date.now(),i??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[s++]=t/1099511627776&255,n[s++]=t/4294967296&255,n[s++]=t/16777216&255,n[s++]=t/65536&255,n[s++]=t/256&255,n[s++]=255&t,n[s++]=112|i>>>28&15,n[s++]=i>>>20&255,n[s++]=128|i>>>14&63,n[s++]=i>>>6&255,n[s++]=i<<2&255|3&e[10],n[s++]=e[11],n[s++]=e[12],n[s++]=e[13],n[s++]=e[14],n[s++]=e[15],n}function Ar(){return br()}function Er(e,t,i=""){if(!Je(t))return{};let n={};return Ti(t,(function(t){n[t]=ve(e,t,i)})),n}let Nr={id:{pk:!0,name:"主鍵",type:"STRING"},ip:{name:"IP",type:"STRING"},timeBlocked:{name:"封鎖時間",type:"STRING"}},Tr={id:{pk:!0,name:"主鍵",type:"STRING"},token:{name:"金鑰",type:"STRING"},userId:{name:"使用者主鍵",type:"STRING"},isApp:{name:"是否為應用系統",type:"STRING"},timeCreate:{name:"創建時間",type:"STRING"},timeEnd:{name:"到期時間",type:"STRING"},timeUpdate:{name:"更新時間",type:"STRING"}},Sr={id:{pk:!0,name:"主鍵",type:"STRING"},order:{name:"順序",type:"INTEGER"},account:{name:"帳號",type:"STRING"},password:{name:"密碼",type:"STRING"},name:{name:"姓名",type:"STRING"},email:{name:"電子郵件",type:"STRING"},description:{name:"描述",type:"TEXT"},from:{name:"來源",type:"STRING"},redir:{name:"登入後轉址",type:"STRING"},isAdmin:{name:"是否為系統管理員",type:"STRING"},timeVerified:{name:"驗證時間",type:"STRING"},timeExpired:{name:"過期時間",type:"STRING"},timeBlocked:{name:"封鎖時間",type:"STRING"},userId:{name:"創建使用者主鍵",type:"STRING"},timeCreate:{name:"創建時間",type:"STRING"},userIdUpdate:{name:"最新變更使用者主鍵",type:"STRING"},timeUpdate:{name:"更新時間",type:"STRING"},isActive:{name:"是否有效",type:"STRING"}};function kr(e,t={}){let i=ve(t,"useCreateStorage");Tt(i)||(i=!1);let{keyTable:n,tableNameCht:s,tableNameEng:o,settings:a,parser:r,funNew:c,funTest:l,ext:u}=e;if(!be(n))throw new Error(`invalid keyTable[${n}]`);if(be(s)||(s=n),be(o)||(o=n),!Ce(a))throw new Error("invalid settings");Ce(u)||(u=null),Ce(r)||(r=null),lt(c)||(c=null);let p=null;lt(l)&&(p=async e=>{if(!Ce(e))throw new Error("invalid wo");if(!Vt(e,n))throw console.log(e),new Error(`keyTable[${n}] is not in wo`);let t=[];try{t=l(),gt(t)&&(t=await t)}catch(e){throw console.log(`keyTable[${n}] funTest catch`,e),new Error(e)}if(0!==jo(t))return i&&await e[n].createStorage(),await e[n].save(t),t});let d={},m={};return Ti(bi(a),(e=>{let t=ve(a,`${e}.name`,"");be(t)&&(d[e]=t);let i=ve(a,`${e}.type`,"");be(i)&&(m[e]=i)})),{...e,keyTable:n,tableNameCht:s,tableNameEng:o,settings:a,keys:bi(a),kpType:m,kpHead:d,parser:r,funNew:c,funTest:l,funTestAndSave:p,ext:u}}let Zr={ips:{keyTable:"ips",tableNameCht:"IP使用者",tableNameEng:"IPs",settings:Nr,funNew:(e={})=>{let t=Er(e,bi(Nr));return t.id=`${Ar()}`,t},funTest:()=>[]},tokens:{keyTable:"tokens",tableNameCht:"金鑰",tableNameEng:"Tokens",settings:Tr,funNew:(e={})=>{let t=Er(e,bi(Tr));return t.id=`${Ar()}`,t.token=`${Ar()}`,t.timeCreate=_o(),t.timeEnd=bt().add(30,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),t.timeUpdate=t.timeCreate,t},funTest:()=>[]},users:{keyTable:"users",tableNameCht:"使用者",tableNameEng:"Users",settings:Sr,funNew:(e={})=>{let t=Er(e,bi(Sr));return t.id=`${Ar()}`,t.timeCreate=_o(),t.userIdUpdate=t.userId,t.timeUpdate=t.timeCreate,t.isActive="y",t},funTest:()=>[]}},jr={};for(let e in Zr)jr[e]=kr(Zr[e],{useCreateStorage:!1});function Xr(e){let t;return t=dt(e,1),"Z"===t?`${e=mt(e,1)}+00:00`:e}let Yr={checkTZ:function(e){let t;return t=dt(e,1),"Z"===t||(t=dt(e,6),!!/[+|-]\d\d:\d\d/.test(t))},delTZ:function(e){let t;return t=dt(e,1),mt(e,"Z"===t?1:6)},normTZ:Xr,sepTZ:function(e){let t=Xr(e);return{t:mt(t,6),tz:dt(t,6)}}};function zr(e){if(!be(e))return!1;if(!Yr.checkTZ(e))return!1;let t=Yr.delTZ(e),i="YYYY-MM-DDTHH:mm:ss.SSS";return t===bt(t,i).format(i)}function Fr(e){let t=ve(e,"timeExpired","");return!!zr(t)&&bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")>=t}function Gr(e){let t=ve(e,"timeBlocked","");return!!zr(t)&&bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")<=t}function Hr(e){return"y"===ve(e,"isActive","")}function Kr(e){let t=zr(ve(e,"timeVerified",""));let i=!Fr(e),n=!Gr(e),s=function(e){return"y"===ve(e,"isAdmin","")}(e),o=Hr(e);return t&&i&&n&&s&&o}var Br={exports:{}};function Wr(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}const Ur=function(e,t,i){var n=i&&i.stringify||Wr;if("object"==typeof e&&null!==e){var s=t.length+1;if(1===s)return e;var o=new Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(t[a]);return o.join(" ")}if("string"!=typeof e)return e;var r=t.length;if(0===r)return e;for(var c="",l=0,u=-1,p=e&&e.length||0,d=0;d<p;){if(37===e.charCodeAt(d)&&d+1<p){switch(u=u>-1?u:0,e.charCodeAt(d+1)){case 100:case 102:if(l>=r)break;if(null==t[l])break;u<d&&(c+=e.slice(u,d)),c+=Number(t[l]),u=d+2,d++;break;case 105:if(l>=r)break;if(null==t[l])break;u<d&&(c+=e.slice(u,d)),c+=Math.floor(Number(t[l])),u=d+2,d++;break;case 79:case 111:case 106:if(l>=r)break;if(void 0===t[l])break;u<d&&(c+=e.slice(u,d));var m=typeof t[l];if("string"===m){c+="'"+t[l]+"'",u=d+2,d++;break}if("function"===m){c+=t[l].name||"<anonymous>",u=d+2,d++;break}c+=n(t[l]),u=d+2,d++;break;case 115:if(l>=r)break;u<d&&(c+=e.slice(u,d)),c+=String(t[l]),u=d+2,d++;break;case 37:u<d&&(c+=e.slice(u,d)),c+="%",u=d+2,d++,l--}++l}++d}if(-1===u)return e;u<p&&(c+=e.slice(u));return c};Br.exports=qr;const Pr=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},Vr={mapHttpRequest:sc,mapHttpResponse:sc,wrapRequestSerializer:oc,wrapResponseSerializer:oc,wrapErrorSerializer:oc,req:sc,res:sc,err:ic,errWithCause:ic};function _r(e,t){return"silent"===e?1/0:t.levels.values[e]}const Rr=Symbol("pino.logFuncs"),Qr=Symbol("pino.hierarchy"),Or={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Jr(e,t){const i={logger:t,parent:e[Qr]};t[Qr]=i}function qr(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const i=e.browser.write||Pr;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){if(Array.isArray(e))return e.filter((function(e){return"!stdSerializers.err"!==e}));return!0===e&&Object.keys(t)}(e.browser.serialize,n);let o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);const a=Object.keys(e.customLevels||{}),r=["error","fatal","warn","info","debug","trace"].concat(a);"function"==typeof i&&r.forEach((function(e){i[e]=i})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");const c=e.level||"info",l=Object.create(i);l.log||(l.log=ac),function(e,t,i){const n={};t.forEach((e=>{n[e]=i[e]?i[e]:Pr[e]||Pr[Or[e]||"log"]||ac})),e[Rr]=n}(l,r,i),Jr({},l),Object.defineProperty(l,"levelVal",{get:function(){return _r(this.level,this)}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,$r(this,u,l,"error"),$r(this,u,l,"fatal"),$r(this,u,l,"warn"),$r(this,u,l,"info"),$r(this,u,l,"debug"),$r(this,u,l,"trace"),a.forEach((e=>{$r(this,u,l,e)}))}});const u={transmit:t,serialize:s,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:r,timestamp:nc(e),messageKey:e.messageKey||"msg",onChild:e.onChild||ac};function p(i,o,a){if(!o)throw new Error("missing bindings for child Pino");a=a||{},s&&o.serializers&&(a.serializers=o.serializers);const r=a.serializers;if(s&&r){var c=Object.assign({},n,r),l=!0===e.browser.serialize?Object.keys(c):s;delete o.serializers,ec([o],l,c,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.bindings=o,c&&(this.serializers=c,this._serialize=l),t&&(this._logEvent=tc([].concat(e._logEvent.bindings,o)))}u.prototype=this;const d=new u(this);return Jr(this,d),d.child=function(...e){return p.call(this,i,...e)},d.level=a.level||this.level,i.onChild(d),d}return l.levels=function(e){const t=e.customLevels||{},i=Object.assign({},qr.levels.values,t),n=Object.assign({},qr.levels.labels,function(e){const t={};return Object.keys(e).forEach((function(i){t[e[i]]=i})),t}(t));return{values:i,labels:n}}(e),l.level=c,l.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=ac,l.serializers=n,l._serialize=s,l._stdErrSerialize=o,l.child=function(...e){return p.call(this,u,...e)},t&&(l._logEvent=tc()),l}function $r(e,t,i,n){if(Object.defineProperty(e,n,{value:_r(e.level,i)>_r(n,i)?ac:i[Rr][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===ac){if(!t.transmit)return;const s=_r(t.transmit.level||e.level,i);if(_r(n,i)<s)return}e[n]=function(e,t,i,n){return s=e[Rr][n],function(){const o=t.timestamp(),a=new Array(arguments.length),r=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pr?Pr:this;for(var c=0;c<a.length;c++)a[c]=arguments[c];var l=!1;if(t.serialize&&(ec(a,this._serialize,this.serializers,this._stdErrSerialize),l=!0),t.asObject||t.formatters?s.call(r,...function(e,t,i,n,s){const{level:o,log:a=e=>e}=s.formatters||{},r=i.slice();let c=r[0];const l={};let u=1+(0|e._childLevel);if(u<1&&(u=1),n&&(l.time=n),o){const i=o(t,e.levels.values[t]);Object.assign(l,i)}else l.level=e.levels.values[t];if(s.asObjectBindingsOnly){if(null!==c&&"object"==typeof c)for(;u--&&"object"==typeof r[0];)Object.assign(l,r.shift());return[a(l),...r]}if(null!==c&&"object"==typeof c){for(;u--&&"object"==typeof r[0];)Object.assign(l,r.shift());c=r.length?Ur(r.shift(),r):void 0}else"string"==typeof c&&(c=Ur(r.shift(),r));return void 0!==c&&(l[s.messageKey]=c),[a(l)]}(this,n,a,o,t)):s.apply(r,a),t.transmit){const s=t.transmit.level||e._level,r=_r(s,i),c=_r(n,i);if(c<r)return;!function(e,t,i,n=!1){const s=t.send,o=t.ts,a=t.methodLevel,r=t.methodValue,c=t.val,l=e._logEvent.bindings;n||ec(i,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=i.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=a,e._logEvent.level.value=r,s(a,e._logEvent,c),e._logEvent=tc(l)}(this,{ts:o,methodLevel:n,methodValue:c,transmitLevel:s,transmitValue:i.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:_r(e._level,i)},a,l)}};var s}(e,t,i,n);const s=function(e){const t=[];e.bindings&&t.push(e.bindings);let i=e[Qr];for(;i.parent;)i=i.parent,i.logger.bindings&&t.push(i.logger.bindings);return t.reverse()}(e);0!==s.length&&(e[n]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(s,e[n]))}function ec(e,t,i,n){for(const s in e)if(n&&e[s]instanceof Error)e[s]=qr.stdSerializers.err(e[s]);else if("object"==typeof e[s]&&!Array.isArray(e[s])&&t)for(const n in e[s])t.indexOf(n)>-1&&n in i&&(e[s][n]=i[n](e[s][n]))}function tc(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ic(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const i in e)void 0===t[i]&&(t[i]=e[i]);return t}function nc(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?rc:cc}function sc(){return{}}function oc(e){return e}function ac(){}function rc(){return!1}function cc(){return Date.now()}qr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},qr.stdSerializers=Vr,qr.stdTimeFunctions=Object.assign({},{nullTime:rc,epochTime:cc,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),Br.exports.default=qr,Br.exports.pino=qr;var lc=Ct(Br.exports);let uc=a.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(du).href:"undefined"==typeof document?location.href:y&&"SCRIPT"===y.tagName.toUpperCase()&&y.src||new URL("w-web-sso.umd.js",document.baseURI).href),pc=e.dirname(uc);let dc=(t={})=>{let i=ve(t,"logFd","");be(i)||(i="./_logs");let n=ve(t,"logInterval","");be(n)||(n="hr");let s=function(t={}){let i=ve(t,"fdLog");be(i)||(i="./_logs");let n=ve(t,"interval");"day"!==n&&"hr"!==n&&(n="day");let s=lc.transport({targets:[{level:"info",target:e.resolve(pc,"./formatter.mjs"),options:{interval:n,fdLog:i}}]});return lc(s)}({fdLog:i,interval:n});return s};var mc,hc,gc={exports:{}},fc={},wc={exports:{}},yc={exports:{}};var xc,Dc,vc,Mc,Cc,Ic,bc,Lc,Ac,Ec,Nc,Tc,Sc,kc,Zc,jc,Xc,Yc,zc,Fc,Gc,Hc,Kc,Bc,Wc,Uc,Pc,Vc,_c={name:"nodemailer",version:"6.10.1",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-ses":"3.731.1",bunyan:"1.8.15",c8:"10.1.3",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.6",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},engines:{node:">=6.0.0"}};function Rc(){if(xc)return yc.exports;xc=1;const e=l,t=u,i=a,n=p,o=s.PassThrough,r=function(){if(hc)return mc;hc=1;const e=a;return mc=class{constructor(e){this.options=e||{},this.cookies=[]}set(t,i){let n,s=e.parse(i||""),o=this.parse(t);return o.domain?(n=o.domain.replace(/^\./,""),(s.hostname.length<n.length||("."+s.hostname).substr(1-n.length)!=="."+n)&&(o.domain=s.hostname)):o.domain=s.hostname,o.path||(o.path=this.getPath(s.pathname)),o.expires||(o.expires=new Date(Date.now()+1e3*(Number(this.options.sessionTimeout||1800)||1800))),this.add(o)}get(e){return this.list(e).map((e=>e.name+"="+e.value)).join("; ")}list(e){let t,i,n=[];for(t=this.cookies.length-1;t>=0;t--)i=this.cookies[t],this.isExpired(i)?this.cookies.splice(t,t):this.match(i,e)&&n.unshift(i);return n}parse(e){let t={};return(e||"").toString().split(";").forEach((e=>{let i,n=e.split("="),s=n.shift().trim().toLowerCase(),o=n.join("=").trim();if(s)switch(s){case"expires":o=new Date(o),"Invalid Date"!==o.toString()&&(t.expires=o);break;case"path":t.path=o;break;case"domain":i=o.toLowerCase(),i.length&&"."!==i.charAt(0)&&(i="."+i),t.domain=i;break;case"max-age":t.expires=new Date(Date.now()+1e3*(Number(o)||0));break;case"secure":t.secure=!0;break;case"httponly":t.httponly=!0;break;default:t.name||(t.name=s,t.value=o)}})),t}match(t,i){let n=e.parse(i||"");return(n.hostname===t.domain||"."===t.domain.charAt(0)&&("."+n.hostname).substr(-t.domain.length)===t.domain)&&this.getPath(n.pathname).substr(0,t.path.length)===t.path&&(!t.secure||"https:"===n.protocol)}add(e){let t,i;if(!e||!e.name)return!1;for(t=0,i=this.cookies.length;t<i;t++)if(this.compare(this.cookies[t],e))return this.isExpired(e)?(this.cookies.splice(t,1),!1):(this.cookies[t]=e,!0);return this.isExpired(e)||this.cookies.push(e),!0}compare(e,t){return e.name===t.name&&e.path===t.path&&e.domain===t.domain&&e.secure===t.secure&&e.httponly==e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let t=(e||"/").split("/");return t.pop(),t=t.join("/").trim(),"/"!==t.charAt(0)&&(t="/"+t),"/"!==t.substr(-1)&&(t+="/"),t}},mc}(),c=_c,m=d;function h(s,a){(a=a||{}).fetchRes=a.fetchRes||new o,a.cookies=a.cookies||new r,a.redirects=a.redirects||0,a.maxRedirects=isNaN(a.maxRedirects)?5:a.maxRedirects,a.cookie&&([].concat(a.cookie||[]).forEach((e=>{a.cookies.set(e,s)})),a.cookie=!1);let l,u,p,d=a.fetchRes,g=i.parse(s),f=(a.method||"").toString().trim().toUpperCase()||"GET",w=!1,y="https:"===g.protocol?t:e,x={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+c.version};if(Object.keys(a.headers||{}).forEach((e=>{x[e.toLowerCase().trim()]=a.headers[e]})),a.userAgent&&(x["user-agent"]=a.userAgent),g.auth&&(x.Authorization="Basic "+Buffer.from(g.auth).toString("base64")),(l=a.cookies.get(s))&&(x.cookie=l),a.body){if(!1!==a.contentType&&(x["Content-Type"]=a.contentType||"application/x-www-form-urlencoded"),"function"==typeof a.body.pipe)x["Transfer-Encoding"]="chunked",u=a.body,u.on("error",(e=>{w||(w=!0,e.type="FETCH",e.sourceUrl=s,d.emit("error",e))}));else{if(a.body instanceof Buffer)u=a.body;else if("object"==typeof a.body)try{u=Buffer.from(Object.keys(a.body).map((e=>{let t=a.body[e].toString().trim();return encodeURIComponent(e)+"="+encodeURIComponent(t)})).join("&"))}catch(e){if(w)return;return w=!0,e.type="FETCH",e.sourceUrl=s,void d.emit("error",e)}else u=Buffer.from(a.body.toString().trim());x["Content-Type"]=a.contentType||"application/x-www-form-urlencoded",x["Content-Length"]=u.length}f=(a.method||"").toString().trim().toUpperCase()||"POST"}let D={method:f,host:g.hostname,path:g.path,port:g.port?g.port:"https:"===g.protocol?443:80,headers:x,rejectUnauthorized:!1,agent:!1};a.tls&&Object.keys(a.tls).forEach((e=>{D[e]=a.tls[e]})),"https:"!==g.protocol||!g.hostname||g.hostname===D.host||m.isIP(g.hostname)||D.servername||(D.servername=g.hostname);try{p=y.request(D)}catch(e){return w=!0,setImmediate((()=>{e.type="FETCH",e.sourceUrl=s,d.emit("error",e)})),d}return a.timeout&&p.setTimeout(a.timeout,(()=>{if(w)return;w=!0,p.abort();let e=new Error("Request Timeout");e.type="FETCH",e.sourceUrl=s,d.emit("error",e)})),p.on("error",(e=>{w||(w=!0,e.type="FETCH",e.sourceUrl=s,d.emit("error",e))})),p.on("response",(e=>{let t;if(!w){switch(e.headers["content-encoding"]){case"gzip":case"deflate":t=n.createUnzip()}if(e.headers["set-cookie"]&&[].concat(e.headers["set-cookie"]||[]).forEach((e=>{a.cookies.set(e,s)})),[301,302,303,307,308].includes(e.statusCode)&&e.headers.location){if(a.redirects++,a.redirects>a.maxRedirects){w=!0;let e=new Error("Maximum redirect count exceeded");return e.type="FETCH",e.sourceUrl=s,d.emit("error",e),void p.abort()}return a.method="GET",a.body=!1,h(i.resolve(s,e.headers.location),a)}if(d.statusCode=e.statusCode,d.headers=e.headers,e.statusCode>=300&&!a.allowErrorResponse){w=!0;let t=new Error("Invalid status code "+e.statusCode);return t.type="FETCH",t.sourceUrl=s,d.emit("error",t),void p.abort()}e.on("error",(e=>{w||(w=!0,e.type="FETCH",e.sourceUrl=s,d.emit("error",e),p.abort())})),t?(e.pipe(t).pipe(d),t.on("error",(e=>{w||(w=!0,e.type="FETCH",e.sourceUrl=s,d.emit("error",e),p.abort())}))):e.pipe(d)}})),setImmediate((()=>{if(u)try{if("function"==typeof u.pipe)return u.pipe(p);p.write(u)}catch(e){return w=!0,e.type="FETCH",e.sourceUrl=s,void d.emit("error",e)}p.end()})),d}return yc.exports=function(e,t){return h(e,t)},yc.exports.Cookies=r,yc.exports}function Qc(){return Dc||(Dc=1,function(e){const i=a,n=c,s=t,o=Rc(),r=m,l=d,u=h,p=3e5;let g;try{g=u.networkInterfaces()}catch(e){}e.exports.networkInterfaces=g;const f=(t,i)=>{let n=e.exports.networkInterfaces;if(!n)return!0;return Object.keys(n).map((e=>n[e])).reduce(((e,t)=>e.concat(t)),[]).filter((e=>!e.internal||i)).filter((e=>e.family==="IPv"+t||e.family===t)).length>0},w=(e,t,i,n)=>{if(!f(e,(i=i||{}).allowInternalNetworkInterfaces))return n(null,[]);(r.Resolver?new r.Resolver(i):r)["resolve"+e](t,((e,t)=>{if(e){switch(e.code){case r.NODATA:case r.NOTFOUND:case r.NOTIMP:case r.SERVFAIL:case r.CONNREFUSED:case r.REFUSED:case"EAI_AGAIN":return n(null,[])}return n(e)}return n(null,Array.isArray(t)?t:[].concat(t||[]))}))},y=e.exports.dnsCache=new Map,x=(e,t)=>e?Object.assign({servername:e.servername,host:e.addresses&&e.addresses.length?1===e.addresses.length?e.addresses[0]:e.addresses[Math.floor(Math.random()*e.addresses.length)]:null},t||{}):Object.assign({},t||{});function D(e,t){let i=!1,n=[],s=0;e.on("error",(e=>{i||(i=!0,t(e))})),e.on("readable",(()=>{let t;for(;null!==(t=e.read());)n.push(t),s+=t.length})),e.on("end",(()=>{if(i)return;let e;i=!0;try{e=Buffer.concat(n,s)}catch(e){return t(e)}t(null,e)}))}e.exports.resolveHostname=(e,t)=>{if(!(e=e||{}).host&&e.servername&&(e.host=e.servername),!e.host||l.isIP(e.host)){let i={addresses:[e.host],servername:e.servername||!1};return t(null,x(i,{cached:!1}))}let i;if(y.has(e.host)&&(i=y.get(e.host),!i.expires||i.expires>=Date.now()))return t(null,x(i.value,{cached:!0}));w(4,e.host,e,((n,s)=>{if(n)return i?t(null,x(i.value,{cached:!0,error:n})):t(n);if(s&&s.length){let i={addresses:s,servername:e.servername||e.host};return y.set(e.host,{value:i,expires:Date.now()+(e.dnsTtl||p)}),t(null,x(i,{cached:!1}))}w(6,e.host,e,((n,s)=>{if(n)return i?t(null,x(i.value,{cached:!0,error:n})):t(n);if(s&&s.length){let i={addresses:s,servername:e.servername||e.host};return y.set(e.host,{value:i,expires:Date.now()+(e.dnsTtl||p)}),t(null,x(i,{cached:!1}))}try{r.lookup(e.host,{all:!0},((n,s)=>{if(n)return i?t(null,x(i.value,{cached:!0,error:n})):t(n);let o=!!s&&s.filter((e=>f(e.family))).map((e=>e.address)).shift();if(s&&s.length&&!o&&console.warn(`Failed to resolve IPv${s[0].family} addresses with current network`),!o&&i)return t(null,x(i.value,{cached:!0}));let a={addresses:o?[o]:[e.host],servername:e.servername||e.host};return y.set(e.host,{value:a,expires:Date.now()+(e.dnsTtl||p)}),t(null,x(a,{cached:!1}))}))}catch(n){return i?t(null,x(i.value,{cached:!0,error:n})):t(n)}}))}))},e.exports.parseConnectionUrl=e=>{e=e||"";let t={};return[i.parse(e,!0)].forEach((e=>{let i;switch(e.protocol){case"smtp:":t.secure=!1;break;case"smtps:":t.secure=!0;break;case"direct:":t.direct=!0}!isNaN(e.port)&&Number(e.port)&&(t.port=Number(e.port)),e.hostname&&(t.host=e.hostname),e.auth&&(i=e.auth.split(":"),t.auth||(t.auth={}),t.auth.user=i.shift(),t.auth.pass=i.join(":")),Object.keys(e.query||{}).forEach((i=>{let n=t,s=i,o=e.query[i];switch(isNaN(o)||(o=Number(o)),o){case"true":o=!0;break;case"false":o=!1}if(0===i.indexOf("tls."))s=i.substr(4),t.tls||(t.tls={}),n=t.tls;else if(i.indexOf(".")>=0)return;s in n||(n[s]=o)}))})),t},e.exports._logFunc=(e,t,i,n,s,...o)=>{let a={};Object.keys(i||{}).forEach((e=>{"level"!==e&&(a[e]=i[e])})),Object.keys(n||{}).forEach((e=>{"level"!==e&&(a[e]=n[e])})),e[t](a,s,...o)},e.exports.getLogger=(t,i)=>{let s={},o=["trace","debug","info","warn","error","fatal"];if(!(t=t||{}).logger)return o.forEach((e=>{s[e]=()=>!1})),s;let a=t.logger;return!0===t.logger&&(a=function(e){let t=0,i=new Map;e.forEach((e=>{e.length>t&&(t=e.length)})),e.forEach((e=>{let n=e.toUpperCase();n.length<t&&(n+=" ".repeat(t-n.length)),i.set(e,n)}));let s=(e,t,s,...o)=>{let a="";t&&("server"===t.tnx?a="S: ":"client"===t.tnx&&(a="C: "),t.sid&&(a="["+t.sid+"] "+a),t.cid&&(a="[#"+t.cid+"] "+a)),(s=n.format(s,...o)).split(/\r?\n/).forEach((t=>{console.log("[%s] %s %s",(new Date).toISOString().substr(0,19).replace(/T/," "),i.get(e),a+t)}))},o={};return e.forEach((e=>{o[e]=s.bind(null,e)})),o}(o)),o.forEach((t=>{s[t]=(n,s,...o)=>{e.exports._logFunc(a,t,i,n,s,...o)}})),s},e.exports.callbackPromise=(e,t)=>function(){let i=Array.from(arguments),n=i.shift();n?t(n):e(...i)},e.exports.parseDataURI=e=>{let t=e,i=t.indexOf(",");if(!i)return e;let n,s=t.substring(i+1),o=t.substring(5,i).split(";"),a=o.length>1&&o[o.length-1];a&&a.indexOf("=")<0&&(n=a.toLowerCase(),o.pop());let r=o.shift()||"application/octet-stream",c={};for(let e of o){let t=e.indexOf("=");if(t>=0){let i=e.substring(0,t),n=e.substring(t+1);c[i]=n}}switch(n){case"base64":s=Buffer.from(s,"base64");break;case"utf8":s=Buffer.from(s);break;default:try{s=Buffer.from(decodeURIComponent(s))}catch(e){s=Buffer.from(s)}s=Buffer.from(s)}return{data:s,encoding:n,contentType:r,params:c}},e.exports.resolveContent=(t,i,n)=>{let a;n||(a=new Promise(((t,i)=>{n=e.exports.callbackPromise(t,i)})));let r,c=t&&t[i]&&t[i].content||t[i],l=("object"==typeof t[i]&&t[i].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!c)return n(null,c);if("object"==typeof c){if("function"==typeof c.pipe)return D(c,((e,s)=>{if(e)return n(e);t[i].content?t[i].content=s:t[i]=s,n(null,s)}));if(/^https?:\/\//i.test(c.path||c.href))return r=o(c.path||c.href),D(r,n);if(/^data:/i.test(c.path||c.href)){let t=e.exports.parseDataURI(c.path||c.href);return t&&t.data?n(null,t.data):n(null,Buffer.from(0))}if(c.path)return D(s.createReadStream(c.path),n)}return"string"!=typeof t[i].content||["utf8","usascii","ascii"].includes(l)||(c=Buffer.from(t[i].content,l)),setImmediate((()=>n(null,c))),a},e.exports.assign=function(){let e=Array.from(arguments),t=e.shift()||{};return e.forEach((e=>{Object.keys(e||{}).forEach((i=>{["tls","auth"].includes(i)&&e[i]&&"object"==typeof e[i]?(t[i]||(t[i]={}),Object.keys(e[i]).forEach((n=>{t[i][n]=e[i][n]}))):t[i]=e[i]}))})),t},e.exports.encodeXText=e=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(e))return e;let t=Buffer.from(e),i="";for(let e=0,n=t.length;e<n;e++){let n=t[e];i+=n<33||n>126||43===n||61===n?"+"+(n<16?"0":"")+n.toString(16).toUpperCase():String.fromCharCode(n)}return i}}(wc)),wc.exports}function Oc(){if(Mc)return vc;Mc=1;const t=e,i="application/octet-stream",n=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),s=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);return vc={detectMimeType(e){if(!e)return i;let n=t.parse(e),o=(n.ext.substr(1)||n.name||"").split("?").shift().trim().toLowerCase(),a=i;return s.has(o)&&(a=s.get(o)),Array.isArray(a)?a[0]:a},detectExtension(e){if(!e)return"bin";let t=(e||"").toLowerCase().trim().split("/"),i=t.shift().trim(),s=t.join("/").trim();if(n.has(i+"/"+s)){let e=n.get(i+"/"+s);return Array.isArray(e)?e[0]:e}return"text"===i?"txt":"bin"}}}function Jc(){if(Ic)return Cc;Ic=1;const e=2147483647,t=36,i=/^xn--/,n=/[^\0-\x7F]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,r=String.fromCharCode;function c(e){throw new RangeError(o[e])}function l(e,t){const i=e.split("@");let n="";i.length>1&&(n=i[0]+"@",e=i[1]);const o=function(e,t){const i=[];let n=e.length;for(;n--;)i[n]=t(e[n]);return i}((e=e.replace(s,".")).split("."),t).join(".");return n+o}function u(e){const t=[];let i=0;const n=e.length;for(;i<n;){const s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){const n=e.charCodeAt(i++);56320==(64512&n)?t.push(((1023&s)<<10)+(1023&n)+65536):(t.push(s),i--)}else t.push(s)}return t}const p=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},d=function(e,i,n){let s=0;for(e=n?a(e/700):e>>1,e+=a(e/i);e>455;s+=t)e=a(e/35);return a(s+36*e/(e+38))},m=function(i){const n=[],s=i.length;let o=0,r=128,l=72,u=i.lastIndexOf("-");u<0&&(u=0);for(let e=0;e<u;++e)i.charCodeAt(e)>=128&&c("not-basic"),n.push(i.charCodeAt(e));for(let m=u>0?u+1:0;m<s;){const u=o;for(let n=1,r=t;;r+=t){m>=s&&c("invalid-input");const u=(p=i.charCodeAt(m++))>=48&&p<58?p-48+26:p>=65&&p<91?p-65:p>=97&&p<123?p-97:t;u>=t&&c("invalid-input"),u>a((e-o)/n)&&c("overflow"),o+=u*n;const d=r<=l?1:r>=l+26?26:r-l;if(u<d)break;const h=t-d;n>a(e/h)&&c("overflow"),n*=h}const h=n.length+1;l=d(o-u,h,0==u),a(o/h)>e-r&&c("overflow"),r+=a(o/h),o%=h,n.splice(o++,0,r)}var p;return String.fromCodePoint(...n)},h=function(i){const n=[],s=(i=u(i)).length;let o=128,l=0,m=72;for(const e of i)e<128&&n.push(r(e));const h=n.length;let g=h;for(h&&n.push("-");g<s;){let s=e;for(const e of i)e>=o&&e<s&&(s=e);const u=g+1;s-o>a((e-l)/u)&&c("overflow"),l+=(s-o)*u,o=s;for(const s of i)if(s<o&&++l>e&&c("overflow"),s===o){let e=l;for(let i=t;;i+=t){const s=i<=m?1:i>=m+26?26:i-m;if(e<s)break;const o=e-s,c=t-s;n.push(r(p(s+o%c,0))),e=a(o/c)}n.push(r(p(e,0))),m=d(l,u,g===h),l=0,++g}++l,++o}return n.join("")};return Cc={version:"2.3.1",ucs2:{decode:u,encode:e=>String.fromCodePoint(...e)},decode:m,encode:h,toASCII:function(e){return l(e,(function(e){return n.test(e)?"xn--"+h(e):e}))},toUnicode:function(e){return l(e,(function(e){return i.test(e)?m(e.slice(4).toLowerCase()):e}))}}}function qc(){if(Lc)return bc;Lc=1;const e=s.Transform;function t(e){return"string"==typeof e&&(e=Buffer.from(e,"utf-8")),e.toString("base64")}function i(e,t){if(t=t||76,(e=(e||"").toString()).length<=t)return e;let i=[],n=0,s=1024*t;for(;n<e.length;){let o=e.substr(n,s).replace(new RegExp(".{"+t+"}","g"),"$&\r\n").trim();i.push(o),n+=s}return i.join("\r\n").trim()}return bc={encode:t,wrap:i,Encoder:class extends e{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,n,s){if("buffer"!==n&&(e=Buffer.from(e,n)),!e||!e.length)return setImmediate(s);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let o=this._curLine+t(e);if(this.options.lineLength){o=i(o,this.options.lineLength);let e=o.lastIndexOf("\n");e<0?(this._curLine=o,o=""):e===o.length-1?this._curLine="":(this._curLine=o.substr(e+1),o=o.substr(0,e+1))}o&&(this.outputBytes+=o.length,this.push(Buffer.from(o,"ascii"))),setImmediate(s)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=t(this._remainingBytes)),this._curLine&&(this._curLine=i(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}}}}function $c(){if(Ec)return Ac;Ec=1;const e=s.Transform;function t(e){"string"==typeof e&&(e=Buffer.from(e,"utf-8"));let t,i=[[9],[10],[13],[32,60],[62,126]],s="";for(let o=0,a=e.length;o<a;o++)t=e[o],n(t,i)&&(32!==t&&9!==t||o!==a-1&&10!==e[o+1]&&13!==e[o+1])?s+=String.fromCharCode(t):s+="="+(t<16?"0":"")+t.toString(16).toUpperCase();return s}function i(e,t){if(t=t||76,(e=(e||"").toString()).length<=t)return e;let i,n,s,o=0,a=e.length,r=Math.floor(t/3),c="";for(;o<a;)if(s=e.substr(o,t),i=s.match(/\r\n/))s=s.substr(0,i.index+i[0].length),c+=s,o+=s.length;else if("\n"!==s.substr(-1))if(i=s.substr(-r).match(/\n.*?$/))s=s.substr(0,s.length-(i[0].length-1)),c+=s,o+=s.length;else{if(s.length>t-r&&(i=s.substr(-r).match(/[ \t.,!?][^ \t.,!?]*$/)))s=s.substr(0,s.length-(i[0].length-1));else if(s.match(/[=][\da-f]{0,2}$/i))for((i=s.match(/[=][\da-f]{0,1}$/i))&&(s=s.substr(0,s.length-i[0].length));s.length>3&&s.length<a-o&&!s.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(i=s.match(/[=][\da-f]{2}$/gi))&&(n=parseInt(i[0].substr(1,2),16),!(n<128))&&(s=s.substr(0,s.length-3),!(n>=192)););o+s.length<a&&"\n"!==s.substr(-1)?(s.length===t&&s.match(/[=][\da-f]{2}$/i)?s=s.substr(0,s.length-3):s.length===t&&(s=s.substr(0,s.length-1)),o+=s.length,s+="=\r\n"):o+=s.length,c+=s}else c+=s,o+=s.length;return c}function n(e,t){for(let i=t.length-1;i>=0;i--)if(t[i].length){if(1===t[i].length&&e===t[i][0])return!0;if(2===t[i].length&&e>=t[i][0]&&e<=t[i][1])return!0}return!1}return Ac={encode:t,wrap:i,Encoder:class extends e{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,n,s){let o;if("buffer"!==n&&(e=Buffer.from(e,n)),!e||!e.length)return s();this.inputBytes+=e.length,this.options.lineLength?(o=this._curLine+t(e),o=i(o,this.options.lineLength),o=o.replace(/(^|\n)([^\n]*)$/,((e,t,i)=>(this._curLine=i,t))),o&&(this.outputBytes+=o.length,this.push(o))):(o=t(e),this.outputBytes+=o.length,this.push(o,"ascii")),s()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}}}}function el(){if(Tc)return Nc;Tc=1;const e=qc(),t=$c(),i=Oc();return Nc={isPlainText:(e,t)=>"string"==typeof e&&!(t?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(e),hasLongerLines:(e,t)=>e.length>131072||new RegExp("^.{"+(t+1)+",}","m").test(e),encodeWord(i,n,s){let o;if((s=s||0)&&s>12&&(s-=12),"Q"===(n=(n||"Q").toString().toUpperCase().trim().charAt(0))?o=t.encode(i).replace(/[^a-z0-9!*+\-/=]/gi,(e=>{let t=e.charCodeAt(0).toString(16).toUpperCase();return" "===e?"_":"="+(1===t.length?"0"+t:t)})):"B"===n&&(o="string"==typeof i?i:e.encode(i),s=s?Math.max(3,(s-s%4)/4*3):0),s&&("B"!==n?o:e.encode(i)).length>s)if("Q"===n)o=this.splitMimeEncodedString(o,s).join("?= =?UTF-8?"+n+"?");else{let t=[],i="";for(let n=0,a=o.length;n<a;n++){let r=o.charAt(n);/[\ud83c\ud83d\ud83e]/.test(r)&&n<a-1&&(r+=o.charAt(++n)),Buffer.byteLength(i+r)<=s||0===n?i+=r:(t.push(e.encode(i)),i=r)}i&&t.push(e.encode(i)),o=t.length>1?t.join("?= =?UTF-8?"+n+"?"):t.join("")}else"B"===n&&(o=e.encode(i));return"=?UTF-8?"+n+"?"+o+("?="===o.substr(-2)?"":"?=")},encodeWords(e,t,i,n){let s;i=i||0;let o=e.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!o)return e;if(n)return this.encodeWord(e,t,i);let a=e.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!a)return e;let r=o.index+(o[0].match(/[^\s]/)||{index:0}).index,c=a.index+(a[1]||"").length;return s=(r?e.substr(0,r):"")+this.encodeWord(e.substring(r,c),t||"Q",i)+(c<e.length?e.substr(c):""),s},buildHeaderValue(e){let t=[];return Object.keys(e.params||{}).forEach((i=>{let n=e.params[i];!this.isPlainText(n,!0)||n.length>=75?this.buildHeaderParam(i,n,50).forEach((e=>{/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(e.value)&&"*"!==e.key.substr(-1)?t.push(e.key+"="+JSON.stringify(e.value)):t.push(e.key+"="+e.value)})):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n)?t.push(i+"="+JSON.stringify(n)):t.push(i+"="+n)})),e.value+(t.length?"; "+t.join("; "):"")},buildHeaderParam(e,t,i){let n,s,o,a,r,c,l=[],u="string"==typeof t?t:(t||"").toString(),p=0;if(i=i||50,this.isPlainText(t,!0)){if(u.length<=i)return[{key:e,value:u}];u=u.replace(new RegExp(".{"+i+"}","g"),(e=>(l.push({line:e}),""))),u&&l.push({line:u})}else{if(/[\uD800-\uDBFF]/.test(u)){for(n=[],r=0,c=u.length;r<c;r++)s=u.charAt(r),o=s.charCodeAt(0),o>=55296&&o<=56319&&r<c-1?(s+=u.charAt(r+1),n.push(s),r++):n.push(s);u=n}a="utf-8''";let e=!0;for(p=0,r=0,c=u.length;r<c;r++){if(s=u[r],e)s=this.safeEncodeURIComponent(s);else if(s=" "===s?s:this.safeEncodeURIComponent(s),s!==u[r]){if(!((this.safeEncodeURIComponent(a)+s).length>=i)){e=!0,r=p,a="";continue}l.push({line:a,encoded:e}),a="",p=r-1}(a+s).length>=i?(l.push({line:a,encoded:e}),a=s=" "===u[r]?" ":this.safeEncodeURIComponent(u[r]),s===u[r]?(e=!1,p=r-1):e=!0):a+=s}a&&l.push({line:a,encoded:e})}return l.map(((t,i)=>({key:e+"*"+i+(t.encoded?"*":""),value:t.line})))},parseHeaderValue(e){let t,i={value:!1,params:{}},n=!1,s="",o="value",a=!1,r=!1;for(let c=0,l=e.length;c<l;c++)if(t=e.charAt(c),"key"===o){if("="===t){n=s.trim().toLowerCase(),o="value",s="";continue}s+=t}else{if(r)s+=t;else{if("\\"===t){r=!0;continue}a&&t===a?a=!1:a||'"'!==t?a||";"!==t?s+=t:(!1===n?i.value=s.trim():i.params[n]=s.trim(),o="key",s=""):a=t}r=!1}return"value"===o?!1===n?i.value=s.trim():i.params[n]=s.trim():s.trim()&&(i.params[s.trim().toLowerCase()]=""),Object.keys(i.params).forEach((e=>{let t,n,s,o;(s=e.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(t=e.substr(0,s.index),n=Number(s[2]||s[3])||0,i.params[t]&&"object"==typeof i.params[t]||(i.params[t]={charset:!1,values:[]}),o=i.params[e],0===n&&"*"===s[0].substr(-1)&&(s=o.match(/^([^']*)'[^']*'(.*)$/))&&(i.params[t].charset=s[1]||"iso-8859-1",o=s[2]),i.params[t].values[n]=o,delete i.params[e])})),Object.keys(i.params).forEach((e=>{let t;i.params[e]&&Array.isArray(i.params[e].values)&&(t=i.params[e].values.map((e=>e||"")).join(""),i.params[e].charset?i.params[e]="=?"+i.params[e].charset+"?Q?"+t.replace(/[=?_\s]/g,(e=>{let t=e.charCodeAt(0).toString(16);return" "===e?"_":"%"+(t.length<2?"0":"")+t})).replace(/%/g,"=")+"?=":i.params[e]=t)})),i},detectExtension:e=>i.detectExtension(e),detectMimeType:e=>i.detectMimeType(e),foldLines(e,t,i){t=t||76;let n,s,o=0,a=(e=(e||"").toString()).length,r="";for(;o<a;){if(n=e.substr(o,t),n.length<t){r+=n;break}(s=n.match(/^[^\n\r]*(\r?\n|\r)/))?(n=s[0],r+=n,o+=n.length):((s=n.match(/(\s+)[^\s]*$/))&&s[0].length-(i?(s[1]||"").length:0)<n.length?n=n.substr(0,n.length-(s[0].length-(i?(s[1]||"").length:0))):(s=e.substr(o+n.length).match(/^[^\s]+(\s*)/))&&(n+=s[0].substr(0,s[0].length-(i?0:(s[1]||"").length))),r+=n,o+=n.length,o<a&&(r+="\r\n"))}return r},splitMimeEncodedString:(e,t)=>{let i,n,s,o,a=[];for(t=Math.max(t||0,12);e.length;){for(i=e.substr(0,t),(n=i.match(/[=][0-9A-F]?$/i))&&(i=i.substr(0,n.index)),o=!1;!o;)o=!0,(n=e.substr(i.length).match(/^[=]([0-9A-F]{2})/i))&&(s=parseInt(n[1],16),s<194&&s>127&&(i=i.substr(0,i.length-3),o=!1));i.length&&a.push(i),e=e.substr(i.length)}return a},encodeURICharComponent:e=>{let t="",i=e.charCodeAt(0).toString(16).toUpperCase();if(i.length%2&&(i="0"+i),i.length>2)for(let e=0,n=i.length/2;e<n;e++)t+="%"+i.substr(e,2);else t+="%"+i;return t},safeEncodeURIComponent(e){e=(e||"").toString();try{e=encodeURIComponent(e)}catch(t){return e.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return e.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,(e=>this.encodeURICharComponent(e)))}}}function tl(){if(kc)return Sc;kc=1;class e{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e=[];for(let e=0,t=this.str.length;e<t;e++){let i=this.str.charAt(e),n=e<t-1?this.str.charAt(e+1):null;this.checkChar(i,n)}return this.list.forEach((t=>{t.value=(t.value||"").toString().trim(),t.value&&e.push(t)})),e}checkChar(e,t){if(this.escaped);else{if(e===this.operatorExpecting)return this.node={type:"operator",value:e},t&&![" ","\t","\r","\n",",",";"].includes(t)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",void(this.escaped=!1);if(!this.operatorExpecting&&e in this.operators)return this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],void(this.escaped=!1);if(['"',"'"].includes(this.operatorExpecting)&&"\\"===e)return void(this.escaped=!0)}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),"\n"===e&&(e=" "),(e.charCodeAt(0)>=33||[" ","\t"].includes(e))&&(this.node.value+=e),this.escaped=!1}}function t(i,n){n=n||{};let s=new e(i).tokenize(),o=[],a=[],r=[];if(s.forEach((e=>{"operator"!==e.type||","!==e.value&&";"!==e.value?a.push(e):(a.length&&o.push(a),a=[])})),a.length&&o.push(a),o.forEach((e=>{e=function(e){let i,n,s,o=!1,a="text",r=[],c={address:[],comment:[],group:[],text:[]};for(n=0,s=e.length;n<s;n++){let t=e[n],i=n?e[n-1]:null;if("operator"===t.type)switch(t.value){case"<":a="address";break;case"(":a="comment";break;case":":a="group",o=!0;break;default:a="text"}else t.value&&("address"===a&&(t.value=t.value.replace(/^[^<]*<\s*/,"")),i&&i.noBreak&&c[a].length?c[a][c[a].length-1]+=t.value:c[a].push(t.value))}if(!c.text.length&&c.comment.length&&(c.text=c.comment,c.comment=[]),o)c.text=c.text.join(" "),r.push({name:c.text||i&&i.name,group:c.group.length?t(c.group.join(",")):[]});else{if(!c.address.length&&c.text.length){for(n=c.text.length-1;n>=0;n--)if(c.text[n].match(/^[^@\s]+@[^@\s]+$/)){c.address=c.text.splice(n,1);break}let e=function(e){return c.address.length?e:(c.address=[e.trim()]," ")};if(!c.address.length)for(n=c.text.length-1;n>=0&&(c.text[n]=c.text[n].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,e).trim(),!c.address.length);n--);}if(!c.text.length&&c.comment.length&&(c.text=c.comment,c.comment=[]),c.address.length>1&&(c.text=c.text.concat(c.address.splice(1))),c.text=c.text.join(" "),c.address=c.address.join(" "),!c.address&&o)return[];i={address:c.address||c.text||"",name:c.text||c.address||""},i.address===i.name&&((i.address||"").match(/@/)?i.name="":i.address=""),r.push(i)}return r}(e),e.length&&(r=r.concat(e))})),n.flatten){let e=[],t=i=>{i.forEach((i=>{if(i.group)return t(i.group);e.push(i)}))};return t(r),e}return r}return Sc=t}function il(){if(Yc)return Xc;Yc=1;const e=s.Transform;return Xc=class extends e{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,t,i){let n,s=0;for(let t=0,i=e.length;t<i;t++)10===e[t]&&(t&&13!==e[t-1]||!t&&13!==this.lastByte)&&(t>s&&(n=e.slice(s,t),this.push(n)),this.push(Buffer.from("\r\n")),s=t+1);s&&s<e.length?(n=e.slice(s),this.push(n)):s||this.push(e),this.lastByte=e[e.length-1],i()}}}function nl(){if(Hc)return Gc;Hc=1;const e=g,i=t,n=Jc(),o=s.PassThrough,a=Qc(),r=el(),c=$c(),l=qc(),u=tl(),p=Rc(),d=function(){if(jc)return Zc;jc=1;const e=s.Transform;return Zc=class extends e{constructor(){super(),this.lastByte=!1}_transform(e,t,i){e.length&&(this.lastByte=e[e.length-1]),this.push(e),i()}_flush(e){return 10===this.lastByte?e():13===this.lastByte?(this.push(Buffer.from("\n")),e()):(this.push(Buffer.from("\r\n")),e())}}}(),m=il(),h=function(){if(Fc)return zc;Fc=1;const e=s.Transform;return zc=class extends e{constructor(e){super(e),this.options=e||{}}_transform(e,t,i){let n,s=0;for(let t=0,i=e.length;t<i;t++)13===e[t]&&(n=e.slice(s,t),s=t+1,this.push(n));s&&s<e.length?(n=e.slice(s),this.push(n)):s||this.push(e),i()}}}();class f{constructor(t,i){this.nodeCounter=0,i=i||{},this.baseBoundary=i.baseBoundary||e.randomBytes(8).toString("hex"),this.boundaryPrefix=i.boundaryPrefix||"--_NmP",this.disableFileAccess=!!i.disableFileAccess,this.disableUrlAccess=!!i.disableUrlAccess,this.normalizeHeaderKey=i.normalizeHeaderKey,this.date=new Date,this.rootNode=i.rootNode||this,this.keepBcc=!!i.keepBcc,i.filename&&(this.filename=i.filename,t||(t=r.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(i.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=i.parentNode,this.hostname=i.hostname,this.newline=i.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],t&&this.setHeader("Content-Type",t)}createChild(e,t){t||"object"!=typeof e||(t=e,e=void 0);let i=new f(e,t);return this.appendChild(i),i}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach(((t,i)=>{t===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[i]=e)})),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,t){let i,n=!1;if(!t&&e&&"object"==typeof e)return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach((e=>{this.setHeader(e.key,e.value)})):Object.keys(e).forEach((t=>{this.setHeader(t,e[t])})),this;i={key:e=this._normalizeHeaderKey(e),value:t};for(let t=0,s=this._headers.length;t<s;t++)this._headers[t].key===e&&(n?(this._headers.splice(t,1),t--,s--):(this._headers[t]=i,n=!0));return n||this._headers.push(i),this}addHeader(e,t){return!t&&e&&"object"==typeof e?(e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach((e=>{this.addHeader(e.key,e.value)})):Object.keys(e).forEach((t=>{this.addHeader(t,e[t])})),this):Array.isArray(t)?(t.forEach((t=>{this.addHeader(e,t)})),this):(this._headers.push({key:this._normalizeHeaderKey(e),value:t}),this)}getHeader(e){e=this._normalizeHeaderKey(e);for(let t=0,i=this._headers.length;t<i;t++)if(this._headers[t].key===e)return this._headers[t].value}setContent(e){return this.content=e,"function"==typeof this.content.pipe?(this._contentErrorHandler=e=>{this.content.removeListener("error",this._contentErrorHandler),this.content=e},this.content.once("error",this._contentErrorHandler)):"string"==typeof this.content&&(this._isPlainText=r.isPlainText(this.content),this._isPlainText&&r.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let t;e||(t=new Promise(((t,i)=>{e=a.callbackPromise(t,i)})));let i=this.createReadStream(),n=[],s=0,o=!1;return i.on("readable",(()=>{let e;for(;null!==(e=i.read());)n.push(e),s+=e.length})),i.once("error",(t=>{if(!o)return o=!0,e(t)})),i.once("end",(t=>{if(!o)return o=!0,t&&t.length&&(n.push(t),s+=t.length),e(null,Buffer.concat(n,s))})),t}getTransferEncoding(){let e=!1,t=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),e&&["base64","quoted-printable"].includes(e)||(/^text\//i.test(t)?e=this._isPlainText&&!this._hasLongLines?"7bit":"string"==typeof this.content||this.content instanceof Buffer?"Q"===this._getTextEncoding(this.content)?"quoted-printable":"base64":"B"===this.textEncoding?"base64":"quoted-printable":/^(multipart|message)\//i.test(t)||(e=e||"base64"))),e}buildHeaders(){let e=this.getTransferEncoding(),t=[];if(e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let e=this._headers.length-2;e>=0;e--){let t=this._headers[e];"Content-Type"===t.key&&(this._headers.splice(e,1),this._headers.push(t))}}return this._headers.forEach((e=>{let i,n,s=e.key,o=e.value,a={};if(!o||"object"!=typeof o||["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(s)||(Object.keys(o).forEach((e=>{"value"!==e&&(a[e]=o[e])})),o=(o.value||"").toString(),o.trim()))if(a.prepared)a.foldLines?t.push(r.foldLines(s+": "+o)):t.push(s+": "+o);else{switch(e.key){case"Content-Disposition":i=r.parseHeaderValue(o),this.filename&&(i.params.filename=this.filename),o=r.buildHeaderValue(i);break;case"Content-Type":i=r.parseHeaderValue(o),this._handleContentType(i),i.value.match(/^text\/plain\b/)&&"string"==typeof this.content&&/[\u0080-\uFFFF]/.test(this.content)&&(i.params.charset="utf-8"),o=r.buildHeaderValue(i),this.filename&&(n=this._encodeWords(this.filename),(n!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n))&&(n='"'+n+'"'),o+="; name="+n);break;case"Bcc":if(!this.keepBcc)return}if(o=this._encodeHeaderValue(s,o),(o||"").toString().trim()){if("function"==typeof this.normalizeHeaderKey){let e=this.normalizeHeaderKey(s,o);e&&"string"==typeof e&&e.length&&(s=e)}t.push(r.foldLines(s+": "+o,76))}}})),t.join("\r\n")}createReadStream(e){let t,i=new o(e=e||{}),n=i;this.stream(i,e,(e=>{e?n.emit("error",e):i.end()}));for(let e=0,i=this._transforms.length;e<i;e++)t="function"==typeof this._transforms[e]?this._transforms[e]():this._transforms[e],n.once("error",(e=>{t.emit("error",e)})),n=n.pipe(t);t=new d,n.once("error",(e=>{t.emit("error",e)})),n=n.pipe(t);for(let e=0,i=this._processFuncs.length;e<i;e++)t=this._processFuncs[e],n=t(n);if(this.newline){const e=["win","windows","dos","\r\n"].includes(this.newline.toString().toLowerCase())?new m:new h,t=n.pipe(e);return n.on("error",(e=>t.emit("error",e))),t}return n}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,t,i){let n,s,o=this.getTransferEncoding(),a=!1,r=e=>{a||(a=!0,i(e))},u=()=>{let i=0,n=()=>{if(i>=this.childNodes.length)return e.write("\r\n--"+this.boundary+"--\r\n"),r();let s=this.childNodes[i++];e.write((i>1?"\r\n":"")+"--"+this.boundary+"\r\n"),s.stream(e,t,(e=>{if(e)return r(e);setImmediate(n)}))};if(!this.multipart)return r();setImmediate(n)},p=()=>{if(!this.content)return setImmediate(u);{if("[object Error]"===Object.prototype.toString.call(this.content))return r(this.content);"function"==typeof this.content.pipe&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=e=>r(e),this.content.once("error",this._contentErrorHandler));let i=()=>{["quoted-printable","base64"].includes(o)?(n=new("base64"===o?l:c).Encoder(t),n.pipe(e,{end:!1}),n.once("end",u),n.once("error",(e=>r(e))),s=this._getStream(this.content),s.pipe(n)):(s=this._getStream(this.content),s.pipe(e,{end:!1}),s.once("end",u)),s.once("error",(e=>r(e)))};if(this.content._resolve){let e=[],t=0,n=!1,s=this._getStream(this.content);s.on("error",(e=>{n||(n=!0,r(e))})),s.on("readable",(()=>{let i;for(;null!==(i=s.read());)e.push(i),t+=i.length})),s.on("end",(()=>{n||(n=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(e,t),setImmediate(i))}))}else setImmediate(i)}};this._raw?setImmediate((()=>{if("[object Error]"===Object.prototype.toString.call(this._raw))return r(this._raw);"function"==typeof this._raw.pipe&&this._raw.removeListener("error",this._contentErrorHandler);let t=this._getStream(this._raw);t.pipe(e,{end:!1}),t.on("error",(t=>e.emit("error",t))),t.on("end",u)})):(e.write(this.buildHeaders()+"\r\n\r\n"),setImmediate(p))}setEnvelope(e){let t;this._envelope={from:!1,to:[]},e.from&&(t=[],this._convertAddresses(this._parseAddresses(e.from),t),t=t.filter((e=>e&&e.address)),t.length&&t[0]&&(this._envelope.from=t[0].address)),["to","cc","bcc"].forEach((t=>{e[t]&&this._convertAddresses(this._parseAddresses(e[t]),this._envelope.to)})),this._envelope.to=this._envelope.to.map((e=>e.address)).filter((e=>e));let i=["to","cc","bcc","from"];return Object.keys(e).forEach((t=>{i.includes(t)||(this._envelope[t]=e[t])})),this}getAddresses(){let e={};return this._headers.forEach((t=>{let i=t.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(i)&&(Array.isArray(e[i])||(e[i]=[]),this._convertAddresses(this._parseAddresses(t.value),e[i]))})),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach((t=>{let i=[];"From"===t.key||!e.from&&["Reply-To","Sender"].includes(t.key)?(this._convertAddresses(this._parseAddresses(t.value),i),i.length&&i[0]&&(e.from=i[0].address)):["To","Cc","Bcc"].includes(t.key)&&this._convertAddresses(this._parseAddresses(t.value),e.to)})),e.to=e.to.map((e=>e.address)),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&"function"==typeof this._raw.pipe&&(this._contentErrorHandler=e=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=e},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let t;return e._resolvedValue?(t=new o,setImmediate((()=>{try{t.end(e._resolvedValue)}catch(e){t.emit("error",e)}})),t):"function"==typeof e.pipe?e:e&&"string"==typeof e.path&&!e.href?this.disableFileAccess?(t=new o,setImmediate((()=>t.emit("error",new Error("File access rejected for "+e.path)))),t):i.createReadStream(e.path):e&&"string"==typeof e.href?this.disableUrlAccess?(t=new o,setImmediate((()=>t.emit("error",new Error("Url access rejected for "+e.href)))),t):p(e.href,{headers:e.httpHeaders}):(t=new o,setImmediate((()=>{try{t.end(e||"")}catch(e){t.emit("error",e)}})),t)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map((e=>e&&e.address?(e.address=this._normalizeAddress(e.address),e.name=e.name||"",[e]):u(e))))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,(e=>e.toUpperCase())).replace(/^Content-Features$/i,"Content-features")}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=!!/^multipart\//i.test(this.contentType)&&this.contentType.substr(this.contentType.indexOf("/")+1),this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,t){switch(e=this._normalizeHeaderKey(e)){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(t));case"Message-ID":case"In-Reply-To":case"Content-Id":return"<"!==(t=(t||"").toString().replace(/\r?\n|\r/g," ")).charAt(0)&&(t="<"+t),">"!==t.charAt(t.length-1)&&(t+=">"),t;case"References":return(t=[].concat.apply([],[].concat(t||"").map((e=>(e=(e||"").toString().replace(/\r?\n|\r/g," ").trim()).replace(/<[^>]*>/g,(e=>e.replace(/\s/g,""))).split(/\s+/)))).map((e=>("<"!==e.charAt(0)&&(e="<"+e),">"!==e.charAt(e.length-1)&&(e+=">"),e)))).join(" ").trim();case"Date":return"[object Date]"===Object.prototype.toString.call(t)?t.toUTCString().replace(/GMT/,"+0000"):(t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t));case"Content-Type":case"Content-Disposition":return(t||"").toString().replace(/\r?\n|\r/g," ");default:return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t)}}_convertAddresses(e,t){let i=[];return t=t||[],[].concat(e||[]).forEach((e=>{if(e.address)e.address=this._normalizeAddress(e.address),e.name?e.name&&i.push(`${this._encodeAddressName(e.name)} <${e.address}>`):i.push(e.address.indexOf(" ")>=0?`<${e.address}>`:`${e.address}`),e.address&&(t.filter((t=>t.address===e.address)).length||t.push(e));else if(e.group){let n=(e.group.length?this._convertAddresses(e.group,t):"").trim();i.push(`${this._encodeAddressName(e.name)}:${n};`)}})),i.join(", ")}_normalizeAddress(e){let t=(e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim()).lastIndexOf("@");if(t<0)return e;let i,s=e.substr(0,t),o=e.substr(t+1);try{i=n.toASCII(o.toLowerCase())}catch(e){}return s.indexOf(" ")>=0&&('"'!==s.charAt(0)&&(s='"'+s),'"'!==s.substr(-1)&&(s+='"')),`${s}@${i}`}_encodeAddressName(e){return/^[\w ]*$/.test(e)?e:/^[\x20-\x7e]*$/.test(e)?'"'+e.replace(/([\\"])/g,"\\$1")+'"':r.encodeWord(e,this._getTextEncoding(e),52)}_encodeWords(e){return r.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let t,i,n=this.textEncoding;return n||(i=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,t=(e.match(/[a-z]/gi)||[]).length,n=i<t?"Q":"B"),n}_generateMessageId(){return"<"+[2,2,2,6].reduce(((t,i)=>t+"-"+e.randomBytes(i).toString("hex")),e.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}}return Gc=f}var sl,ol,al,rl,cl,ll,ul,pl,dl,ml,hl,gl,fl,wl,yl,xl,Dl,vl={exports:{}};function Ml(){if(sl)return vl.exports;sl=1;const e=Jc(),t=el(),i=g;function n(e,t,i){let n=new Set,o=new Set,a=new Map;(i||"").toLowerCase().split(":").forEach((e=>{o.add(e.trim())})),(t||"").toLowerCase().split(":").filter((e=>!o.has(e.trim()))).forEach((e=>{n.add(e.trim())}));for(let t=e.length-1;t>=0;t--){let i=e[t];n.has(i.key)&&!a.has(i.key)&&a.set(i.key,s(i.line))}let r=[],c=[];return n.forEach((e=>{a.has(e)&&(c.push(e),r.push(e+":"+a.get(e)))})),{headers:r.join("\r\n")+"\r\n",fieldNames:c.join(":")}}function s(e){return e.substr(e.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}return vl.exports=(o,a,r,c)=>{let l,u,p=n(o,(c=c||{}).headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",c.skipFields),d=function(i,n,s,o,a){let r=["v=1","a=rsa-"+o,"c=relaxed/relaxed","d="+e.toASCII(i),"q=dns/txt","s="+n,"bh="+a,"h="+s].join("; ");return t.foldLines("DKIM-Signature: "+r,76)+";\r\n b="}(c.domainName,c.keySelector,p.fieldNames,a,r);p.headers+="dkim-signature:"+s(d),l=i.createSign(("rsa-"+a).toUpperCase()),l.update(p.headers);try{u=l.sign(c.privateKey,"base64")}catch(e){return!1}return d+u.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,"$&\r\n ").trim()},vl.exports.relaxedHeaders=n,vl.exports}function Cl(){if(al)return ol;al=1;const i=function(){if(Uc)return Wc;Uc=1;const e=s.Transform;return Wc=class extends e{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let t=this.lastBytes.length,i=Math.min(e.length,t);for(let e=0,n=t-i;e<n;e++)this.lastBytes[e]=this.lastBytes[e+i];for(let n=1;n<=i;n++)this.lastBytes[t-n]=e[e.length-n]}checkHeaders(e){if(this.headersParsed)return!0;let t=this.lastBytes.length,i=0;this.curLinePos=0;for(let n=0,s=this.lastBytes.length+e.length;n<s;n++){let s;if(s=n<t?this.lastBytes[n]:e[n-t],10===s&&n){let s=n-1<t?this.lastBytes[n-1]:e[n-1-t],o=n>1&&(n-2<t?this.lastBytes[n-2]:e[n-2-t]);if(10===s){this.headersParsed=!0,i=n-t+1,this.headerBytes+=i;break}if(13===s&&10===o){this.headersParsed=!0,i=n-t+1,this.headerBytes+=i;break}}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,i)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>i){let t=e.slice(i);this.bodySize+=t.length,setImmediate((()=>this.push(t)))}return!1}return this.headerBytes+=e.length,this.headerChunks.push(e),this.updateLastBytes(e),!1}_transform(e,t,i){if(!e||!e.length)return i();let n;"string"==typeof e&&(e=Buffer.from(e,t));try{n=this.checkHeaders(e)}catch(e){return i(e)}n&&(this.bodySize+=e.length,this.push(e)),setImmediate(i)}_flush(e){if(this.headerChunks){let e=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=e.length,this.push(e),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let t=e.length-1;t>0;t--)/^\s/.test(e[t])&&(e[t-1]+="\n"+e[t],e.splice(t,1));return e.filter((e=>e.trim())).map((e=>({key:e.substr(0,e.indexOf(":")).trim().toLowerCase(),line:e})))}}}(),n=function(){if(Vc)return Pc;Vc=1;const e=s.Transform,t=g;return Pc=class extends e{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=t.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=!!e.debug&&[]}updateHash(e){let t,i="",n="file";for(let t=e.length-1;t>=0;t--){let s=e[t];if("file"!==n||10!==s&&13!==s)if("file"!==n||9!==s&&32!==s){if(("line"!==n||9!==s&&32!==s)&&("file"===n||"line"===n)&&(n="body",t===e.length-1))break}else n="line";if(0===t){if("file"===n&&(!this.remainder||/[\r\n]$/.test(this.remainder))||"line"===n&&(!this.remainder||/[ \t]$/.test(this.remainder)))return void(this.remainder+=e.toString("binary"));if("line"===n||"file"===n){i=e.toString("binary"),e=!1;break}}if("body"===n){i=e.slice(t+1).toString("binary"),e=e.slice(0,t+1);break}}let s=!!this.remainder;if(e&&!s)for(let t=0,i=e.length;t<i;t++){if(t&&10===e[t]&&13!==e[t-1]){s=!0;break}if(t&&13===e[t]&&32===e[t-1]){s=!0;break}if(t&&32===e[t]&&32===e[t-1]){s=!0;break}if(9===e[t]){s=!0;break}}s?(t=this.remainder+(e?e.toString("binary"):""),this.remainder=i,t=t.replace(/\r?\n/g,"\n").replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,"\r\n"),e=Buffer.from(t,"binary")):i&&(this.remainder=i),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,t,i){if(!e||!e.length)return i();"string"==typeof e&&(e=Buffer.from(e,t)),this.updateHash(e),this.byteLength+=e.length,this.push(e),i()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from("\r\n")),this.byteLength||this.push(Buffer.from("\r\n")),this.emit("hash",this.bodyHash.digest("base64"),!!this.debug&&Buffer.concat(this._debugBody)),e()}}}(),o=Ml(),a=s.PassThrough,r=t,c=e,l=g;class u{constructor(e,t,i,n){this.options=e||{},this.keys=t,this.cacheTreshold=Number(this.options.cacheTreshold)||131072,this.hashAlgo=this.options.hashAlgo||"sha256",this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=!!this.cacheDir&&c.join(this.cacheDir,"message."+Date.now()+"-"+l.randomBytes(14).toString("hex")),this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=i,this.output=n,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",(e=>{this.hasErrored=!0,this.cleanup(),n.emit("error",e)}))}cleanup(){this.cache&&this.cachePath&&r.unlink(this.cachePath,(()=>!1))}createReadCache(){this.cache=r.createReadStream(this.cachePath),this.cache.once("error",(e=>{this.cleanup(),this.output.emit("error",e)})),this.cache.once("close",(()=>{this.cleanup()})),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(!1===this.output.write(e))return this.output.once("drain",(()=>{this.sendNextChunk()}));setImmediate((()=>this.sendNextChunk()))}sendSignedOutput(){let e=0,t=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate((()=>this.sendNextChunk()));let i=this.keys[e++],n=o(this.headers,this.hashAlgo,this.bodyHash,{domainName:i.domainName,keySelector:i.keySelector,privateKey:i.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return n&&this.output.write(Buffer.from(n+"\r\n")),setImmediate(t)};if(this.bodyHash&&this.headers)return t();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=r.createWriteStream(this.cachePath),this.cache.once("error",(e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",(()=>{for(;null!==this.relaxedBody.read(););})),this.hasErrored=!0,this.output.emit("error",e)})),this.cache.once("close",(()=>{this.sendSignedOutput()})),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new i,this.relaxedBody=new n({hashAlgo:this.hashAlgo}),this.parser.on("headers",(e=>{this.headers=e})),this.relaxedBody.on("hash",(e=>{this.bodyHash=e})),this.relaxedBody.on("readable",(()=>{let e;if(!this.cache)for(;null!==(e=this.relaxedBody.read());)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()})),this.relaxedBody.on("end",(()=>{this.cache||this.sendSignedOutput()})),this.parser.pipe(this.relaxedBody),setImmediate((()=>this.input.pipe(this.parser)))}}return ol=class{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,t){let i=new a,n=e,s=!1;Buffer.isBuffer(e)?(s=e,n=new a):"string"==typeof e&&(s=Buffer.from(e),n=new a);let o=this.options;t&&Object.keys(t).length&&(o={},Object.keys(this.options||{}).forEach((e=>{o[e]=this.options[e]})),Object.keys(t||{}).forEach((e=>{e in o||(o[e]=t[e])})));let r=new u(o,this.keys,n,i);return setImmediate((()=>{r.signStream(),s&&setImmediate((()=>{n.end(s)}))})),i}}}function Il(){if(dl)return pl;dl=1;const e=r,t=Qc(),i=Oc(),n=function(){if(Bc)return Kc;Bc=1;const e=nl(),t=el(),i=Qc().parseDataURI;return Kc=class{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter((e=>/^text\/html\b/i.test(e.contentType))).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!(!this._htmlNode||!this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&1===this._attachments.attached.length,this.mail.raw?this.message=new e("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach((e=>{let t=e.replace(/-(\w)/g,((e,t)=>t.toUpperCase()));this.mail[t]&&this.message.setHeader(e,this.mail[t])})),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let i,n,s=[].concat(this.mail.attachments||[]).map(((e,i)=>{let n,s=/^message\//i.test(e.contentType);/^data:/i.test(e.path||e.href)&&(e=this._processDataUrl(e));let o=e.contentType||t.detectMimeType(e.filename||e.path||e.href||"bin"),a=/^image\//i.test(o);return n={contentType:o,contentDisposition:e.contentDisposition||(s||a&&e.cid?"inline":"attachment"),contentTransferEncoding:"contentTransferEncoding"in e?e.contentTransferEncoding:"base64"},e.filename?n.filename=e.filename:s||!1===e.filename||(n.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(i+1),n.filename.indexOf(".")<0&&(n.filename+="."+t.detectExtension(n.contentType))),/^https?:\/\//i.test(e.path)&&(e.href=e.path,e.path=void 0),e.cid&&(n.cid=e.cid),e.raw?n.raw=e.raw:e.path?n.content={path:e.path}:e.href?n.content={href:e.href,httpHeaders:e.httpHeaders}:n.content=e.content||"",e.encoding&&(n.encoding=e.encoding),e.headers&&(n.headers=e.headers),n}));return this.mail.icalEvent&&(i="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},n={},Object.keys(i).forEach((e=>{n[e]=i[e]})),n.contentType="application/ics",n.headers||(n.headers={}),n.filename=n.filename||"invite.ics",n.headers["Content-Disposition"]="attachment",n.headers["Content-Transfer-Encoding"]="base64"),e?{attached:s.filter((e=>!e.cid)).concat(n||[]),related:s.filter((e=>!!e.cid))}:{attached:s.concat(n||[]),related:[]}}getAlternatives(){let e,i,n,s,o,a,r=[];return this.mail.text&&(e="object"==typeof this.mail.text&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?this.mail.text:{content:this.mail.text},e.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(n="object"==typeof this.mail.watchHtml&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?this.mail.watchHtml:{content:this.mail.watchHtml},n.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(s="object"==typeof this.mail.amp&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?this.mail.amp:{content:this.mail.amp},s.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(o="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},a={},Object.keys(o).forEach((e=>{a[e]=o[e]})),a.content&&"object"==typeof a.content&&(a.content._resolve=!0),a.filename=!1,a.contentType="text/calendar; charset=utf-8; method="+(a.method||"PUBLISH").toString().trim().toUpperCase(),a.headers||(a.headers={})),this.mail.html&&(i="object"==typeof this.mail.html&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?this.mail.html:{content:this.mail.html},i.contentType="text/html; charset=utf-8"),[].concat(e||[]).concat(n||[]).concat(s||[]).concat(i||[]).concat(a||[]).concat(this.mail.alternatives||[]).forEach((e=>{let i;/^data:/i.test(e.path||e.href)&&(e=this._processDataUrl(e)),i={contentType:e.contentType||t.detectMimeType(e.filename||e.path||e.href||"txt"),contentTransferEncoding:e.contentTransferEncoding},e.filename&&(i.filename=e.filename),/^https?:\/\//i.test(e.path)&&(e.href=e.path,e.path=void 0),e.raw?i.raw=e.raw:e.path?i.content={path:e.path}:e.href?i.content={href:e.href}:i.content=e.content||"",e.encoding&&(i.encoding=e.encoding),e.headers&&(i.headers=e.headers),r.push(i)})),r}_createMixed(t){let i;return i=t?t.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new e("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(i):this._useRelated&&this._createRelated(i),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach((e=>{this._useRelated&&e===this._htmlNode||this._createContentNode(i,e)})),i}_createAlternative(t){let i;return i=t?t.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new e("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach((e=>{this._useRelated&&this._htmlNode===e?this._createRelated(i):this._createContentNode(i,e)})),i}_createRelated(t){let i;return i=t?t.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new e('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(i,this._htmlNode),this._attachments.related.forEach((e=>this._createContentNode(i,e))),i}_createContentNode(t,i){let n;(i=i||{}).content=i.content||"";let s=(i.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return n=t?t.createChild(i.contentType,{filename:i.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new e(i.contentType,{filename:i.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),i.headers&&n.addHeader(i.headers),i.cid&&n.setHeader("Content-Id","<"+i.cid.replace(/[<>]/g,"")+">"),i.contentTransferEncoding?n.setHeader("Content-Transfer-Encoding",i.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(i.contentType)&&n.setHeader("Content-Transfer-Encoding",this.mail.encoding),/^text\//i.test(i.contentType)&&!i.contentDisposition||n.setHeader("Content-Disposition",i.contentDisposition||(i.cid&&/^image\//i.test(i.contentType)?"inline":"attachment")),"string"!=typeof i.content||["utf8","usascii","ascii"].includes(s)||(i.content=Buffer.from(i.content,s)),i.raw?n.setRaw(i.raw):n.setContent(i.content),n}_processDataUrl(e){let t;return(e.path||e.href).match(/^data:/)&&(t=i(e.path||e.href)),t?(e.content=t.data,e.contentType=e.contentType||t.contentType,"path"in e&&(e.path=!1),"href"in e&&(e.href=!1),e):e}}}(),s=Cl(),o=function(){if(cl)return rl;cl=1;const e=d,t=f,i=a;return rl=function n(s,o,a,r){let c,l,u,p=i.parse(s);c={host:p.hostname,port:Number(p.port)?Number(p.port):"https:"===p.protocol?443:80},"https:"===p.protocol?(c.rejectUnauthorized=!1,l=t.connect.bind(t)):l=e.connect.bind(e);let d=!1,m=e=>{if(!d){d=!0;try{u.destroy()}catch(e){}r(e)}},h=()=>{let e=new Error("Proxy socket timed out");e.code="ETIMEDOUT",m(e)};u=l(c,(()=>{if(d)return;let e={Host:a+":"+o,Connection:"close"};p.auth&&(e["Proxy-Authorization"]="Basic "+Buffer.from(p.auth).toString("base64")),u.write("CONNECT "+a+":"+o+" HTTP/1.1\r\n"+Object.keys(e).map((t=>t+": "+e[t])).join("\r\n")+"\r\n\r\n");let t="",i=e=>{let n,s;if(!d&&(t+=e.toString("binary"),n=t.match(/\r\n\r\n/))){if(u.removeListener("data",i),s=t.substr(n.index+n[0].length),t=t.substr(0,n.index),s&&u.unshift(Buffer.from(s,"binary")),d=!0,n=t.match(/^HTTP\/\d+\.\d+ (\d+)/i),!n||"2"!==(n[1]||"").charAt(0)){try{u.destroy()}catch(e){}return r(new Error("Invalid response from proxy"+(n&&": "+n[1]||"")))}return u.removeListener("error",m),u.removeListener("timeout",h),u.setTimeout(0),r(null,u)}};u.on("data",i)})),u.setTimeout(n.timeout||3e4),u.on("timeout",h),u.once("error",m)},rl}(),l=c,u=a,p=_c,h=function(){if(ul)return ll;ul=1;const e=Qc(),t=nl(),i=el();return ll=class{constructor(e,t){this.mailer=e,this.data={},this.message=null,t=t||{};let i=e.options||{},n=e._defaults||{};Object.keys(t).forEach((e=>{this.data[e]=t[e]})),this.data.headers=this.data.headers||{},Object.keys(n).forEach((e=>{e in this.data?"headers"===e&&Object.keys(n.headers).forEach((e=>{e in this.data.headers||(this.data.headers[e]=n.headers[e])})):this.data[e]=n[e]})),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach((e=>{e in i&&(this.data[e]=i[e])}))}resolveContent(...t){return e.resolveContent(...t)}resolveAll(n){let s=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach(((e,t)=>{s.push([this.data.alternatives,t])})),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach(((e,t)=>{e.filename||(e.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(t+1),e.filename.indexOf(".")<0&&(e.filename+="."+i.detectExtension(e.contentType))),e.contentType||(e.contentType=i.detectMimeType(e.filename||e.path||e.href||"bin")),s.push([this.data.attachments,t])}));let o=new t;["from","to","cc","bcc","sender","replyTo"].forEach((e=>{let t;this.message?t=[].concat(o._parseAddresses(this.message.getHeader("replyTo"===e?"reply-to":e))||[]):this.data[e]&&(t=[].concat(o._parseAddresses(this.data[e])||[])),t&&t.length?this.data[e]=t:e in this.data&&(this.data[e]=null)})),["from","sender"].forEach((e=>{this.data[e]&&(this.data[e]=this.data[e].shift())}));let a=0,r=()=>{if(a>=s.length)return n(null,this.data);let t=s[a++];if(!t[0]||!t[0][t[1]])return r();e.resolveContent(...t,((e,i)=>{if(e)return n(e);let s={content:i};t[0][t[1]]&&"object"==typeof t[0][t[1]]&&!Buffer.isBuffer(t[0][t[1]])&&Object.keys(t[0][t[1]]).forEach((e=>{e in s||["content","path","href","raw"].includes(e)||(s[e]=t[0][t[1]][e])})),t[0][t[1]]=s,r()}))};setImmediate((()=>r()))}normalize(e){let t=this.data.envelope||this.message.getEnvelope(),i=this.message.messageId();this.resolveAll(((n,s)=>n?e(n):(s.envelope=t,s.messageId=i,["html","text","watchHtml","amp"].forEach((e=>{s[e]&&s[e].content&&("string"==typeof s[e].content?s[e]=s[e].content:Buffer.isBuffer(s[e].content)&&(s[e]=s[e].content.toString()))})),s.icalEvent&&Buffer.isBuffer(s.icalEvent.content)&&(s.icalEvent.content=s.icalEvent.content.toString("base64"),s.icalEvent.encoding="base64"),s.alternatives&&s.alternatives.length&&s.alternatives.forEach((e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")})),s.attachments&&s.attachments.length&&s.attachments.forEach((e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")})),s.normalizedHeaders={},Object.keys(s.headers||{}).forEach((e=>{let t=[].concat(s.headers[e]||[]).shift();t=t&&t.value||t,t&&(["references","in-reply-to","message-id","content-id"].includes(e)&&(t=this.message._encodeHeaderValue(e,t)),s.normalizedHeaders[e]=t)})),s.list&&"object"==typeof s.list&&this._getListHeaders(s.list).forEach((e=>{s.normalizedHeaders[e.key]=e.value.map((e=>e&&e.value||e)).join(", ")})),s.references&&(s.normalizedHeaders.references=this.message._encodeHeaderValue("references",s.references)),s.inReplyTo&&(s.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",s.inReplyTo)),e(null,s))))}setMailerHeader(){this.message&&this.data.xMailer&&this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(this.message&&this.data.priority)switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low")}}setListHeaders(){this.message&&this.data.list&&"object"==typeof this.data.list&&this.data.list&&"object"==typeof this.data.list&&this._getListHeaders(this.data.list).forEach((e=>{e.value.forEach((t=>{this.message.addHeader(e.key,t)}))}))}_getListHeaders(e){return Object.keys(e).map((t=>({key:"list-"+t.toLowerCase().trim(),value:[].concat(e[t]||[]).map((e=>({prepared:!0,foldLines:!0,value:[].concat(e||[]).map((e=>{if("string"==typeof e&&(e={url:e}),e&&e.url){if("id"===t.toLowerCase().trim()){let t=e.comment||"";return t=i.isPlainText(t)?'"'+t+'"':i.encodeWord(t),(e.comment?t+" ":"")+this._formatListUrl(e.url).replace(/^<[^:]+\/{,2}/,"")}let n=e.comment||"";return i.isPlainText(n)||(n=i.encodeWord(n)),this._formatListUrl(e.url)+(e.comment?" ("+n+")":"")}return""})).filter((e=>e)).join(", ")})))})))}_formatListUrl(e){return e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e)?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}},ll}(),w=d,y=m,x=g;return pl=class extends e{constructor(e,i,n){super(),this.options=i||{},this._defaults=n||{},this._defaultPlugins={compile:[(...e)=>this._convertDataImages(...e)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=!!this.options.dkim&&new s(this.options.dkim),this.transporter=e,this.transporter.mailer=this,this.logger=t.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),"function"==typeof this.transporter.on&&(this.transporter.on("log",(e=>{this.logger.debug({tnx:"transport"},"%s: %s",e.type,e.message)})),this.transporter.on("error",(e=>{this.logger.error({err:e,tnx:"transport"},"Transport Error: %s",e.message),this.emit("error",e)})),this.transporter.on("idle",((...e)=>{this.emit("idle",...e)}))),["close","isIdle","verify"].forEach((e=>{this[e]=(...t)=>"function"==typeof this.transporter[e]?("verify"===e&&"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[e](...t)):(this.logger.warn({tnx:"transport",methodName:e},"Non existing method %s called for transport",e),!1)})),this.options.proxy&&"string"==typeof this.options.proxy&&this.setupProxy(this.options.proxy)}use(e,t){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(t):this._userPlugins[e]=[t],this}sendMail(e,i=null){let o;i||(o=new Promise(((e,n)=>{i=t.callbackPromise(e,n)}))),"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let a=new h(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",a,(e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",e.message),i(e);a.message=new n(a.data).compile(),a.setMailerHeader(),a.setPriorityHeaders(),a.setListHeaders(),this._processPlugins("stream",a,(e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"stream"},"PluginStream Error: %s",e.message),i(e);(a.data.dkim||this.dkim)&&a.message.processFunc((e=>{let t=a.data.dkim?new s(a.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:a.message.messageId(),dkimDomains:t.keys.map((e=>e.keySelector+"."+e.domainName)).join(", ")},"Signing outgoing message with %s keys",t.keys.length),t.sign(e,a.data._dkim)})),this.transporter.send(a,((...e)=>{e[0]&&this.logger.error({err:e[0],tnx:"transport",action:"send"},"Send Error: %s",e[0].message),i(...e)}))}))})),o}getVersionString(){return l.format("%s (%s; +%s; %s/%s)",p.name,p.version,p.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,t,i){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return i();let n=this._userPlugins[e]||[],s=this._defaultPlugins[e]||[];if(n.length&&this.logger.debug({tnx:"transaction",pluginCount:n.length,step:e},"Using %s plugins for %s",n.length,e),n.length+s.length===0)return i();let o=0,a="default",r=()=>{let e="default"===a?s:n;if(o>=e.length){if("default"!==a||!n.length)return i();a="user",o=0,e=n}(0,e[o++])(t,(e=>{if(e)return i(e);r()}))};r()}setupProxy(e){let t=u.parse(e);this.getSocket=(e,i)=>{let n=t.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+n))return this.meta.get("proxy_handler_"+n)(t,e,i);switch(n){case"http":case"https":return void o(t.href,e.port,e.host,((e,t)=>e?i(e):i(null,{connection:t})));case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return i(new Error("Socks module not loaded"));let n=n=>{let s=!!this.meta.get("proxy_socks_module").SocksClient,o=s?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),a=Number(t.protocol.replace(/\D/g,""))||5,r={proxy:{ipaddress:n,port:Number(t.port),type:a},[s?"destination":"target"]:{host:e.host,port:e.port},command:"connect"};if(t.auth){let e=decodeURIComponent(t.auth.split(":").shift()),i=decodeURIComponent(t.auth.split(":").pop());s?(r.proxy.userId=e,r.proxy.password=i):4===a?r.userid=e:r.authentication={username:e,password:i}}o.createConnection(r,((e,t)=>e?i(e):i(null,{connection:t.socket||t})))};return w.isIP(t.hostname)?n(t.hostname):y.resolve(t.hostname,((e,t)=>{if(e)return i(e);n(Array.isArray(t)?t[0]:t)}))}}i(new Error("Unknown proxy configuration"))}}_convertDataImages(e,t){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return t();e.resolveContent(e.data,"html",((n,s)=>{if(n)return t(n);let o=0;s=(s||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,((t,n,s,a)=>{let r=x.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:s,cid:r,filename:"image-"+ ++o+"."+i.detectExtension(a)}),n+"cid:"+r})),e.data.html=s,t()}))}set(e,t){return this.meta.set(e,t)}get(e){return this.meta.get(e)}},pl}function bl(){if(fl)return gl;fl=1;const e=_c,t=r.EventEmitter,i=d,n=f,o=h,a=g,c=function(){if(hl)return ml;hl=1;const e=s.Transform;return ml=class extends e{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,t,i){let n,s,o,a=[],r=0,c=0;if(!e||!e.length)return i();for("string"==typeof e&&(e=Buffer.from(e)),this.inByteCount+=e.length,n=0,s=e.length;n<s;n++)46===e[n]?(n&&10===e[n-1]||!n&&(!this.lastByte||10===this.lastByte))&&(o=e.slice(c,n+1),a.push(o),a.push(Buffer.from(".")),r+=o.length+1,c=n+1):10===e[n]&&(n&&13!==e[n-1]||!n&&13!==this.lastByte)&&(n>c?(o=e.slice(c,n),a.push(o),r+=o.length+2):r+=2,a.push(Buffer.from("\r\n")),c=n+1);r?(c<e.length&&(o=e.slice(c),a.push(o),r+=o.length),this.outByteCount+=r,this.push(Buffer.concat(a,r))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],i()}_flush(e){let t;t=10===this.lastByte?Buffer.from(".\r\n"):13===this.lastByte?Buffer.from("\n.\r\n"):Buffer.from("\r\n.\r\n"),this.outByteCount+=t.length,this.push(t),e()}}}(),l=s.PassThrough,u=Qc(),p=6e5;return gl=class extends t{constructor(t){super(t),this.id=a.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=t||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:!i.isIP(this.host)&&this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,void 0===this.options.secure&&465===this.port&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=u.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach((e=>{let t=(e||"").toString().trim().toUpperCase();t&&this.customAuth.set(t,this.options.customAuth[e])})),this.version=e.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=e=>this._onData(e),this._onSocketError=e=>this._onError(e,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if("function"==typeof e){this.once("connect",(()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()}));const t=this._isDestroyedMessage("connect");if(t)return e(this._formatError(t,"ECONNECTION",!1,"CONN"))}let t={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||3e4};this.options.localAddress&&(t.localAddress=this.options.localAddress);let s=()=>{this._connectionTimeout=setTimeout((()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")}),this.options.connectionTimeout||12e4),this._socket.on("error",this._onSocketError)};return this.options.connection?(this._socket=this.options.connection,s(),void(this.secureConnection&&!this.alreadySecured?setImmediate((()=>this._upgradeConnection((e=>{e?this._onError(new Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"CONN"):this._onConnect()})))):setImmediate((()=>this._onConnect())))):this.options.socket?(this._socket=this.options.socket,u.resolveHostname(t,((e,i)=>{if(e)return setImmediate((()=>this._onError(e,"EDNS",!1,"CONN")));this.logger.debug({tnx:"dns",source:t.host,resolved:i.host,cached:!!i.cached},"Resolved %s as %s [cache %s]",t.host,i.host,i.cached?"hit":"miss"),Object.keys(i).forEach((e=>{"_"!==e.charAt(0)&&i[e]&&(t[e]=i[e])}));try{this._socket.connect(this.port,this.host,(()=>{this._socket.setKeepAlive(!0),this._onConnect()})),s()}catch(e){return setImmediate((()=>this._onError(e,"ECONNECTION",!1,"CONN")))}}))):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach((e=>{t[e]=this.options.tls[e]})),this.servername&&!t.servername&&(t.servername=this.servername),u.resolveHostname(t,((e,i)=>{if(e)return setImmediate((()=>this._onError(e,"EDNS",!1,"CONN")));this.logger.debug({tnx:"dns",source:t.host,resolved:i.host,cached:!!i.cached},"Resolved %s as %s [cache %s]",t.host,i.host,i.cached?"hit":"miss"),Object.keys(i).forEach((e=>{"_"!==e.charAt(0)&&i[e]&&(t[e]=i[e])}));try{this._socket=n.connect(t,(()=>{this._socket.setKeepAlive(!0),this._onConnect()})),s()}catch(e){return setImmediate((()=>this._onError(e,"ECONNECTION",!1,"CONN")))}}))):u.resolveHostname(t,((e,n)=>{if(e)return setImmediate((()=>this._onError(e,"EDNS",!1,"CONN")));this.logger.debug({tnx:"dns",source:t.host,resolved:n.host,cached:!!n.cached},"Resolved %s as %s [cache %s]",t.host,n.host,n.cached?"hit":"miss"),Object.keys(n).forEach((e=>{"_"!==e.charAt(0)&&n[e]&&(t[e]=n[e])}));try{this._socket=i.connect(t,(()=>{this._socket.setKeepAlive(!0),this._onConnect()})),s()}catch(e){return setImmediate((()=>this._onError(e,"ECONNECTION",!1,"CONN")))}}))}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";"init"===this.stage&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let t=this._socket&&this._socket.socket||this._socket;if(t&&!t.destroyed)try{t[e]()}catch(e){}this._destroy()}login(e,t){const i=this._isDestroyedMessage("login");if(i)return t(this._formatError(i,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,this._authMethod||!this._auth.oauth2||this._auth.credentials?this._authMethod&&("XOAUTH2"!==this._authMethod||this._auth.oauth2)||(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()):this._authMethod="XOAUTH2",!("XOAUTH2"===this._authMethod||this._auth.credentials&&this._auth.credentials.user&&this._auth.credentials.pass)){if(!(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod)))return t(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options}}if(!this.customAuth.has(this._authMethod)){switch(this._authMethod){case"XOAUTH2":return void this._handleXOauth2Token(!1,t);case"LOGIN":return this._responseActions.push((e=>{this._actionAUTH_LOGIN_USER(e,t)})),void this._sendCommand("AUTH LOGIN");case"PLAIN":return this._responseActions.push((e=>{this._actionAUTHComplete(e,t)})),void this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));case"CRAM-MD5":return this._responseActions.push((e=>{this._actionAUTH_CRAM_MD5(e,t)})),void this._sendCommand("AUTH CRAM-MD5")}return t(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}{let e,i=this.customAuth.get(this._authMethod),n=!1,s=()=>{n||(n=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0))},o=i=>{n||(n=!0,t(this._formatError(i,"EAUTH",e,"AUTH "+this._authMethod)))},a=i({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(t,i)=>{let n;return i||(n=new Promise(((e,t)=>{i=u.callbackPromise(e,t)}))),this._responseActions.push((n=>{e=n;let s=n.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),o={command:t,response:n};s?(o.status=Number(s[1])||0,s[2]&&(o.code=s[2]),o.text=n.substr(s[0].length)):(o.text=n,o.status=0),i(null,o)})),setImmediate((()=>this._sendCommand(t))),n},resolve:s,reject:o});a&&"function"==typeof a.catch&&a.then(s).catch(o)}}send(e,t,i){if(!t)return i(this._formatError("Empty message","EMESSAGE",!1,"API"));const n=this._isDestroyedMessage("send message");if(n)return i(this._formatError(n,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate((()=>{i(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))}));let s=!1,o=function(){s||(s=!0,i(...arguments))};"function"==typeof t.on&&t.on("error",(e=>o(this._formatError(e,"ESTREAM",!1,"API"))));let a=Date.now();this._setEnvelope(e,((e,i)=>{if(e){let i=new l;return"function"==typeof t.pipe?t.pipe(i):(i.write(t),i.end()),o(e)}let n=Date.now(),s=this._createSendStream(((e,t)=>e?o(e):(i.envelopeTime=n-a,i.messageTime=Date.now()-n,i.messageSize=s.outByteCount,i.response=t,o(null,i))));"function"==typeof t.pipe?t.pipe(s):(s.write(t),s.end())}))}reset(e){this._sendCommand("RSET"),this._responseActions.push((t=>"2"!==t.charAt(0)?e(this._formatError("Could not reset session state. response="+t,"EPROTOCOL",t,"RSET")):(this._envelope=!1,e(null,!0))))}_onConnect(){clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed?this.close():(this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||p),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout((()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")}),this.options.greetingTimeout||3e4),this._responseActions.push(this._actionGreeting),this._socket.resume())}_onData(e){if(this._destroyed||!e||!e.length)return;let t,i=(e||"").toString("binary"),n=(this._remainder+i).split(/\r?\n/);this._remainder=n.pop();for(let e=0,i=n.length;e<i;e++)this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))?this._responseQueue[this._responseQueue.length-1]+="\n"+n[e]:this._responseQueue.push(n[e]);this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))||this._processResponse()}_onError(e,t,i,n){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._destroyed||(e=this._formatError(e,t,i,n),this.logger.error(i,e.message),this.emit("error",e),this.close())}_formatError(e,t,i,n){let s;s=/Error\]$/i.test(Object.prototype.toString.call(e))?e:new Error(e),t&&"Error"!==t&&(s.code=t),i&&(s.response=i,s.message+=": "+i);let o="string"==typeof i&&Number((i.match(/^\d+/)||[])[0])||!1;return o&&(s.responseCode=o),n&&(s.command=n),s}_onClose(){let e=!1;return this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed?this._onError(new Error("Connection closed unexpectedly"),"ETLS",e,"CONN"):[this._actionGreeting,this.close].includes(this._responseActions[0])||this._destroyed?/^[45]\d{2}\b/.test(e)?this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN"):void this._destroy():this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN")}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let t=this._socket,i={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach((e=>{i[e]=this.options.tls[e]})),this.servername&&!i.servername&&(i.servername=this.servername),this.upgrading=!0;try{this._socket=n.connect(i,(()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),t.removeListener("close",this._onSocketClose),t.removeListener("end",this._onSocketEnd),e(null,!0))))}catch(t){return e(t)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||p),this._socket.on("timeout",this._onSocketTimeout),t.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split("\n").pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate((()=>this._processResponse()));let t=this._responseActions.shift();if("function"!=typeof t)return this._onError(new Error("Unexpected Response"),"EPROTOCOL",e,"CONN");t.call(this,e),setImmediate((()=>this._processResponse()))}_sendCommand(e,t){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(t||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+"\r\n","utf-8"))}}_setEnvelope(e,t){let i=[],n=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map((e=>(e&&e.address||e||"").toString().trim())),!this._envelope.to.length)return t(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return t(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(n=!0);for(let e=0,i=this._envelope.to.length;e<i;e++){if(!this._envelope.to[e]||/[\r\n<>]/.test(this._envelope.to[e]))return t(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[e]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[e])&&(n=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(e){return t(this._formatError("Invalid DSN "+e.message,"EENVELOPE",!1,"API"))}this._responseActions.push((e=>{this._actionMAIL(e,t)})),n&&this._supportedExtensions.includes("SMTPUTF8")&&(i.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(i.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&i.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&i.push("RET="+u.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&i.push("ENVID="+u.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(i.length?" "+i.join(" "):""))}_setDsnEnvelope(e){let t=(e.ret||e.return||"").toString().toUpperCase()||null;if(t)switch(t){case"HDRS":case"HEADERS":t="HDRS";break;case"FULL":case"BODY":t="FULL"}if(t&&!["FULL","HDRS"].includes(t))throw new Error("ret: "+JSON.stringify(t));let i=(e.envid||e.id||"").toString()||null,n=e.notify||null;if(n){"string"==typeof n&&(n=n.split(",")),n=n.map((e=>e.trim().toUpperCase()));let e=["NEVER","SUCCESS","FAILURE","DELAY"];if(n.filter((t=>!e.includes(t))).length||n.length>1&&n.includes("NEVER"))throw new Error("notify: "+JSON.stringify(n.join(",")));n=n.join(",")}let s=(e.recipient||e.orcpt||"").toString()||null;return s&&s.indexOf(";")<0&&(s="rfc822;"+s),{ret:t,envid:i,notify:n,orcpt:s}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+u.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+u.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let t,i=new c;return this.options.lmtp?this._envelope.accepted.forEach(((t,i)=>{let n=i===this._envelope.accepted.length-1;this._responseActions.push((i=>{this._actionLMTPStream(t,n,i,e)}))})):this._responseActions.push((t=>{this._actionSMTPStream(t,e)})),i.pipe(this._socket,{end:!1}),this.options.debug&&(t=new l,t.on("readable",(()=>{let e;for(;e=t.read();)this.logger.debug({tnx:"message"},e.toString("binary").replace(/\r?\n$/,""))})),i.pipe(t)),i.once("end",(()=>{this.logger.info({tnx:"message",inByteCount:i.inByteCount,outByteCount:i.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",i.outByteCount,i.inByteCount)})),i}_actionGreeting(e){clearTimeout(this._greetingTimeout),"220"===e.substr(0,3)?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this._onError(new Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN")}_actionLHLO(e){"2"===e.charAt(0)?this._actionEHLO(e):this._onError(new Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO")}_actionEHLO(e){let t;if("421"!==e.substr(0,3)){if("2"!==e.charAt(0))return this.options.requireTLS?void this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO"):(this._responseActions.push(this._actionHELO),void this._sendCommand("HELO "+this.name));if(this._ehloLines=e.split(/\r?\n/).map((e=>e.replace(/^\d+[ -]/,"").trim())).filter((e=>e)).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS))return this._sendCommand("STARTTLS"),void this._responseActions.push(this._actionSTARTTLS);/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(t=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(t[1])||0),this.emit("connect")}else this._onError(new Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO")}_actionHELO(e){"2"===e.charAt(0)?(this.allowsAuth=!0,this.emit("connect")):this._onError(new Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO")}_actionSTARTTLS(e){if("2"!==e.charAt(0))return this.options.opportunisticTLS?(this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect")):void this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");this._upgradeConnection(((e,t)=>{e?this._onError(new Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"STARTTLS"):(this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),t?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect"))}))}_actionAUTH_LOGIN_USER(e,t){/^334[ -]/.test(e)?(this._responseActions.push((e=>{this._actionAUTH_LOGIN_PASS(e,t)})),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))):t(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"))}_actionAUTH_CRAM_MD5(e,t){let i=e.match(/^334\s+(.+)$/),n="";if(!i)return t(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));n=i[1];let s=Buffer.from(n,"base64").toString("ascii"),o=a.createHmac("md5",this._auth.credentials.pass);o.update(s);let r=this._auth.credentials.user+" "+o.digest("hex");this._responseActions.push((e=>{this._actionAUTH_CRAM_MD5_PASS(e,t)})),this._sendCommand(Buffer.from(r).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,t){if(!e.match(/^235\s+/))return t(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0)}_actionAUTH_LOGIN_PASS(e,t){if(!/^334[ -]/.test(e))return t(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push((e=>{this._actionAUTHComplete(e,t)})),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,t,i){return i||"function"!=typeof t||(i=t,t=!1),"334"===e.substr(0,3)?(this._responseActions.push((e=>{t||"XOAUTH2"!==this._authMethod?this._actionAUTHComplete(e,!0,i):setImmediate((()=>this._handleXOauth2Token(!0,i)))})),void this._sendCommand("")):"2"!==e.charAt(0)?(this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),i(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod))):(this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,void i(null,!0))}_actionMAIL(e,t){let i,n;if(2!==Number(e.charAt(0)))return i=this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?"Internationalized mailbox name not allowed":"Mail command failed",t(this._formatError(i,"EENVELOPE",e,"MAIL FROM"));if(!this._envelope.rcptQueue.length)return t(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"));if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push((e=>{this._actionRCPT(e,t)})),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs());else n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push((e=>{this._actionRCPT(e,t)})),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs())}_actionRCPT(e,t){let i,n,s=this._recipientQueue.shift();if(2!==Number(e.charAt(0))?(i=this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(s)?"Internationalized mailbox name not allowed":"Recipient command failed",this._envelope.rejected.push(s),n=this._formatError(i,"EENVELOPE",e,"RCPT TO"),n.recipient=s,this._envelope.rejectedErrors.push(n)):this._envelope.accepted.push(s),this._envelope.rcptQueue.length||this._recipientQueue.length)this._envelope.rcptQueue.length&&(s=this._envelope.rcptQueue.shift(),this._recipientQueue.push(s),this._responseActions.push((e=>{this._actionRCPT(e,t)})),this._sendCommand("RCPT TO:<"+s+">"+this._getDsnRcptToArgs()));else{if(!(this._envelope.rejected.length<this._envelope.to.length))return n=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO"),n.rejected=this._envelope.rejected,n.rejectedErrors=this._envelope.rejectedErrors,t(n);this._responseActions.push((e=>{this._actionDATA(e,t)})),this._sendCommand("DATA")}}_actionDATA(e,t){if(!/^[23]/.test(e))return t(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let i={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(i.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(i.rejectedErrors=this._envelope.rejectedErrors),t(null,i)}_actionSMTPStream(e,t){return 2!==Number(e.charAt(0))?t(this._formatError("Message failed","EMESSAGE",e,"DATA")):t(null,e)}_actionLMTPStream(e,t,i,n){let s;if(2!==Number(i.charAt(0))){s=this._formatError("Message failed for recipient "+e,"EMESSAGE",i,"DATA"),s.recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(s);for(let t=0,i=this._envelope.accepted.length;t<i;t++)this._envelope.accepted[t]===e&&this._envelope.accepted.splice(t,1)}if(t)return n(null,i)}_handleXOauth2Token(e,t){this._auth.oauth2.getToken(e,((i,n)=>{if(i)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),t(this._formatError(i,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push((i=>{this._actionAUTHComplete(i,e,t)})),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(n),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))}))}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=o.hostname()||""}catch(t){e="localhost"}return(!e||e.indexOf(".")<0)&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}},gl}function Ll(){if(yl)return wl;yl=1;const e=s.Stream,t=Rc(),i=g,n=Qc();return wl=class extends e{constructor(e,t){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user)return void setImmediate((()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!'))));let t=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=t||300}if(this.logger=n.getLogger({logger:t},{component:this.options.component||"OAuth2"}),this.provisionCallback="function"==typeof this.options.provisionCallback&&this.options.provisionCallback,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let e=Math.max(Number(this.options.timeout)||0,0);this.expires=e&&Date.now()+1e3*e||0}}getToken(e,t){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return t(null,this.accessToken);let i=(...e)=>{e[0]?this.logger.error({err:e[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),t(...e)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,((e,t,n)=>{!e&&t&&(this.accessToken=t,this.expires=n||0),i(e,t)})):this.generateToken(i)}updateToken(e,t){this.accessToken=e,t=Math.max(Number(t)||0,0),this.expires=t&&Date.now()+1e3*t||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let t,i;if(this.options.serviceClient){let n,s=Math.floor(Date.now()/1e3),o={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:s,exp:s+this.options.serviceRequestTimeout};try{n=this.jwtSignRS256(o)}catch(t){return e(new Error("Can't generate token. Check your auth options"))}t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:n},i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:o}}else{if(!this.options.refreshToken)return e(new Error("Can't create new access token for user"));t={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},i={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach((e=>{t[e]=this.options.customParams[e],i[e]=this.options.customParams[e]})),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(i)),this.postRequest(this.options.accessUrl,t,this.options,((t,i)=>{let n;if(t)return e(t);try{n=JSON.parse(i.toString())}catch(t){return e(t)}if(!n||"object"!=typeof n)return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(i||"").toString()),e(new Error("Invalid authentication response"));let s={};if(Object.keys(n).forEach((e=>{s[e]="access_token"!==e?n[e]:(n[e]||"").toString().substr(0,6)+"..."})),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(s)),n.error){let t=n.error;return n.error_description&&(t+=": "+n.error_description),n.error_uri&&(t+=" ("+n.error_uri+")"),e(new Error(t))}return n.access_token?(this.updateToken(n.access_token,n.expires_in),e(null,this.accessToken)):e(new Error("No access token"))}))}buildXOAuth2Token(e){let t=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(t.join(""),"utf-8").toString("base64")}postRequest(e,i,n,s){let o=!1,a=[],r=0,c=t(e,{method:"post",headers:n.customHeaders,body:i,allowErrorResponse:!0});c.on("readable",(()=>{let e;for(;null!==(e=c.read());)a.push(e),r+=e.length})),c.once("error",(e=>{if(!o)return o=!0,s(e)})),c.once("end",(()=>{if(!o)return o=!0,s(null,Buffer.concat(a,r))}))}toBase64URL(e){return"string"==typeof e&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map((e=>this.toBase64URL(e))).join(".");let t=i.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(t)}}}var Al,El,Nl,Tl,Sl,kl,Zl,jl,Xl,Yl,zl,Fl,Gl,Hl,Kl,Bl={126:{host:"smtp.126.com",port:465,secure:!0},163:{host:"smtp.163.com",port:465,secure:!0},"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:{domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},AOL:{domains:["aol.com"],host:"smtp.aol.com",port:587},Bluewin:{host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},DebugMail:{host:"debugmail.io",port:25},DynectEmail:{aliases:["Dynect"],host:"smtp.dynect.net",port:25},Ethereal:{aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},FastMail:{domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:{aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Gmail:{aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},Godaddy:{host:"smtpout.secureserver.net",port:25},GodaddyAsia:{host:"smtp.asia.secureserver.net",port:25},GodaddyEurope:{host:"smtp.europe.secureserver.net",port:25},"hot.ee":{host:"mail.hot.ee"},Hotmail:{aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},iCloud:{aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},Infomaniak:{host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Loopia:{host:"mailcluster.loopia.se",port:465},"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:{port:1025,ignoreTLS:!0},Mailgun:{host:"smtp.mailgun.org",port:465,secure:!0},Mailjet:{host:"in.mailjet.com",port:587},Mailosaur:{host:"mailosaur.io",port:25},Mailtrap:{host:"live.smtp.mailtrap.io",port:587},Mandrill:{host:"smtp.mandrillapp.com",port:587},Naver:{host:"smtp.naver.com",port:587},One:{host:"send.one.com",port:465,secure:!0},OpenMailBox:{aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Outlook365:{host:"smtp.office365.com",port:587,secure:!1},OhMySMTP:{host:"smtp.ohmysmtp.com",port:587,secure:!1},Postmark:{aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Proton:{aliases:["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],domains:["proton.me","protonmail.com","pm.me","protonmail.ch"],host:"smtp.protonmail.ch",port:587,requireTLS:!0},"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:{domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},QQex:{aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},SendCloud:{host:"smtp.sendcloud.net",port:2525},SendGrid:{host:"smtp.sendgrid.net",port:587},SendinBlue:{aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},SendPulse:{host:"smtp-pulse.com",port:465,secure:!0},SES:{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Seznam:{aliases:["Seznam Email"],domains:["seznam.cz","email.cz","post.cz","spoluzaci.cz"],host:"smtp.seznam.cz",port:465,secure:!0},Sparkpost:{aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Tipimail:{host:"smtp.tipimail.com",port:587},Yahoo:{domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},Yandex:{domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Zoho:{host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"}};function Wl(){if(El)return Al;El=1;const e=Bl,t={};function i(e){return e.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function n(e){let t=["domains","aliases"],i={};return Object.keys(e).forEach((n=>{t.indexOf(n)<0&&(i[n]=e[n])})),i}return Object.keys(e).forEach((s=>{let o=e[s];t[i(s)]=n(o),[].concat(o.aliases||[]).forEach((e=>{t[i(e)]=n(o)})),[].concat(o.domains||[]).forEach((e=>{t[i(e)]=n(o)}))})),Al=function(e){return e=i(e.split("@").pop()),t[e]||!1}}function Ul(){if(Tl)return Nl;Tl=1;const e=r,t=function(){if(Dl)return xl;Dl=1;const e=bl(),t=Qc().assign,i=Ll(),n=r;return xl=class extends n{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let e=new i(this.options.auth,this.logger);e.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||e.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:e,method:"XOAUTH2"},e.on("token",(e=>this.pool.mailer.emit("token",e))),e.on("error",(e=>this.emit("error",e)));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(i){this.pool.getSocket(this.options,((n,s)=>{if(n)return i(n);let o=!1,a=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,a.host||"",a.port||""),a=t(!1,a),Object.keys(s).forEach((e=>{a[e]=s[e]}))),this.connection=new e(a),this.connection.once("error",(e=>{if(this.emit("error",e),!o)return o=!0,i(e)})),this.connection.once("end",(()=>{if(this.close(),o)return;o=!0;let e=setTimeout((()=>{if(o)return;let e=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(e.code="ETLS"),i(e)}),1e3);try{e.unref()}catch(e){}})),this.connection.connect((()=>{if(!o)return this.auth&&(this.connection.allowsAuth||a.forceAuth)?void this.connection.login(this.auth,(e=>{if(!o){if(o=!0,e)return this.connection.close(),this.emit("error",e),i(e);this._connected=!0,i(null,!0)}})):(o=!0,this._connected=!0,i(null,!0))}))}))}send(e,t){if(!this._connected)return this.connect((i=>i?t(i):this.send(e,t)));let i=e.message.getEnvelope(),n=e.message.messageId(),s=[].concat(i.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n,cid:this.id},"Sending message %s using #%s to <%s>",n,this.id,s.join(", ")),e.data.dsn&&(i.dsn=e.data.dsn),this.connection.send(i,e.message.createReadStream(),((e,s)=>{if(this.messages++,e)return this.connection.close(),this.emit("error",e),t(e);s.envelope={from:i.from,to:i.to},s.messageId=n,setImmediate((()=>{let e;this.messages>=this.options.maxMessages?(e=new Error("Resource exhausted"),e.code="EMAXLIMIT",this.connection.close(),this.emit("error",e)):this.pool._checkRateLimit((()=>{this.available=!0,this.emit("available")}))})),t(null,s)}))}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}}}(),i=bl(),n=Wl(),s=Qc(),o=_c;return Nl=class extends e{constructor(e){let t;super(),"string"==typeof(e=e||{})&&(e={url:e});let a=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(t=s.parseConnectionUrl(e.url),a=a||t.service),this.options=s.assign(!1,e,t,a&&n(a)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=s.getLogger(this.options,{component:this.options.component||"smtp-pool"});let r=new i(this.options);this.name="SMTP (pool)",this.version=o.version+"[client:"+r.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate((()=>{this.idling&&this.emit("idle")}))}getSocket(e,t){return setImmediate((()=>t(null,!1)))}send(e,t){return!this._closed&&(this._queue.push({mail:e,requeueAttempts:0,callback:t}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate((()=>this._processMessages())),!0)}close(){let e,t=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!t&&!this._queue.length)return;for(let i=t-1;i>=0;i--)this._connections[i]&&this._connections[i].available&&(e=this._connections[i],e.close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(t&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let i=()=>{if(!this._queue.length)return void this.logger.debug({tnx:"connection"},"Pending queue entries cleared");let t=this._queue.shift();if(t&&"function"==typeof t.callback)try{t.callback(new Error("Connection pool was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}setImmediate(i)};setImmediate(i)}_processMessages(){let e,t,i;if(this._closed)return;if(!this._queue.length)return void(this.idling||(this.idling=!0,this.emit("idle")));for(t=0,i=this._connections.length;t<i;t++)if(this._connections[t].available){e=this._connections[t];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e)return void(this.idling=!1);!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let n=e.queueEntry=this._queue.shift();n.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:n.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",n.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(n.mail,((t,i)=>{if(n===e.queueEntry){try{n.callback(t,i)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}}))}_createConnection(){let e=new t(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",(()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()})),e.once("error",(t=>{if("EMAXLIMIT"!==t.code?this.logger.error({err:t,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,t.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(t)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()})),e.once("close",(()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout((()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()}),50):this._continueProcessing()})),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return void 0===this.options.maxRequeues||this.options.maxRequeues<0||e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout((()=>this._processMessages()),100)}_removeConnection(e){let t=this._connections.indexOf(e);-1!==t&&this._connections.splice(t,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let t=Date.now();return this._rateLimit.counter<this._rateLimit.limit?e():(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=t-this._rateLimit.delta?this._clearRateLimit():void(this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout((()=>this._clearRateLimit()),this._rateLimit.delta-(t-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=t)))}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let e=this._rateLimit.waiting.shift();setImmediate(e)}}isIdle(){return this.idling}verify(e){let n;e||(n=new Promise(((t,i)=>{e=s.callbackPromise(t,i)})));let o=new t(this).auth;return this.getSocket(this.options,((t,n)=>{if(t)return e(t);let a=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,a.host||"",a.port||""),a=s.assign(!1,a),Object.keys(n).forEach((e=>{a[e]=n[e]})));let r=new i(a),c=!1;r.once("error",(t=>{if(!c)return c=!0,r.close(),e(t)})),r.once("end",(()=>{if(!c)return c=!0,e(new Error("Connection closed"))}));let l=()=>{if(!c)return c=!0,r.quit(),e(null,!0)};r.connect((()=>{if(!c)if(o&&(r.allowsAuth||a.forceAuth))r.login(o,(t=>{if(!c)return t?(c=!0,r.close(),e(t)):void l()}));else{if(!o&&r.allowsAuth&&a.forceAuth){let t=new Error("Authentication info was not provided");return t.code="NoAuth",c=!0,r.close(),e(t)}l()}}))})),n}},Nl}function Pl(){if(Hl)return Gl;Hl=1;const e=r,t=_c,i=Qc(),n=il();return Gl=class extends e{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=t.version,this.logger=i.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate((()=>{this.idling&&this.emit("idle")}))}send(e,t){return this.connections>=this.maxConnections?(this.idling=!1,this.pending.push({mail:e,callback:t})):this._checkSendingRate()?void this._send(e,((...e)=>{setImmediate((()=>t(...e))),this._sent()})):(this.idling=!1,this.pending.push({mail:e,callback:t}))}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length)return void(this.idling||(this.idling=!0,this.emit("idle")));let e=this.pending.shift();this._send(e.mail,((...t)=>{setImmediate((()=>e.callback(...t))),this._sent()}))}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),t=!1;for(let i=this.rateMessages.length-1;i>=0;i--)this.rateMessages[i].ts>=e-this.rateInterval&&(!t||this.rateMessages[i].ts<t)&&(t=this.rateMessages[i].ts),this.rateMessages[i].ts<e-this.rateInterval&&!this.rateMessages[i].pending&&this.rateMessages.splice(i,1);if(this.rateMessages.length<this.sendingRate)return!0;let i=Math.max(t+1001,e+20);this.sendingRateTTL=setTimeout((()=>this._checkRatedQueue()),e-i);try{this.sendingRateTTL.unref()}catch(e){}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,t){let i={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(i);let s=e.data.envelope||e.message.getEnvelope(),o=e.message.messageId(),a=[].concat(s.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:o},"Sending message %s to <%s>",o,a.join(", "));setImmediate((()=>(t=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&"string"==typeof e.data._dkim.skipFields?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let i=e.message.createReadStream(),s=i.pipe(new n),o=[],a=0;s.on("readable",(()=>{let e;for(;null!==(e=s.read());)o.push(e),a+=e.length})),i.once("error",(e=>s.emit("error",e))),s.once("error",(e=>{t(e)})),s.once("end",(()=>t(null,Buffer.concat(o,a))))})(((n,a)=>{if(n)return this.logger.error({err:n,tnx:"send",messageId:o},"Failed creating message for %s. %s",o,n.message),i.pending=!1,t(n);let r={RawMessage:{Data:a},Source:s.from,Destinations:s.to};Object.keys(e.data.ses||{}).forEach((t=>{r[t]=e.data.ses[t]}));let c=(this.ses.aws?this.ses.ses:this.ses)||{},l=this.ses.aws||{};var u;u=(e,n)=>{let u;!e&&n||(n="us-east-1"),u="function"==typeof c.send&&l.SendRawEmailCommand?c.send(new l.SendRawEmailCommand(r)):c.sendRawEmail(r).promise(),u.then((e=>{"us-east-1"===n&&(n="email"),i.pending=!1,t(null,{envelope:{from:s.from,to:s.to},messageId:"<"+e.MessageId+(/@/.test(e.MessageId)?"":"@"+n+".amazonses.com")+">",response:e.MessageId,raw:a})})).catch((e=>{this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",o,e.message),i.pending=!1,t(e)}))},c.config&&"function"==typeof c.config.region?c.config.region().then((e=>u(null,e))).catch((e=>u(e))):u(null,c.config&&c.config.region||"us-east-1")}))))}verify(e){let t,n=(this.ses.aws?this.ses.ses:this.ses)||{},s=this.ses.aws||{};const o={RawMessage:{Data:"From: invalid@invalid\r\nTo: invalid@invalid\r\n Subject: Invalid\r\n\r\nInvalid"},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(t=new Promise(((t,n)=>{e=i.callbackPromise(t,n)})));const a=t=>t&&"InvalidParameterValue"!==(t.code||t.Code)?e(t):e(null,!0);return"function"==typeof n.send&&s.SendRawEmailCommand?(o.RawMessage.Data=Buffer.from(o.RawMessage.Data),n.send(new s.SendRawEmailCommand(o),a)):n.sendRawEmail(o,a),t}},Gl}function Vl(){if(Kl)return fc;Kl=1;const e=Il(),t=Qc(),i=Ul(),n=function(){if(kl)return Sl;kl=1;const e=r,t=bl(),i=Wl(),n=Qc(),s=Ll(),o=_c;return Sl=class extends e{constructor(e){let s;super(),"string"==typeof(e=e||{})&&(e={url:e});let a=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(s=n.parseConnectionUrl(e.url),a=a||s.service),this.options=n.assign(!1,e,s,a&&i(a)),this.logger=n.getLogger(this.options,{component:this.options.component||"smtp-transport"});let r=new t(this.options);this.name="SMTP",this.version=o.version+"[client:"+r.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,t){return setImmediate((()=>t(null,!1)))}getAuth(e){if(!e)return this.auth;let t=!1,i={};if(this.options.auth&&"object"==typeof this.options.auth&&Object.keys(this.options.auth).forEach((e=>{t=!0,i[e]=this.options.auth[e]})),e&&"object"==typeof e&&Object.keys(e).forEach((n=>{t=!0,i[n]=e[n]})),!t)return!1;if("OAUTH2"===(i.type||"").toString().toUpperCase()){if(!i.service&&!i.user)return!1;let e=new s(i,this.logger);return e.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||e.provisionCallback,e.on("token",(e=>this.mailer.emit("token",e))),e.on("error",(e=>this.emit("error",e))),{type:"OAUTH2",user:i.user,oauth2:e,method:"XOAUTH2"}}return{type:(i.type||"").toString().toUpperCase()||"LOGIN",user:i.user,credentials:{user:i.user||"",pass:i.pass,options:i.options},method:(i.method||"").trim().toUpperCase()||this.options.authMethod||!1}}send(e,i){this.getSocket(this.options,((s,o)=>{if(s)return i(s);let a=!1,r=this.options;o&&o.connection&&(this.logger.info({tnx:"proxy",remoteAddress:o.connection.remoteAddress,remotePort:o.connection.remotePort,destHost:r.host||"",destPort:r.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",o.connection.remoteAddress,o.connection.remotePort,r.host||"",r.port||""),r=n.assign(!1,r),Object.keys(o).forEach((e=>{r[e]=o[e]})));let c=new t(r);c.once("error",(e=>{if(!a)return a=!0,c.close(),i(e)})),c.once("end",(()=>{if(a)return;let e=setTimeout((()=>{if(a)return;a=!0;let e=new Error("Unexpected socket close");c&&c._socket&&c._socket.upgrading&&(e.code="ETLS"),i(e)}),1e3);try{e.unref()}catch(e){}}));let l=()=>{let t=e.message.getEnvelope(),n=e.message.messageId(),s=[].concat(t.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),e.data.dsn&&(t.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s>",n,s.join(", ")),c.send(t,e.message.createReadStream(),((e,s)=>{if(a=!0,c.close(),e)return this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",n,e.message),i(e);s.envelope={from:t.from,to:t.to},s.messageId=n;try{return i(null,s)}catch(e){this.logger.error({err:e,tnx:"callback"},"Callback error for %s: %s",n,e.message)}}))};c.connect((()=>{if(a)return;let t=this.getAuth(e.data.auth);t&&(c.allowsAuth||r.forceAuth)?c.login(t,(e=>{if(t&&t!==this.auth&&t.oauth2&&t.oauth2.removeAllListeners(),!a)return e?(a=!0,c.close(),i(e)):void l()})):l()}))}))}verify(e){let i;return e||(i=new Promise(((t,i)=>{e=n.callbackPromise(t,i)}))),this.getSocket(this.options,((i,s)=>{if(i)return e(i);let o=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:o.host||"",destPort:o.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,o.host||"",o.port||""),o=n.assign(!1,o),Object.keys(s).forEach((e=>{o[e]=s[e]})));let a=new t(o),r=!1;a.once("error",(t=>{if(!r)return r=!0,a.close(),e(t)})),a.once("end",(()=>{if(!r)return r=!0,e(new Error("Connection closed"))}));let c=()=>{if(!r)return r=!0,a.quit(),e(null,!0)};a.connect((()=>{if(r)return;let t=this.getAuth({});if(t&&(a.allowsAuth||o.forceAuth))a.login(t,(t=>{if(!r)return t?(r=!0,a.close(),e(t)):void c()}));else{if(!t&&a.allowsAuth&&o.forceAuth){let t=new Error("Authentication info was not provided");return t.code="NoAuth",r=!0,a.close(),e(t)}c()}}))})),i}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}}}(),s=function(){if(jl)return Zl;jl=1;const e=w.spawn,t=_c,i=Qc();return Zl=class{constructor(n){n=n||{},this._spawn=e,this.options=n||{},this.name="Sendmail",this.version=t.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=i.getLogger(this.options,{component:this.options.component||"sendmail"}),n&&("string"==typeof n?this.path=n:"object"==typeof n&&(n.path&&(this.path=n.path),Array.isArray(n.args)&&(this.args=n.args),this.winbreak=["win","windows","dos","\r\n"].includes((n.newline||"").toString().toLowerCase())))}send(e,t){e.message.keepBcc=!0;let i,n,s,o=e.data.envelope||e.message.getEnvelope(),a=e.message.messageId();if([].concat(o.from||[]).concat(o.to||[]).some((e=>/^-/.test(e))))return t(new Error("Can not send mail. Invalid envelope addresses."));i=this.args?["-i"].concat(this.args).concat(o.to):["-i"].concat(o.from?["-f",o.from]:[]).concat(o.to);let r=i=>{if(!s)return s=!0,"function"==typeof t?i?t(i):t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:a,response:"Messages queued for delivery"}):void 0};try{n=this._spawn(this.path,i)}catch(e){return this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred while spawning sendmail. %s",e.message),r(e)}if(!n)return r(new Error("sendmail was not found"));{n.on("error",(e=>{this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred when sending message %s. %s",a,e.message),r(e)})),n.once("exit",(e=>{if(!e)return r();let t;t=127===e?new Error("Sendmail command not found, process exited with code "+e):new Error("Sendmail exited with code "+e),this.logger.error({err:t,tnx:"stdin",messageId:a},"Error sending message %s to sendmail. %s",a,t.message),r(t)})),n.once("close",r),n.stdin.on("error",(e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when piping message %s to sendmail. %s",a,e.message),r(e)}));let t=[].concat(o.to||[]);t.length>3&&t.push("...and "+t.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a},"Sending message %s to <%s>",a,t.join(", "));let i=e.message.createReadStream();i.once("error",(e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when generating message %s. %s",a,e.message),n.kill("SIGINT"),r(e)})),i.pipe(n.stdin)}}}}(),o=function(){if(Yl)return Xl;Yl=1;const e=_c,t=Qc();return Xl=class{constructor(i){i=i||{},this.options=i||{},this.name="StreamTransport",this.version=e.version,this.logger=t.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos","\r\n"].includes((i.newline||"").toString().toLowerCase())}send(e,t){e.message.keepBcc=!0;let i=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),s=[].concat(i.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s> using %s line breaks",n,s.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate((()=>{let i;try{i=e.message.createReadStream()}catch(e){return this.logger.error({err:e,tnx:"send",messageId:n},"Creating send stream failed for %s. %s",n,e.message),t(e)}if(!this.options.buffer)return i.once("error",(e=>{this.logger.error({err:e,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,e.message)})),t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:i});let s=[],o=0;i.on("readable",(()=>{let e;for(;null!==(e=i.read());)s.push(e),o+=e.length})),i.once("error",(e=>(this.logger.error({err:e,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,e.message),t(e)))),i.on("end",(()=>t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:Buffer.concat(s,o)})))}))}}}(),a=function(){if(Fl)return zl;Fl=1;const e=_c,t=Qc();return zl=class{constructor(i){i=i||{},this.options=i||{},this.name="JSONTransport",this.version=e.version,this.logger=t.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,t){e.message.keepBcc=!0;let i=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),s=[].concat(i.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Composing JSON structure of %s to <%s>",n,s.join(", ")),setImmediate((()=>{e.normalize(((e,s)=>e?(this.logger.error({err:e,tnx:"send",messageId:n},"Failed building JSON structure for %s. %s",n,e.message),t(e)):(delete s.envelope,delete s.normalizedHeaders,t(null,{envelope:i,messageId:n,message:this.options.skipEncoding?s:JSON.stringify(s)}))))}))}}}(),c=Pl(),l=Rc(),u=_c,p=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),d=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),m=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,h=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase());let g=!1;return fc.createTransport=function(r,l){let u,p,d;return("object"==typeof r&&"function"!=typeof r.send||"string"==typeof r&&/^(smtps?|direct):/i.test(r))&&(p=(u="string"==typeof r?r:r.url)?t.parseConnectionUrl(u):r,r=p.pool?new i(p):p.sendmail?new s(p):p.streamTransport?new o(p):p.jsonTransport?new a(p):p.SES?new c(p):new n(p)),d=new e(r,p,l),d},fc.createTestAccount=function(e,i){let n;if(i||"function"!=typeof e||(i=e,e=!1),i||(n=new Promise(((e,n)=>{i=t.callbackPromise(e,n)}))),h&&g)return setImmediate((()=>i(null,g))),n;e=e||p;let s=[],o=0,a={},r={requestor:u.name,version:u.version};m&&(a.Authorization="Bearer "+m);let c=l(e+"/user",{contentType:"application/json",method:"POST",headers:a,body:Buffer.from(JSON.stringify(r))});return c.on("readable",(()=>{let e;for(;null!==(e=c.read());)s.push(e),o+=e.length})),c.once("error",(e=>i(e))),c.once("end",(()=>{let e,t,n=Buffer.concat(s,o);try{e=JSON.parse(n.toString())}catch(e){t=e}return t?i(t):"success"!==e.status||e.error?i(new Error(e.error||"Request failed")):(delete e.status,g=e,void i(null,g))})),n},fc.getTestMessageUrl=function(e){if(!e||!e.response)return!1;let t=new Map;return e.response.replace(/\[([^\]]+)\]$/,((e,i)=>{i.replace(/\b([A-Z0-9]+)=([^\s]+)/g,((e,i,n)=>{t.set(i,n)}))})),!(!t.has("STATUS")||!t.has("MSGID"))&&(g.web||d)+"/message/"+t.get("MSGID")},fc}
/*!
   * w-email v1.0.33
   * (c) 2018-2021 yuda-lyu(semisphere)
   * Released under the MIT License.
   */!function(e){e.exports=function(e){var t=Array.isArray,i="object"==typeof Mt&&Mt&&Mt.Object===Object&&Mt,n="object"==typeof self&&self&&self.Object===Object&&self,s=i||n||Function("return this")(),o=s.Symbol,a=Object.prototype,r=a.hasOwnProperty,c=a.toString,l=o?o.toStringTag:void 0,u=Object.prototype.toString,p="[object Null]",d="[object Undefined]",m=o?o.toStringTag:void 0;function h(e){return null==e?void 0===e?d:p:m&&m in Object(e)?function(e){var t=r.call(e,l),i=e[l];try{e[l]=void 0;var n=!0}catch(e){}var s=c.call(e);return n&&(t?e[l]=i:delete e[l]),s}(e):function(e){return u.call(e)}(e)}var g="[object Symbol]";function f(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&h(e)==g}var w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/;function x(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var D,v="[object AsyncFunction]",M="[object Function]",C="[object GeneratorFunction]",I="[object Proxy]",b=s["__core-js_shared__"],L=(D=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",A=Function.prototype.toString,E=/^\[object .+?Constructor\]$/,N=Function.prototype,T=Object.prototype,S=N.toString,k=T.hasOwnProperty,Z=RegExp("^"+S.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function j(e){if(!x(e)||L&&L in e)return!1;var t=function(e){if(!x(e))return!1;var t=h(e);return t==M||t==C||t==v||t==I}(e)?Z:E;return t.test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function X(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return j(i)?i:void 0}var Y=X(Object,"create"),z=Object.prototype.hasOwnProperty,F=Object.prototype.hasOwnProperty;function G(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function H(e,t){for(var i,n,s=e.length;s--;)if((i=e[s][0])===(n=t)||i!=i&&n!=n)return s;return-1}G.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},G.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},G.prototype.get=function(e){var t=this.__data__;if(Y){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return z.call(t,e)?t[e]:void 0},G.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:F.call(t,e)},G.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this};var K=Array.prototype.splice;function B(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}B.prototype.clear=function(){this.__data__=[],this.size=0},B.prototype.delete=function(e){var t=this.__data__,i=H(t,e);return!(i<0||(i==t.length-1?t.pop():K.call(t,i,1),--this.size,0))},B.prototype.get=function(e){var t=this.__data__,i=H(t,e);return i<0?void 0:t[i][1]},B.prototype.has=function(e){return H(this.__data__,e)>-1},B.prototype.set=function(e,t){var i=this.__data__,n=H(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var W=X(s,"Map");function U(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function P(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}P.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(W||B),string:new G}},P.prototype.delete=function(e){var t=U(this,e).delete(e);return this.size-=t?1:0,t},P.prototype.get=function(e){return U(this,e).get(e)},P.prototype.has=function(e){return U(this,e).has(e)},P.prototype.set=function(e,t){var i=U(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var V="Expected a function";function _(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(V);var i=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=i.cache;if(o.has(s))return o.get(s);var a=e.apply(this,n);return i.cache=o.set(s,a)||o,a};return i.cache=new(_.Cache||P),i}_.Cache=P;var R,Q,O,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/\\(\\)?/g,$=(R=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(J,(function(e,i,n,s){t.push(n?s.replace(q,"$1"):i||e)})),t},Q=_(R,(function(e){return 500===O.size&&O.clear(),e})),O=Q.cache,Q),ee=$,te=1/0,ie=o?o.prototype:void 0,ne=ie?ie.toString:void 0;function se(e){if("string"==typeof e)return e;if(t(e))return function(e,t){for(var i=-1,n=null==e?0:e.length,s=Array(n);++i<n;)s[i]=t(e[i],i,e);return s}(e,se)+"";if(f(e))return ne?ne.call(e):"";var i=e+"";return"0"==i&&1/e==-te?"-0":i}function oe(e,i){return t(e)?e:function(e,i){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!f(e))||y.test(e)||!w.test(e)||null!=i&&e in Object(i)}(e,i)?[e]:ee(function(e){return null==e?"":se(e)}(e))}var ae=1/0;function re(e){if("string"==typeof e||f(e))return e;var t=e+"";return"0"==t&&1/e==-ae?"-0":t}function ce(e,t,i){var n=null==e?void 0:function(e,t){for(var i=0,n=(t=oe(t,e)).length;null!=e&&i<n;)e=e[re(t[i++])];return i&&i==n?e:void 0}(e,t);return void 0===n?i:n}function le(e){return"[object String]"===Object.prototype.toString.call(e)}function ue(e){return!(!le(t=e)||""===t)&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);var t}return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=function(){let e,t,i=new Promise((function(){e=arguments[0],t=arguments[1]}));return i.resolve=e,i.reject=t,i}(),n=ce(t,"srcName","system by w-email"),s=ce(t,"srcEmail","");if(!ue(s))return i.reject("srcEmail is not email"),i;let o=ce(t,"srcPW",""),a=ce(t,"srcHost","smtp.gmail.com"),r=ce(t,"srcPort",465),c=ce(t,"emTitle",""),l=ce(t,"emContent",""),u=ce(t,"emAttachments",[]);var p;p=u,"[object Object]"===Object.prototype.toString.call(p)&&(u=[u]);let d=ce(t,"toEmails",[]);le(d)&&(d=[d]);let m=ce(t,"toEmailsCC",[]);le(m)&&(m=[m]);let h=ce(t,"toEmailsBCC",[]);le(h)&&(h=[h]);let g=e.createTransport({host:a,port:r,auth:{user:s,pass:o},secure:465===r}),f={from:`${n} <${s}>`,to:d.join(","),cc:m.join(","),bcc:h.join(","),subject:c,html:l,attachments:u};return g.sendMail(f,(function(e,t){e?i.reject(e):i.resolve(t.response)})),i}}(Vl())}(gc);var _l=Ct(gc.exports);function Rl(e,t={}){let i=[],n=ve(t,"useKeyForError",null);Tt(n)||(n=!1);let s=ve(t,"useOnlyOneError",null);if(Tt(s)||(s=!1),Ie(e)||(n?i.push("keyInvalidPassword"):i.push("密碼非有效字串")),jo(i)>0)throw new Error(i[0]);let o=ve(t,"numLenMin","");Ve(o)||(o=8),o=Pe(o);let a=ve(t,"numLenMax","");if(Ve(a)||(a=30),a=Pe(a),o>a&&(n?i.push("keyLimNumLenMinOrMax"):i.push("設定密碼最小長度大於最大長度")),jo(i)>0)throw new Error(i[0]);var r;if(/\s/.test(e)&&(n?i.push("keyLimHasSpace"):i.push("密碼不可包含空白字元")),s&&jo(i)>0)throw new Error(i[0]);if(jo(e)<o&&(n?i.push("keyLimNumLenMin"):i.push(`密碼長度須大於等於${o}個字元`)),s&&jo(i)>0)throw new Error(i[0]);if(jo(e)>a&&(n?i.push("keyLimNumLenMax"):i.push(`密碼長度須小於等於${a}個字元`)),s&&jo(i)>0)throw new Error(i[0]);if(be(r=e)&&null!==r.match(/^.*[A-Z]+.*$/)&&function(e){return!!be(e)&&!(null===e.match(/^.*[a-z]+.*$/))}(e)&&function(e){return!!be(e)&&!(null===e.match(/^.*[0-9]+.*$/))}(e)&&(e=>[...e].some((e=>"!@#$%^&*()-_=+[]{}|;:,.?~".includes(e))))(e)||(n?i.push("keyLimCombination"):i.push("密碼須包含大寫、小寫英文、數字、特殊符號各1個字元")),s&&jo(i)>0)throw new Error(i[0]);if(jo(i)>0)throw new Error(i);return!0}function Ql(){let e=Zt(),t={};function i(t,i){setTimeout((()=>{e.emit(t,i)}),1)}function n(e,n={}){if(Vt(t,e))return;let s=ve(n,"fun");lt(s)||(s=async()=>{});let o=ve(n,"inputs");_e(o)||(o=[]);let a=ve(n,"timeExpired");Ve(a)||(a=5e3),a=Pe(a),t[e]={needExec:!0,fun:s,running:!1,inputs:o,value:null,time:null,timeExpired:a},i("message",{fun:"set",key:e,timeExpired:a})}async function s(e){if(Vt(t,e)){let n;i("message",{fun:"get",key:e,msg:"waiting"}),await jt((()=>!t[e].running),{timeInterval:1e3});let s=Date.now();n=t[e].needExec;let o=s-t[e].time;return n?i("message",{fun:"get",key:e,msg:"execute first"}):t[e].timeExpired>0&&o>t[e].timeExpired&&(i("message",{fun:"get",key:e,msg:"execute by timeExpired",timeDiff:o}),n=!0),n?(i("message",{fun:"get",key:e,msg:"fun start"}),t[e].running=!0,t[e].value=await t[e].fun(...t[e].inputs).catch((t=>{i("error",{fun:"get",key:e,msg:t})})),t[e].needExec=!1,t[e].time=s,t[e].running=!1,i("message",{fun:"get",key:e,msg:"fun end"})):i("message",{fun:"get",key:e,msg:"use cache"}),xo(t[e].value)}return i("error",{fun:"get",key:e,msg:"invalid key"}),null}return e.set=n,e.getProxy=async function(e,t={}){return n(e,t),s(e)},e.get=s,e.update=function(e,n){Vt(t,e)&&(i("message",{fun:"updateValue",key:e}),t[e].value=n,t[e].time=Date.now())},e.clear=function(e){Vt(t,e)&&(i("message",{fun:"clear",key:e}),t[e].needExec=!0)},e.remove=function(e){Vt(t,e)&&(i("message",{fun:"remove",key:e}),delete t[e])},e}function Ol(e){let t="";if(ct(e))t=e.message;else{if(Ie(e))return e;if(Me(e))return Vt(e,"message")?e.message:JSON.stringify(e);if(_e(e))return JSON.stringify(e);t=zt(e)}return t}var Jl,ql={exports:{}},$l={exports:{}};!function(e){var t;e.exports=(t=Kt(),Jl||(Jl=1,function(e){var t,i,n,s,o,a,r;e.exports=(n=(i=r=Kt()).lib,s=n.Base,o=n.WordArray,(a=i.x64={}).Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=s.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var s=e[n];i.push(s.high),i.push(s.low)}return o.create(i,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;n<i;n++)t[n]=t[n].clone();return e}}),r)}($l)),function(){var e=t,i=e.lib.Hasher,n=e.x64,s=n.Word,o=n.WordArray,a=e.algo;function r(){return s.create.apply(s,arguments)}var c=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=r()}();var u=a.SHA512=i.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],a=i[3],r=i[4],u=i[5],p=i[6],d=i[7],m=n.high,h=n.low,g=s.high,f=s.low,w=o.high,y=o.low,x=a.high,D=a.low,v=r.high,M=r.low,C=u.high,I=u.low,b=p.high,L=p.low,A=d.high,E=d.low,N=m,T=h,S=g,k=f,Z=w,j=y,X=x,Y=D,z=v,F=M,G=C,H=I,K=b,B=L,W=A,U=E,P=0;P<80;P++){var V,_,R=l[P];if(P<16)_=R.high=0|e[t+2*P],V=R.low=0|e[t+2*P+1];else{var Q=l[P-15],O=Q.high,J=Q.low,q=(O>>>1|J<<31)^(O>>>8|J<<24)^O>>>7,$=(J>>>1|O<<31)^(J>>>8|O<<24)^(J>>>7|O<<25),ee=l[P-2],te=ee.high,ie=ee.low,ne=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,se=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),oe=l[P-7],ae=oe.high,re=oe.low,ce=l[P-16],le=ce.high,ue=ce.low;_=(_=(_=q+ae+((V=$+re)>>>0<$>>>0?1:0))+ne+((V+=se)>>>0<se>>>0?1:0))+le+((V+=ue)>>>0<ue>>>0?1:0),R.high=_,R.low=V}var pe,de=z&G^~z&K,me=F&H^~F&B,he=N&S^N&Z^S&Z,ge=T&k^T&j^k&j,fe=(N>>>28|T<<4)^(N<<30|T>>>2)^(N<<25|T>>>7),we=(T>>>28|N<<4)^(T<<30|N>>>2)^(T<<25|N>>>7),ye=(z>>>14|F<<18)^(z>>>18|F<<14)^(z<<23|F>>>9),xe=(F>>>14|z<<18)^(F>>>18|z<<14)^(F<<23|z>>>9),De=c[P],ve=De.high,Me=De.low,Ce=W+ye+((pe=U+xe)>>>0<U>>>0?1:0),Ie=we+ge;W=K,U=B,K=G,B=H,G=z,H=F,z=X+(Ce=(Ce=(Ce=Ce+de+((pe+=me)>>>0<me>>>0?1:0))+ve+((pe+=Me)>>>0<Me>>>0?1:0))+_+((pe+=V)>>>0<V>>>0?1:0))+((F=Y+pe|0)>>>0<Y>>>0?1:0)|0,X=Z,Y=j,Z=S,j=k,S=N,k=T,N=Ce+(fe+he+(Ie>>>0<we>>>0?1:0))+((T=pe+Ie|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+T,n.high=m+N+(h>>>0<T>>>0?1:0),f=s.low=f+k,s.high=g+S+(f>>>0<k>>>0?1:0),y=o.low=y+j,o.high=w+Z+(y>>>0<j>>>0?1:0),D=a.low=D+Y,a.high=x+X+(D>>>0<Y>>>0?1:0),M=r.low=M+F,r.high=v+z+(M>>>0<F>>>0?1:0),I=u.low=I+H,u.high=C+G+(I>>>0<H>>>0?1:0),L=p.low=L+B,p.high=b+K+(L>>>0<B>>>0?1:0),E=d.low=E+U,d.high=A+W+(E>>>0<U>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=i._createHelper(u),e.HmacSHA512=i._createHmacHelper(u)}(),t.SHA512)}(ql);var eu=Ct(ql.exports),tu={exports:{}};!function(e){e.exports=Kt().enc.Hex}(tu);var iu=Ct(tu.exports);function nu(e,t,i={}){let n=ve(i,"mode","");if(be(n)||(n="sha512"),"sha512"!==n)throw new Error("暫時不支援sha512以外方法");let s=`${e}:${t}`;return s=function(e,t=!1){if(!be(e))return"";if(!Tt(t))return"";let i=eu(e),n="";return n=t?i.toString(Ut):i.toString(iu),n}(s),s}function su(e,t,{srLog:i,srEmail:n,salt:s,minExpired:o,kpLang:a,chpwEmTitle:r,chpwEmContent:c}){let l=async(t,i,n={})=>{let s=null,o=ve(n,"deletePassword");Tt(o)||(o=!0);let a=await e.users.select({[t]:i,isActive:"y"}).catch((e=>{s=e}));if(s)return console.log(s),console.log("keyUser",t),console.log("valueUser",i),console.log("failed to find user"),Promise.reject("failed to find user");o&&(a=Hn(a,(e=>(delete e.password,e))));let r=jo(a);return 0===r?(console.log("keyUser",t),console.log("valueUser",i),console.log(`can not find the user by ${t}`),Promise.reject(`can not find the user by ${t}`)):r>=2?(console.log("keyUser",t),console.log("valueUser",i),console.log(`duplicate ${t}`),Promise.reject(`duplicate ${t}`)):a[0]},u=async(e,t)=>await l(e,t),p=async(e,t={})=>await u("id",e),d=async t=>{let i=null;if(!qe(o))return console.log("minExpired",o),console.log("invalid minExpired"),Promise.reject("invalid minExpired");let n=jr.tokens.funNew({userId:t});n.timeEnd=bt().add(o,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");let s=ve(n,"token","");return await e.tokens.insert(n).catch((e=>{i=e})),i?(console.log(i),console.log("token",s),console.log("can not create a token from userId"),Promise.reject("can not create a token from userId")):s},m=async(t,n={})=>{let s=await e.tokens.select({token:t}),o=jo(s);if(0===o)return console.log("token",t),console.log("invalid token"),Promise.reject("invalid token");if(o>=2)return console.log("token",t),console.log("duplicate tokens"),Promise.reject("duplicate tokens");let a=ve(s,0,""),r=ve(a,"userId",""),c=await(async(e,t={})=>{let i=ve(e,"timeEnd","");if(!zr(i))return console.log("tk",e),console.log("timeEnd",i),console.log("invalid timeEnd"),Promise.reject("invalid timeEnd");let n=ve(e,"isApp",""),s=ve(t,"fun",null),o=bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")<i,a=!0;if("y"!==n&&lt(s)){let t=ve(e,"userId","");a=s(e,await p(t)),gt(a)&&(a=await a)}return o&&a})(a,n);return i.info({event:"fun-checkToken",token:t,userId:r,res:c}),c||console.log(`block token[${t}]`),c},h=async(e,t={})=>{let i=null;return await m(e,t).then((e=>{!1===e&&(i="token expired")})).catch((e=>{i=e})),null===i||Promise.reject(i)},g=(e,t)=>{be(e)||(e="eng");let i="";try{Rl(t,{useKeyForError:!0,useOnlyOneError:!0})}catch(e){i=e.message,console.log("keyErr",i)}let n=null;if(be(i)){return n={state:"error",msg:ve(a,`${e}.userPassword_${i}`,"")},n}return n={state:"success",msg:"ok"},n},f=async(i,n,s,o={})=>{let a=ve(o,"resetOrder");Tt(a)||(a=!1),n=function(e,t,i=""){return Je(e)&&Je(t)?Hn(e,(e=>Er(e,t,i))):[]}(n,jr[i].keys),a&&(n=Hn(n,((e,t)=>(e.order=t+1,e))));let r=(e,t)=>{let i=null,n={};return Ti(e,((e,s)=>{let o=ve(e,t,"");return be(o)?Vt(n,o)?(i=`rows[${s}].${t}[${o}] is duplicate`,!1):void(n[o]=!0):(i=`rows[${s}].${t} is not an effective string`,!1)})),i},c=null;if(function(e,t){function i(e){return _e(e)?e:[e]}if(Oe(e))return!1;if(0===(e=i(e)).length)return!1;if(Oe(e))return!1;if(0===(t=i(t)).length)return!1;for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++)if(n=e[i],s=t[o],Tn(n,s))return!0;var n,s;return!1}(i,["users"])){if(c=r(n,"id"),null!==c)return Promise.reject(c);if(c=r(n,"email"),null!==c)return Promise.reject(c)}let l=n,u=function(e,t,i,n={}){let s=ve(n,"withInfor");Tt(s)||(s=!0);let o={del:[],add:[],same:[],diff:[]};if(!be(i))return console.log("invalid key"),s&&(o.infor={}),o;_e(e)||(e=[e]),_e(t)||(t=[t]),e=ar(e,(e=>Vt(e,i))),t=ar(t,(e=>Vt(e,i)));let a=new Map(t.map((e=>[e[i],e])));for(let t of e){let e=a.get(t[i]);e?(JSON.stringify(t)===JSON.stringify(e)?o.same.push(e):o.diff.push(e),a.delete(t[i])):o.del.push(t)}if(o.add=Array.from(a.values()),s){let e={};for(let t of o.del)e[t[i]]="del";for(let t of o.add)e[t[i]]="add";for(let t of o.diff)e[t[i]]="diff";for(let t of o.same)e[t[i]]="same";o.infor=e}return o}(await e[i].select(),l,s);return jo(u.del)>0&&await t("",i,"del",u.del),jo(u.add)>0&&await t("",i,"insert",u.add),jo(u.diff)>0&&await t("",i,"save",u.diff),l},w=async t=>{let i=await e.tokens.select({token:t}),n=jo(i);if(0===n)return console.log("token",t),console.log("invalid token"),Promise.reject("invalid token");if(n>=2)return console.log("token",t),console.log("duplicate tokens"),Promise.reject("duplicate tokens");let s=ve(i,0,null),o=ve(s,"isApp",""),a=null;if("y"!==o){let e=ve(s,"userId","");a=await p(e)}else{let e=ve(s,"userId","");if(!be(e))return console.log("tk",s),console.log("invalid userId from token"),Promise.reject("invalid userId from token");a={id:e,account:"no account",name:"no name",email:"no email",description:"no description",from:"no from",redir:"no redir",isAdmin:"y",timeVerified:"2000-01-01T00:00:00.000+08:00",timeExpired:"",timeBlocked:"",isActive:"y"}}return{id:a.id,account:a.account,name:a.name,email:a.email,description:a.description,from:a.from,redir:a.redir,isApp:"y"===o?"y":"n",isAdmin:a.isAdmin,timeVerified:a.timeVerified,timeExpired:a.timeExpired,timeBlocked:a.timeBlocked,isActive:a.isActive}},y=async(e,t,i={})=>{let n=await u(e,t);return Ce(n)?{id:n.id,account:n.account,name:n.name,email:n.email,description:n.description,from:n.from,redir:n.redir,isAdmin:n.isAdmin,timeVerified:n.timeVerified,timeExpired:n.timeExpired,timeBlocked:n.timeBlocked,isActive:n.isActive}:null},x=async(t={})=>{let i=ve(t,"needActive");Tt(i)||(i=!1);let n=ve(t,"deletePassword");Tt(n)||(n=!0);let s={};i&&(s={isActive:"y"});let o=await e.users.select(s);return n&&(o=Hn(o,(e=>(delete e.password,e)))),o},D=Ql(),v=async(e,t={})=>(await h(e,t),await x(t)),M=async e=>e=await f("users",e,"id",{resetOrder:!0}),C=async()=>await e.tokens.select(),I=Ql(),b=async()=>await e.ips.select(),L=Ql(),A=!1;setInterval((async()=>{A||(A=!0,await(async()=>{let t=await x({});await Po(t,(async t=>{let i=!Gr(t),n=be(t.timeBlocked);i&&n&&await e.users.save({id:t.id,timeBlocked:""})}))})().finally((()=>{A=!1})))}),2e3);let E=!1;setInterval((async()=>{E||(E=!0,await(async()=>{let t=await b();await Po(t,(async t=>{let i=!Gr(t),n=be(t.timeBlocked);i&&n&&await e.ips.save({id:t.id,timeBlocked:""})}))})().finally((()=>{E=!1})))}),2e3);let N={getTokenByKV:async(t,i)=>{let n=null,s=await e.tokens.select({[t]:i}).catch((e=>{n=e}));if(n)return console.log(n),console.log("keyToken",t),console.log("valueToken",i),console.log("failed to find token"),Promise.reject("failed to find token");let o=jo(s);return 0===o?Promise.reject(`can not find the token by keyToken[${t}]`):o>=2?(console.log("keyToken",t),console.log("valueToken",i),console.log(`duplicate token by keyToken[${t}]`),Promise.reject(`duplicate token by keyToken[${t}]`)):s[0]},checkUserPassword:g,checkTokenAndChangePassword:async(t,o,u,p)=>{if(await h(t),be(o)||(o="eng"),!be(u))return Promise.reject("invalid oldPassword");let d=g(o,p);if("error"===d.state)return Promise.reject(d.msg);let m="";m=ve(await w(t),"id","");let f=await l("id",m,{deletePassword:!1}),y=ve(f,"password","");if(nu(u,s)!==y)return Promise.reject("incorrect old password");let x=ve(f,"email","");if(!be(x))return console.log("token",t),console.log("u",f),Promise.reject("invalid email");x="firsemisphere@gmail.com";let D=nu(p,s);await e.users.save({id:m,password:D});try{let e=ve(a,`${o}.webName`,"");if(!be(e))return console.log("get(kpLang, lang)",ve(a,o)),console.log("lang",o),Promise.reject("invalid sender");let t=ve(f,"name","unknow"),i=ve(r,o,"");if(!be(i))return console.log("chpwEmTitle",r),console.log("lang",o),Promise.reject("invalid title");let s=ve(c,o,"");if(!be(s))return console.log("chpwEmContent",c),console.log("lang",o),Promise.reject("invalid content");s=s.replaceAll("{sender}",e),s=s.replaceAll("{name}",t),await n.send(e,i,s,x)}catch(e){console.log(e),i.error({event:"fun-changePassword-sendEmail",token:t,lang:o,oldPassword:u,newPassword:p,err:Ol(e)})}},getIpByKV:async(t,i)=>{let n=null,s=await e.ips.select({[t]:i}).catch((e=>{n=e}));if(n)return console.log(n),console.log("keyIp",t),console.log("valueIp",i),console.log("failed to find ip"),Promise.reject("failed to find ip");let o=jo(s);return 0===o?Promise.reject(`can not find the ip by keyIp[${t}]`):o>=2?(console.log("keyIp",t),console.log("valueIp",i),console.log(`duplicate ip by keyIp[${t}]`),Promise.reject(`duplicate ip by keyIp[${t}]`)):s[0]},getGenUserByKV:u,getGenUserByUserId:p,getGenUserByAccount:async(e,t={})=>await u("account",e),loginByAccountAndPassword:async(e,t)=>{let i=nu(t,s),n=await l("account",e,{deletePassword:!1});if(i!==ve(n,"password",""))return Promise.reject("incorrect user account or password");let o=ve(n,"id",""),a=await d(o);return{id:n.id,account:n.account,name:n.name,email:n.email,description:n.description,from:n.from,redir:n.redir,isAdmin:n.isAdmin,isActive:n.isActive,token:a}},logoutByToken:async t=>{let n=null,s=await e.tokens.select({token:t}),o=jo(s);if(0===o)return console.log("token",t),console.log("invalid token"),Promise.reject("invalid token");if(o>=2)return console.log("token",t),console.log("duplicate tokens"),Promise.reject("duplicate tokens");let a=ve(s,0,""),r=ve(a,"userId",""),c=await e.tokens.del({id:a.id}).catch((e=>{n=e}));return n?(console.log(n),console.log("token",t),console.log("failed to delete token"),Promise.reject("failed to delete token")):(c=ve(c,"0.nDeleted",0),1!==c?(console.log("token",t),console.log("can not delete the token"),Promise.reject("can not delete the token")):(i.info({event:"fun-logout",token:t,userId:r}),!0))},checkToken:h,refreshToken:async t=>{let i=null,n=await e.tokens.select({token:t}),s=jo(n);if(0===s)return console.log("token",t),console.log("invalid token"),Promise.reject("invalid token");if(s>=2)return console.log("token",t),console.log("duplicate tokens"),Promise.reject("duplicate tokens");let a=ve(n,0,""),r=ve(a,"timeEnd","");if(!zr(r))return console.log("token",t),console.log("timeEnd",r),console.log("invalid timeEnd"),Promise.reject("invalid timeEnd");let c=bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ");if(c>=r)return console.log("token",t),console.log("tn",c),console.log("timeEnd",r),console.log("token expired"),Promise.reject("token expired");let l=bt().add(o,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),u=bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ");return await e.tokens.save({id:a.id,timeEnd:l,timeUpdate:u}).catch((e=>{i=e})),i?(console.log(i),console.log("token",t),console.log("can not update timeEnd for token"),Promise.reject("can not update timeEnd for token")):l},getUserByToken:w,checkTokenAndGetUserByToken:async(e,t,i={})=>(await h(e,i),await w(t)),getUserInfor:y,checkTokenAndGetUserInfor:async(e,t,i,n={})=>(await h(e,n),await y(t,i)),getUsersList:x,getUsersListCache:async()=>await D.getProxy("fun",{fun:x,inputs:null,timeExpired:3e4}),checkTokenAndGetUsersList:v,checkTokenAndGetActiveUsersList:async(e,t={})=>await v(e,{...t,needActive:!0}),updateUsersList:M,checkTokenAndUpdateUsersList:async(e,t,i={})=>(await h(e,i),t=await M(t)),getTokensList:C,getTokensListCache:async()=>await I.getProxy("fun",{fun:C,inputs:null,timeExpired:3e4}),checkTokenAndGetTokensList:async(e,t={})=>(await h(e,t),await C()),checkTokenAndUpdateTokensList:async(e,t,i={})=>(await h(e,i),t=await(async e=>await f("tokens",e,"id",{resetOrder:!1}))(t)),getIpsList:b,getIpsListCache:async()=>await L.getProxy("fun",{fun:b,inputs:null,timeExpired:3e4}),checkTokenAndGetIpsList:async(e,t={})=>(await h(e,t),await b()),checkTokenAndUpdateIpsList:async(e,t,i={})=>(await h(e,i),t=await(async e=>await f("ips",e,"id",{resetOrder:!1}))(t))};return N}let ou={csIng:{eng:"Connecting...",cht:"連線中..."},csLogin:{eng:"Logged in",cht:"已登入"},csLogout:{eng:"Logged out",cht:"已登出"},csErrConn:{eng:"Unable to connect",cht:"無法連線"},csErrLogin:{eng:"Login denied",cht:"拒絕登入"},aggridLanguage:{eng:"en",cht:"zh-tw"},id:{eng:"ID",cht:"主鍵"},systemMessage:{eng:"System message",cht:"系統確認訊息"},ok:{eng:"OK",cht:"確認"},no:{eng:"No",cht:"取消"},yes:{eng:"Yes",cht:"確定"},y:{eng:"Yes",cht:"是"},n:{eng:"No",cht:"否"},empty:{eng:"Empty",cht:"無"},to:{eng:"To",cht:"至"},at:{eng:"At",cht:"於"},unknow:{eng:"Unknow",cht:"未知"},waitingData:{eng:"Waiting data...",cht:"等待數據中..."},isEditabled:{eng:"Editable",cht:"是否編輯"},saveChanges:{eng:"Save changes",cht:"儲存變更"},from:{eng:"From",cht:"來源"},save:{eng:"Save",cht:"儲存"},close:{eng:"Close",cht:"關閉"},send:{eng:"Send",cht:"送出"},cancel:{eng:"Cancel",cht:"取消"},processing:{eng:"Processing...",cht:"處理中請稍後..."},anUnexpectedErrorOccurred:{eng:"An unexpected error occurred, please contact the administrator",cht:"發生非預期錯誤，請洽管理員"},getDataError:{eng:"Failed to get data, please try again later",cht:"取得數據失敗，請稍後再試"},userIdCreate:{eng:"ID of the created user",cht:"創建使用者主鍵"},timeCreate:{eng:"Created time",cht:"創建時間"},userIdUpdate:{eng:"ID of the updated user",cht:"最新變更使用者主鍵"},timeUpdate:{eng:"Updated time",cht:"最新變更時間"},userId:{eng:"ID of the user",cht:"使用者主鍵"},account:{eng:"Account",cht:"帳號"},password:{eng:"Password",cht:"密碼"},toggleToShowPassword:{eng:"To show password",cht:"變更為顯示密碼模式"},toggleToHidePassword:{eng:"To hide password",cht:"變更為隱藏密碼模式"},username:{eng:"Username",cht:"使用者姓名"},email:{eng:"Email",cht:"電子郵件"},name:{eng:"Name",cht:"名稱"},description:{eng:"Description",cht:"說明"},noDescription:{eng:"No description",cht:"無說明"},redir:{eng:"Redirect",cht:"登入後轉至網址"},login:{eng:"Log in",cht:"登入"},logout:{eng:"Log out",cht:"登出"},menuTreeShow:{eng:"Show menu",cht:"顯示選單"},menuTreeHide:{eng:"Hide menu",cht:"隱藏選單"},mmStaInfor:{eng:"Statistics information",cht:"統計資訊"},mmStaInforMsg:{eng:"Provides important statistical information such as the current system user login frequency, key usage frequency, IP connection frequency, etc.",cht:"提供目前系統使用者登入頻率、金鑰使用頻率、IP連線頻率等重要統計資訊。"},mmUserInfor:{eng:"User information",cht:"使用者資訊"},mmUsersList:{eng:"Users list",cht:"使用者清單"},mmUsersListMsg:{eng:"Provide a list of users, which can be added, edited, deleted, etc.",cht:"提供目前使用者資料清單，可進行新增、編輯、刪除等作業。"},mmTokensList:{eng:"Tokens list",cht:"金鑰清單"},mmTokensListMsg:{eng:"Provide a list of tokens, which can be deleted, etc.",cht:"提供目前金鑰資料清單，可進行強制登出等作業。"},mmIpsList:{eng:"Ips list",cht:"IP清單"},mmIpsListMsg:{eng:"Provide a list of tokens, which can be deleted, etc.",cht:"提供目前存取IP清單，可進行封鎖等作業。"},nowTokensList:{eng:"Tokens list",cht:"金鑰清單"},nowBlockList:{eng:"Block list",cht:"封鎖清單"},systemTokenList:{eng:"System token list",cht:"系統金鑰清單"},failedLoginForNoWebKey:{eng:"Can not get the web key",cht:"無有效站台唯一識別資訊"},failedLoginForNoToken:{eng:"Can not get the token",cht:"無有效金鑰"},failedLoginForNoRedir:{eng:"Can not get the url for redirection",cht:"無有效轉址"},failedLoginForCatch:{eng:"User account or password is incorrect",cht:"使用者帳密錯誤無法登入"},failedLogoutForNoWebKey:{eng:"Can not get the web key",cht:"無有效站台唯一識別資訊"},failedLogoutForCatch:{eng:"Can not logout",cht:"使用者登出失敗"},userStatus:{eng:"Status",cht:"帳號狀態"},isVerified:{eng:"Verified",cht:"帳號是否驗證"},isVerifiedY:{eng:"Verified",cht:"帳號已驗證"},isVerifiedN:{eng:"Not verified",cht:"帳號未驗證"},userTimeVerified:{eng:"Verified time",cht:"帳號驗證狀態與時間"},isVerifiedWaiting:{eng:"Waiting for verification",cht:"等待驗證中"},isExpired:{eng:"Expired",cht:"帳號是否過期"},isExpiredY:{eng:"Expired",cht:"帳號已過期"},isExpiredN:{eng:"Not expired",cht:"帳號未過期"},userTimeExpired:{eng:"Expired time",cht:"帳號過期狀態與時間"},isExpiredDeny:{eng:"Account login prohibited",cht:"禁止帳號登入"},isExpiredNever:{eng:"Never expires",cht:"永不過期"},isBlocked:{eng:"Blocked",cht:"帳號是否被封鎖"},isBlockedY:{eng:"Blocked",cht:"帳號已封鎖"},isBlockedN:{eng:"Not blocked",cht:"帳號未封鎖"},userTimeBlocked:{eng:"Blocked time",cht:"帳號封鎖狀態與時間"},isBlockedNormalStatus:{eng:"Normal status",cht:"狀態正常"},isAdmin:{eng:"Administrator",cht:"是否為系統管理者"},isAdminY:{eng:"System Administrator",cht:"系統管理者"},isAdminN:{eng:"Non-System Administrator",cht:"非系統管理者"},userRole:{eng:"Role",cht:"角色"},userRoleAdmin:{eng:"Administrator",cht:"系統管理者"},userRoleGeneral:{eng:"General",cht:"一般使用者"},isActive:{eng:"Active",cht:"帳號是否有效"},isActiveY:{eng:"Active",cht:"帳號有效"},isActiveMsgY:{eng:"Enabling",cht:"啟用中"},isActiveN:{eng:"Inactive",cht:"帳號無效"},isActiveMsgN:{eng:"Deactivated",cht:"已停用"},errInNames:{eng:"Name errors",cht:"名稱出現錯誤待修復"},errInAccounts:{eng:"Account errors",cht:"帳號出現錯誤待修復"},errInEmails:{eng:"Email errors",cht:"Email出現錯誤待修復"},errItemsByRedir:{eng:"Redirect errors",cht:"登入後轉址出現錯誤待修復"},modeEdit:{eng:"Edit mode",cht:"編輯模式"},showTabCols:{eng:"Show columns",cht:"顯示欄位"},userList:{eng:"User list",cht:"使用者清單"},userName:{eng:"Name of user",cht:"使用者名稱"},userNameEmpty:{eng:"Invalid name of user",cht:"尚未給予有效使用者名稱"},userNameDuplicate:{eng:"Duplicate name of user",cht:"使用者名稱出現重複"},userAccountEmpty:{eng:"Invalid account of user",cht:"尚未給予有效使用者帳號"},userAccountDuplicate:{eng:"Duplicate account of user",cht:"使用者帳號出現重複"},userEmailEmpty:{eng:"Empty email of user",cht:"尚未給予使用者Email"},userEmailError:{eng:"Invalid email of user",cht:"使用者Email格式錯誤"},userEmailDuplicate:{eng:"Duplicate email of user",cht:"使用者Email出現重複"},userRedirEmpty:{eng:"Invalid redirect of user",cht:"尚未給予有效登入後轉址"},userTimeEmpty:{eng:"Invalid time",cht:"無"},userAddEmpty:{eng:"No user",cht:"尚未新增使用者資料"},userAdd:{eng:"Add user",cht:"新增使用者"},userAddNameNew:{eng:"New user",cht:"新使用者"},userAddIdNew:{eng:"Waiting generation",cht:"待自動給予"},userCopy:{eng:"Copy user",cht:"複製使用者"},userCopyNameNew:{eng:"copy",cht:"複製"},userDeleteCheckUsers:{eng:"Delete user(s)",cht:"刪除勾選使用者"},userResetPassword:{eng:"Reset password",cht:"重設密碼"},userSaveUsersEmpty:{eng:"No user",cht:"未有變更使用者資料"},userSaveUsersFail:{eng:"Failed to save users",cht:"儲存使用者數據失敗"},userSaveUsersSuccess:{eng:"Save users successfully",cht:"儲存使用者數據成功"},userEditNoUserId:{eng:"Can not find the id of user",cht:"無法找到使用者Id"},userEditNoUserData:{eng:"Can not find the data of user",cht:"無法找到使用者數據"},userPassword_keyLimNumLenMinOrMax:{eng:"The minimum password length is greater than the maximum length",cht:"設定密碼最小長度大於最大長度"},userPassword_keyLimHasSpace:{eng:"Password must not contain whitespace characters",cht:"密碼不可包含空白字元"},userPassword_keyLimNumLenMin:{eng:"Password length must be greater than 8 characters",cht:"密碼長度須大於8個字元"},userPassword_keyLimNumLenMax:{eng:"Password length must be less than 30 characters",cht:"密碼長度須小於30個字元"},userPassword_keyLimCombination:{eng:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special characte",cht:"密碼須包含大寫、小寫英文、數字、特殊符號各1個字元"},userChangePassword:{eng:"Change Password",cht:"變更密碼"},userChangePasswordOldPassword:{eng:"Old password",cht:"舊密碼"},userChangePasswordNewPassword:{eng:"New password",cht:"新密碼"},userChangePasswordConfirmPassword:{eng:"Confirm password",cht:"確認新密碼"},userChangePasswordForNoOldPassword:{eng:"Please enter old password",cht:"尚未給予舊密碼"},userChangePasswordForNoNewPassword:{eng:"Please enter new password",cht:"尚未給予新密碼"},userChangePasswordForNoConfirmPassword:{eng:"Please enter confirm password",cht:"尚未給予確認密碼"},userChangePasswordNotSame:{eng:"New password and confirm password do not match",cht:"新密碼與確認密碼不一致"},userChangePasswordSuccess:{eng:"Password change successful, please log in again.",cht:"密碼變更成功，請使用新密碼重新登入。"},userChangePasswordFail:{eng:"Password change failed.",cht:"密碼變更失敗，請確認輸入密碼是否正確"},userChangePasswordForNetError:{eng:"Password validation failed. Please try again later.",cht:"密碼檢測失敗，請稍後再試"},token:{eng:"Token",cht:"金鑰"},isApp:{eng:"For app",cht:"是否為應用系統金鑰"},tokenTimeCreate:{eng:"Created time",cht:"金鑰創建時間"},tokenTimeEnd:{eng:"End time",cht:"金鑰到期時間"},tokenTimeUpdate:{eng:"End time",cht:"金鑰更新時間"},tokenTimeEmpty:{eng:"Invalid time",cht:"無"},tokenEditNoTokenId:{eng:"Can not find the id of token",cht:"無法找到金鑰Id"},tokenEditNoTokenData:{eng:"Can not find the data of token",cht:"無法找到金鑰數據"},tokenSaveTokensFail:{eng:"Failed to save tokens",cht:"儲存金鑰數據失敗"},tokenSaveTokensSuccess:{eng:"Save tokens successfully",cht:"儲存金鑰數據成功"},ip:{eng:"IP",cht:"IP"},ipTimeBlocked:{eng:"Blocked time",cht:"IP封鎖時間"},ipDeleteCheckIps:{eng:"Delete checked IP(s)",cht:"刪除勾選IP"},ipTimeEmpty:{eng:"Invalid time",cht:"無"},ipEditNoIpId:{eng:"Can not find the id of IP",cht:"無法找到IP Id"},ipEditNoIpData:{eng:"Can not find the data of IP",cht:"無法找到IP數據"},ipSaveIpsFail:{eng:"Failed to save IPs",cht:"儲存IP數據失敗"},ipSaveIpsSuccess:{eng:"Save IPs successfully",cht:"儲存IP數據成功"},statisticsInformation:{eng:"Statistics Information",cht:"統計資訊"},statisticsInformationDescription:{eng:"Provides an overview of system usage and security metrics.",cht:"提供系統使用情況和安全指標的總覽。"},userGroupInfor:{eng:"User Information",cht:"使用者資訊區"},totalUsers:{eng:"Total Users",cht:"總使用者"},activeUsers:{eng:"Active Users",cht:"活躍使用者"},blockedUsers:{eng:"Blocked Users",cht:"已封鎖使用者"},expiredUsers:{eng:"Expired Users",cht:"已過期使用者"},accessActivityMonitoring:{eng:"Access Activity Monitoring",cht:"存取活動監測"},userLoginFrequency:{eng:"User Login Frequency",cht:"使用者登入頻率"},last7Days:{eng:"Last 7 days",cht:"最近7天"},tokenUsageFrequency:{eng:"Token Usage Frequency",cht:"金鑰使用頻率"},ipConnectionFrequency:{eng:"IP Connection Frequency",cht:"IP 連線頻率"},controlStatus:{eng:"Control Status",cht:"管控狀態"},tokenCharacteristic:{eng:"Token Characteristic",cht:"金鑰狀態"},activeTokens:{eng:"Active Tokens",cht:"有效金鑰數量"},createdLast24h:{eng:"Created in last 24h",cht:"最近24小時內創建"},endingNext24h:{eng:"Ending in next 24h",cht:"未來24小時內到期"},endedTokens:{eng:"Ended Tokens",cht:"已到期金鑰數量"},ipCharacteristic:{eng:"IP Characteristic",cht:"IP狀態"},conn24h:{eng:"Connections in last 24h",cht:"最近24小時內連線數量"},blockedIps:{eng:"Blocked IPs",cht:"當前已封鎖IP數量"},selectItem1hr:{eng:"1 hour",cht:"1小時"},selectItem4hr:{eng:"4 hour",cht:"4小時"},selectItem8hr:{eng:"8 hour",cht:"8小時"},selectItem1day:{eng:"1 day",cht:"1日"},countAttempt:{eng:"Attempt",cht:"嘗試登入"},countSuccess:{eng:"Success",cht:"登入成功"},countError:{eng:"Error",cht:"登入失敗"},count:{eng:"Count",cht:"總次數"},showIndividually:{eng:"Show individually",cht:"個別顯示"},numberOrder:{eng:"No.",cht:"排序"},total:{eng:"Total",cht:"總計"},last1Day:{eng:"Last 1 day",cht:"最近1天"},last8Hour:{eng:"Last 8 hour",cht:"最近8小時"},last4Hour:{eng:"Last 4 hour",cht:"最近4小時"},last1Hour:{eng:"Last 1 hour",cht:"最近1小時"},showMax5:{eng:"Show max 5 rows",cht:"顯示前5筆"},showAll:{eng:"Show all",cht:"顯示全部"},dayCreate:{eng:"Create day",cht:"創建日期"},newUser:{eng:"New user",cht:"新使用者"},failedToAddUser:{eng:"Failed to add the user",cht:"新增使用者失敗"},successfulToAddUser:{eng:"Add the user successfully",cht:"新增使用者成功"},confirmToDeleteUser:{eng:"Do you want to delete the user[{name}]?",cht:"確認是否刪除使用者"},failedToDeleteUser:{eng:"Failed to delete the user",cht:"刪除使用者失敗"},successfulToDeleteUser:{eng:"Delete the user successfully",cht:"刪除使用者成功"},cannotShowUserDetailsInViewMode:{eng:"Can not show the user details in the view mode",cht:"非編輯模式無法查閱使用者詳細資訊"},allDefaults:{eng:"All defaults",cht:"全部項目預設值"},show:{eng:"Show",cht:"顯示"},active:{eng:"Active",cht:"啟用"},showChildren:{eng:"Show children",cht:"所屬顯示"},hideChildren:{eng:"Hide children",cht:"所屬不顯示"},activateChildren:{eng:"Activate children",cht:"所屬啟用"},deactivateChildren:{eng:"Deactivate children",cht:"所屬不啟用"},isUsernameEmpty:{eng:"Username is empty",cht:"使用者名稱不得為空"},failedToSaveUser:{eng:"Failed to save the user",cht:"變更使用者失敗"},successfulToSaveUser:{eng:"Save the user successfully",cht:"變更使用者成功"}},au=(e={})=>{let t=ve(e,"kpLangExt");Ce(t)||(t={});let i=ve(e,"webName");Ce(i)||(i={});let n=ve(e,"webDescription");Ce(n)||(n={});let s={};s={...s,...ou},Ce(t)&&(s={...s,...t}),Ce(i)&&(s={...s,webName:{...i}}),Ce(n)&&(s={...s,webDescription:{...n}});let o={};return Ti(["eng","cht"],(e=>{let t={};Ti(s,((i,n)=>{t[n]=i[e]})),o[e]=t})),o};function ru(e,t,i={}){let{minForAccountLoginFailed:n,numForAccountLoginFailed:s,minBlockForAccountLoginFailed:o,minForTokenCallApi:a,numForTokenCallApi:r,minBlockForTokenCallApi:c,minForIpCallApi:l,numForIpCallApi:u,minBlockForIpCallApi:p}=i,d={},m=async e=>{if(!Ce(e))return Promise.reject("invalid u");let t=ve(e,"timeBlocked","");if(zr(t)){return bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")<=t}return""!==t&&Promise.reject(`invalid timeBlocked[${t}]`)},h=async e=>{let i=await t.getGenUserByAccount(e);return await m(i)},g=!1;setInterval((async()=>{if(g)return;g=!0;let i=bt().add(-n,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");await Po(d,(async(n,a)=>{let r=n.filter((e=>e>=i));d[a]=r,jo(r)>s&&await(async i=>{let n=await t.getGenUserByAccount(i);if(await m(n))return;let s=bt().add(o,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");await e.users.save({id:n.id,timeBlocked:s});let a=await t.getTokenByKV("userId",n.id);await e.tokens.del({id:a.id})})(a).catch((e=>{console.log(e)}))})).finally((()=>{g=!1}))}),2e3);let f={},w=async e=>ve(f,e,[]),y=!1;setInterval((async()=>{if(y)return;y=!0;let i=bt().add(-a,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");await Po(f,(async(n,s)=>{let o=n.filter((e=>e>=i));f[s]=o,jo(o)>r&&await(async i=>{let n=await t.getTokenByKV("token",i),s=ve(n,"userId","");if(!be(s))return console.log("token",i),console.log("t",n),Promise.reject("invalid userId");let o=await t.getGenUserByUserId(s);if(await m(o))return;let a=bt().add(c,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");await e.users.save({id:o.id,timeBlocked:a}),await e.tokens.del({id:n.id})})(s).catch((e=>{console.log(e)}))})).finally((()=>{y=!1}))}),2e3);let x={},D=async e=>{if(!Ce(e))return Promise.reject("invalid oip");let t=ve(e,"timeBlocked","");if(zr(t)){return bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")<=t}return""!==t&&Promise.reject(`invalid timeBlocked[${t}]`)},v=async e=>ve(x,e,[]),M=!1;setInterval((async()=>{if(M)return;M=!0;let i=bi(x),n=await t.getIpsList(),s={};Ti(n,(e=>{let t=e.ip;s[t]=!0}));let o={};Ti(i,(e=>{o[e]=!0}));let a=[];Ti(o,((e,t)=>{Vt(s,t)||a.push(t)}));let r=Hn(a,(e=>jr.ips.funNew({ip:e})));await e.ips.insert(r).catch((e=>{console.log(e)})).finally((()=>{M=!1}))}),2e3);let C=!1;setInterval((async()=>{if(C)return;C=!0;let i=bt().add(-l,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ");await Po(x,(async(n,s)=>{let o=n.filter((e=>e>=i));x[s]=o,jo(o)>u&&await(async i=>{let n=null,s=()=>bt().add(p,"minute").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),o=null;if(await t.getIpByKV("ip",i).then((e=>{o=e})).catch((e=>{let t="can not find the ip by keyIp[ip]";e===t?o=null:n=t})),null!==n)return Promise.reject(n);if(null===o){let t=s();return o=jr.ips.funNew({ip:i,timeBlocked:t}),await e.ips.insert(o).catch((e=>{n=e})),null!==n?Promise.reject(n):void 0}if(await D(o))return;let a=s();await e.ips.save({id:o.id,timeBlocked:a})})(s).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)})).finally((()=>{C=!1}))}),2e3);let I={loginByAccountAndPassword:async(e,i)=>{if(await h(e))return Promise.reject("account blocked");let n=null;return await t.loginByAccountAndPassword(e,i).then((t=>{n={state:"success",msg:t},d[e]=[]})).catch((t=>{d[e]||(d[e]=[]),d[e].push(bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")),n={state:"error",msg:t}})),"success"===n.state?n.msg:Promise.reject(n.msg)},getBlockedByAccount:h,getBlockedByIp:async e=>{let i=null;if(!be(e))return Promise.reject("invalid ip");let n=null;return await t.getIpByKV("ip",e).then((e=>{n=e})).catch((e=>{let t="can not find the ip by keyIp[ip]";e===t?n=null:i=t})),null!==i?Promise.reject(i):null!==n&&await D(n)},callApiByToken:async e=>{f[e]||(f[e]=[]),f[e].push(bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ"))},getInforsByTokenCallApi:w,getCountsByTokenCallApi:async e=>jo(await w(e)),getIpByHeaders:e=>{let t=ve(e,"headers"),i="";if(!be(i)){let e=ve(t,"x-forwarded-for","");i=ve(as(e,","),0,""),i=os(i)}return be(i)||e&&e.info&&e.info.remoteAddress&&(i=e.info.remoteAddress,i=os(i)),be(i)||e&&e.socket&&e.socket.remoteAddress&&(i=e.socket.remoteAddress,i=os(i)),be(i)||e&&e.connection&&e.connection.remoteAddress&&(i=e.connection.remoteAddress,i=os(i)),be(i)||(console.log("headers",t),console.log("can not get ip of user")),i},callApiByIp:async e=>{x[e]||(x[e]=[]),x[e].push(bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ"))},getInforsByIpCallApi:v,getCountsByIpCallApi:async e=>jo(await v(e))};return I}let cu=a.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(du).href:"undefined"==typeof document?location.href:y&&"SCRIPT"===y.tagName.toUpperCase()&&y.src||new URL("w-web-sso.umd.js",document.baseURI).href),lu=e.dirname(cu);let uu=a.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(du).href:"undefined"==typeof document?location.href:y&&"SCRIPT"===y.tagName.toUpperCase()&&y.src||new URL("w-web-sso.umd.js",document.baseURI).href),pu=e.dirname(uu);let du=a.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(du).href:"undefined"==typeof document?location.href:y&&"SCRIPT"===y.tagName.toUpperCase()&&y.src||new URL("w-web-sso.umd.js",document.baseURI).href),mu=e.dirname(du);function hu(t,i,n={}){let s=async()=>{let t=await async function(t=7,i="hr",n={}){let s=ht(),a=e.resolve(lu,"staUserAccountLogin.shellWorker.mjs"),r=new o.Worker(a);return r.on("message",(e=>{"done"===e.mode?s.resolve(e.payload):"error"===e.mode&&s.reject(e.payload),r.terminate()})),r.on("error",(e=>{s.reject(e)})),r.postMessage({timeLength:t,timeInterval:i,opt:n}),s}();return t},a=Ql(),r=async()=>await a.getProxy("fun",{fun:s,inputs:null,timeExpired:3e4}),c=async()=>{let t=await async function(t=7,i="hr",n={}){let s=ht(),a=e.resolve(pu,"staToken.shellWorker.mjs"),r=new o.Worker(a);return r.on("message",(e=>{"done"===e.mode?s.resolve(e.payload):"error"===e.mode&&s.reject(e.payload),r.terminate()})),r.on("error",(e=>{s.reject(e)})),r.postMessage({timeLength:t,timeInterval:i,opt:n}),s}(),n={};Ti(t,(e=>{Ti(e.data,((e,t)=>{if("count"===t)return!0;n[t]=0}))}));let s=await i.getUsersListCache(),a={count:0};return Ti(s,(e=>{a[e.id]=e.name})),t=Hn(t,(e=>{let t=xo(n);var i,s,o;return Ti(e.data,((e,i)=>{t[i]=e})),i=t,o={},s=Fn(s=(e,t)=>"count"===t?t:ve(a,t,t)),Li(i,(function(e,t,i){Cs(o,s(e,t,i),e)})),t=o,{time:e.time,data:{count:e.count,...t}}})),t},l=Ql(),u=async()=>await l.getProxy("fun",{fun:c,inputs:null,timeExpired:3e4}),p=async()=>{let t=await async function(t=7,i="hr",n={}){let s=ht(),a=e.resolve(mu,"staIp.shellWorker.mjs"),r=new o.Worker(a);return r.on("message",(e=>{"done"===e.mode?s.resolve(e.payload):"error"===e.mode&&s.reject(e.payload),r.terminate()})),r.on("error",(e=>{s.reject(e)})),r.postMessage({timeLength:t,timeInterval:i,opt:n}),s}(),i={};return Ti(t,(e=>{Ti(e.data,((e,t)=>{if("count"===t)return!0;i[t]=0}))})),t=Hn(t,(e=>{let t=xo(i);return Ti(e.data,((e,i)=>{t[i]=e})),{time:e.time,data:{count:e.count,...t}}})),t},d=Ql(),m=async()=>await d.getProxy("fun",{fun:p,inputs:null,timeExpired:3e4}),h={getStaUserSummary:async()=>{let e=await i.getUsersListCache(),t=jo(e),n=0;n=jo(ar(e,(e=>Hr(e))));let s=0;s=jo(ar(e,(e=>Gr(e))));let o=0;o=jo(ar(e,(e=>Fr(e))));return{total:t,active:n,blocked:s,expired:o}},getStaTokenSummary:async()=>{let e=bt().add(-24,"hour").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),t=bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ"),n=bt().add(24,"hour").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),s=await i.getTokensListCache(),o=jo(s),a=0;a=jo(ar(s,(t=>t.timeCreate>=e)));let r=0;r=jo(ar(s,(e=>e.timeEnd>=t&&e.timeEnd<=n)));let c=0;c=jo(ar(s,(e=>function(e){let t=ve(e,"timeEnd","");return!!zr(t)&&bt().format("YYYY-MM-DDTHH:mm:ss.SSSZ")>t}(e))));return{active:o-c,created24h:a,ending24h:r,ended:c}},getStaIpSummary:async()=>{let e=bt().add(-24,"hour").format("YYYY-MM-DDTHH:mm:ss.SSSZ"),t=await i.getIpsListCache(),n=0;{let t=ar(await m(),(t=>bt(t.time,"YYYY-MM-DDTHH").format("YYYY-MM-DDTHH:mm:ss.SSSZ")>=e));o="data.count",n=(s=t)&&s.length?function(e,t){for(var i,n=-1,s=e.length;++n<s;){var o=t(e[n]);void 0!==o&&(i=void 0===i?o:i+o)}return i}(s,Fn(o)):0}var s,o;let a=0;a=jo(ar(t,(e=>Gr(e))));return{conn24h:n,blocked:a}},getStaUserAccountLogin:r,checkTokenAndGetStaUserAccountLogin:async(e,t={})=>(await i.checkToken(e,t),await r()),getStaToken:u,checkTokenAndGetStaToken:async(e,t={})=>(await i.checkToken(e,t),await u()),getStaIp:m,checkTokenAndGetStaIp:async(e,t={})=>(await i.checkToken(e,t),await m())};return h}var gu={exports:{}};!function(e){e.exports=function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),i=e((function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}));i.version;var n=function(e){return"object"==typeof e?null!==e:"function"==typeof e},s=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e},o=function(e){try{return!!e()}catch(e){return!0}},a=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),r=t.document,c=n(r)&&n(r.createElement),l=function(e){return c?r.createElement(e):{}},u=!a&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),p=function(e,t){if(!n(e))return e;var i,s;if(t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;if("function"==typeof(i=e.valueOf)&&!n(s=i.call(e)))return s;if(!t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,m={f:a?Object.defineProperty:function(e,t,i){if(s(e),t=p(t,!0),s(i),u)try{return d(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},h=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},g=a?function(e,t,i){return m.f(e,t,h(1,i))}:function(e,t,i){return e[t]=i,e},f={}.hasOwnProperty,w=function(e,t){return f.call(e,t)},y=0,x=Math.random(),D=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++y+x).toString(36))},v=e((function(e){var n="__core-js_shared__",s=t[n]||(t[n]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),M=v("native-function-to-string",Function.toString),C=e((function(e){var n=D("src"),s="toString",o=(""+M).split(s);i.inspectSource=function(e){return M.call(e)},(e.exports=function(e,i,s,a){var r="function"==typeof s;r&&(w(s,"name")||g(s,"name",i)),e[i]!==s&&(r&&(w(s,n)||g(s,n,e[i]?""+e[i]:o.join(String(i)))),e===t?e[i]=s:a?e[i]?e[i]=s:g(e,i,s):(delete e[i],g(e,i,s)))})(Function.prototype,s,(function(){return"function"==typeof this&&this[n]||M.call(this)}))})),I=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},b=function(e,t,i){if(I(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)}}return function(){return e.apply(t,arguments)}},L="prototype",A=function(e,n,s){var o,a,r,c,l=e&A.F,u=e&A.G,p=e&A.S,d=e&A.P,m=e&A.B,h=u?t:p?t[n]||(t[n]={}):(t[n]||{})[L],f=u?i:i[n]||(i[n]={}),w=f[L]||(f[L]={});for(o in u&&(s=n),s)r=((a=!l&&h&&void 0!==h[o])?h:s)[o],c=m&&a?b(r,t):d&&"function"==typeof r?b(Function.call,r):r,h&&C(h,o,r,e&A.U),f[o]!=r&&g(f,o,c),d&&w[o]!=r&&(w[o]=r)};t.core=i,A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var E,N=A,T=Math.ceil,S=Math.floor,k=function(e){return isNaN(e=+e)?0:(e>0?S:T)(e)},Z=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},j=(E=!1,function(e,t){var i,n,s=String(Z(e)),o=k(t),a=s.length;return o<0||o>=a?E?"":void 0:(i=s.charCodeAt(o))<55296||i>56319||o+1===a||(n=s.charCodeAt(o+1))<56320||n>57343?E?s.charAt(o):i:E?s.slice(o,o+2):n-56320+(i-55296<<10)+65536});N(N.P,"String",{codePointAt:function(e){return j(this,e)}}),i.String.codePointAt;var X=Math.max,Y=Math.min,z=function(e,t){return(e=k(e))<0?X(e+t,0):Y(e,t)},F=String.fromCharCode,G=String.fromCodePoint;N(N.S+N.F*(!!G&&1!=G.length),"String",{fromCodePoint:function(e){for(var t,i=arguments,n=[],s=arguments.length,o=0;s>o;){if(t=+i[o++],z(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?F(t):F(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),i.String.fromCodePoint;var H,K,B,W,U,P,V,_,R,Q,O,J,q,$,ee={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},te={isSpaceSeparator:function(e){return"string"==typeof e&&ee.Space_Separator.test(e)},isIdStartChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||ee.ID_Start.test(e))},isIdContinueChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||ee.ID_Continue.test(e))},isDigit:function(e){return"string"==typeof e&&/[0-9]/.test(e)},isHexDigit:function(e){return"string"==typeof e&&/[0-9A-Fa-f]/.test(e)}},ie=function(e,t){H=String(e),K="start",B=[],W=0,U=1,P=0,V=void 0,_=void 0,R=void 0;do{V=se(),me[K]()}while("eof"!==V.type);return"function"==typeof t?ne({"":R},"",t):R};function ne(e,t,i){var n=e[t];if(null!=n&&"object"==typeof n)if(Array.isArray(n))for(var s=0;s<n.length;s++){var o=String(s),a=ne(n,o,i);void 0===a?delete n[o]:Object.defineProperty(n,o,{value:a,writable:!0,enumerable:!0,configurable:!0})}else for(var r in n){var c=ne(n,r,i);void 0===c?delete n[r]:Object.defineProperty(n,r,{value:c,writable:!0,enumerable:!0,configurable:!0})}return i.call(e,t,n)}function se(){for(Q="default",O="",J=!1,q=1;;){$=oe();var e=re[Q]();if(e)return e}}function oe(){if(H[W])return String.fromCodePoint(H.codePointAt(W))}function ae(){var e=oe();return"\n"===e?(U++,P=0):e?P+=e.length:P++,e&&(W+=e.length),e}var re={default:function(){switch($){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void ae();case"/":return ae(),void(Q="comment");case void 0:return ae(),ce("eof")}if(!te.isSpaceSeparator($))return re[K]();ae()},comment:function(){switch($){case"*":return ae(),void(Q="multiLineComment");case"/":return ae(),void(Q="singleLineComment")}throw fe(ae())},multiLineComment:function(){switch($){case"*":return ae(),void(Q="multiLineCommentAsterisk");case void 0:throw fe(ae())}ae()},multiLineCommentAsterisk:function(){switch($){case"*":return void ae();case"/":return ae(),void(Q="default");case void 0:throw fe(ae())}ae(),Q="multiLineComment"},singleLineComment:function(){switch($){case"\n":case"\r":case"\u2028":case"\u2029":return ae(),void(Q="default");case void 0:return ae(),ce("eof")}ae()},value:function(){switch($){case"{":case"[":return ce("punctuator",ae());case"n":return ae(),le("ull"),ce("null",null);case"t":return ae(),le("rue"),ce("boolean",!0);case"f":return ae(),le("alse"),ce("boolean",!1);case"-":case"+":return"-"===ae()&&(q=-1),void(Q="sign");case".":return O=ae(),void(Q="decimalPointLeading");case"0":return O=ae(),void(Q="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return O=ae(),void(Q="decimalInteger");case"I":return ae(),le("nfinity"),ce("numeric",1/0);case"N":return ae(),le("aN"),ce("numeric",NaN);case'"':case"'":return J='"'===ae(),O="",void(Q="string")}throw fe(ae())},identifierNameStartEscape:function(){if("u"!==$)throw fe(ae());ae();var e=de();switch(e){case"$":case"_":break;default:if(!te.isIdStartChar(e))throw ye()}O+=e,Q="identifierName"},identifierName:function(){switch($){case"$":case"_":case"‌":case"‍":return void(O+=ae());case"\\":return ae(),void(Q="identifierNameEscape")}if(!te.isIdContinueChar($))return ce("identifier",O);O+=ae()},identifierNameEscape:function(){if("u"!==$)throw fe(ae());ae();var e=de();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!te.isIdContinueChar(e))throw ye()}O+=e,Q="identifierName"},sign:function(){switch($){case".":return O=ae(),void(Q="decimalPointLeading");case"0":return O=ae(),void(Q="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return O=ae(),void(Q="decimalInteger");case"I":return ae(),le("nfinity"),ce("numeric",q*(1/0));case"N":return ae(),le("aN"),ce("numeric",NaN)}throw fe(ae())},zero:function(){switch($){case".":return O+=ae(),void(Q="decimalPoint");case"e":case"E":return O+=ae(),void(Q="decimalExponent");case"x":case"X":return O+=ae(),void(Q="hexadecimal")}return ce("numeric",0*q)},decimalInteger:function(){switch($){case".":return O+=ae(),void(Q="decimalPoint");case"e":case"E":return O+=ae(),void(Q="decimalExponent")}if(!te.isDigit($))return ce("numeric",q*Number(O));O+=ae()},decimalPointLeading:function(){if(te.isDigit($))return O+=ae(),void(Q="decimalFraction");throw fe(ae())},decimalPoint:function(){switch($){case"e":case"E":return O+=ae(),void(Q="decimalExponent")}return te.isDigit($)?(O+=ae(),void(Q="decimalFraction")):ce("numeric",q*Number(O))},decimalFraction:function(){switch($){case"e":case"E":return O+=ae(),void(Q="decimalExponent")}if(!te.isDigit($))return ce("numeric",q*Number(O));O+=ae()},decimalExponent:function(){switch($){case"+":case"-":return O+=ae(),void(Q="decimalExponentSign")}if(te.isDigit($))return O+=ae(),void(Q="decimalExponentInteger");throw fe(ae())},decimalExponentSign:function(){if(te.isDigit($))return O+=ae(),void(Q="decimalExponentInteger");throw fe(ae())},decimalExponentInteger:function(){if(!te.isDigit($))return ce("numeric",q*Number(O));O+=ae()},hexadecimal:function(){if(te.isHexDigit($))return O+=ae(),void(Q="hexadecimalInteger");throw fe(ae())},hexadecimalInteger:function(){if(!te.isHexDigit($))return ce("numeric",q*Number(O));O+=ae()},string:function(){switch($){case"\\":return ae(),void(O+=ue());case'"':return J?(ae(),ce("string",O)):void(O+=ae());case"'":return J?void(O+=ae()):(ae(),ce("string",O));case"\n":case"\r":throw fe(ae());case"\u2028":case"\u2029":xe($);break;case void 0:throw fe(ae())}O+=ae()},start:function(){switch($){case"{":case"[":return ce("punctuator",ae())}Q="value"},beforePropertyName:function(){switch($){case"$":case"_":return O=ae(),void(Q="identifierName");case"\\":return ae(),void(Q="identifierNameStartEscape");case"}":return ce("punctuator",ae());case'"':case"'":return J='"'===ae(),void(Q="string")}if(te.isIdStartChar($))return O+=ae(),void(Q="identifierName");throw fe(ae())},afterPropertyName:function(){if(":"===$)return ce("punctuator",ae());throw fe(ae())},beforePropertyValue:function(){Q="value"},afterPropertyValue:function(){switch($){case",":case"}":return ce("punctuator",ae())}throw fe(ae())},beforeArrayValue:function(){if("]"===$)return ce("punctuator",ae());Q="value"},afterArrayValue:function(){switch($){case",":case"]":return ce("punctuator",ae())}throw fe(ae())},end:function(){throw fe(ae())}};function ce(e,t){return{type:e,value:t,line:U,column:P}}function le(e){for(var t=0,i=e;t<i.length;t+=1){var n=i[t];if(oe()!==n)throw fe(ae());ae()}}function ue(){switch(oe()){case"b":return ae(),"\b";case"f":return ae(),"\f";case"n":return ae(),"\n";case"r":return ae(),"\r";case"t":return ae(),"\t";case"v":return ae(),"\v";case"0":if(ae(),te.isDigit(oe()))throw fe(ae());return"\0";case"x":return ae(),pe();case"u":return ae(),de();case"\n":case"\u2028":case"\u2029":return ae(),"";case"\r":return ae(),"\n"===oe()&&ae(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw fe(ae())}return ae()}function pe(){var e="",t=oe();if(!te.isHexDigit(t))throw fe(ae());if(e+=ae(),t=oe(),!te.isHexDigit(t))throw fe(ae());return e+=ae(),String.fromCodePoint(parseInt(e,16))}function de(){for(var e="",t=4;t-- >0;){var i=oe();if(!te.isHexDigit(i))throw fe(ae());e+=ae()}return String.fromCodePoint(parseInt(e,16))}var me={start:function(){if("eof"===V.type)throw we();he()},beforePropertyName:function(){switch(V.type){case"identifier":case"string":return _=V.value,void(K="afterPropertyName");case"punctuator":return void ge();case"eof":throw we()}},afterPropertyName:function(){if("eof"===V.type)throw we();K="beforePropertyValue"},beforePropertyValue:function(){if("eof"===V.type)throw we();he()},beforeArrayValue:function(){if("eof"===V.type)throw we();"punctuator"!==V.type||"]"!==V.value?he():ge()},afterPropertyValue:function(){if("eof"===V.type)throw we();switch(V.value){case",":return void(K="beforePropertyName");case"}":ge()}},afterArrayValue:function(){if("eof"===V.type)throw we();switch(V.value){case",":return void(K="beforeArrayValue");case"]":ge()}},end:function(){}};function he(){var e;switch(V.type){case"punctuator":switch(V.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=V.value}if(void 0===R)R=e;else{var t=B[B.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,_,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)B.push(e),K=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var i=B[B.length-1];K=null==i?"end":Array.isArray(i)?"afterArrayValue":"afterPropertyValue"}}function ge(){B.pop();var e=B[B.length-1];K=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function fe(e){return ve(void 0===e?"JSON5: invalid end of input at "+U+":"+P:"JSON5: invalid character '"+De(e)+"' at "+U+":"+P)}function we(){return ve("JSON5: invalid end of input at "+U+":"+P)}function ye(){return ve("JSON5: invalid identifier character at "+U+":"+(P-=5))}function xe(e){console.warn("JSON5: '"+De(e)+"' in strings is not valid ECMAScript; consider escaping")}function De(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var i=e.charCodeAt(0).toString(16);return"\\x"+("00"+i).substring(i.length)}return e}function ve(e){var t=new SyntaxError(e);return t.lineNumber=U,t.columnNumber=P,t}var Me=function(e,t,i){var n,s,o,a=[],r="",c="";if(null==t||"object"!=typeof t||Array.isArray(t)||(i=t.space,o=t.quote,t=t.replacer),"function"==typeof t)s=t;else if(Array.isArray(t)){n=[];for(var l=0,u=t;l<u.length;l+=1){var p=u[l],d=void 0;"string"==typeof p?d=p:("number"==typeof p||p instanceof String||p instanceof Number)&&(d=String(p)),void 0!==d&&n.indexOf(d)<0&&n.push(d)}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),"number"==typeof i?i>0&&(i=Math.min(10,Math.floor(i)),c="          ".substr(0,i)):"string"==typeof i&&(c=i.substr(0,10)),m("",{"":e});function m(e,t){var i=t[e];switch(null!=i&&("function"==typeof i.toJSON5?i=i.toJSON5(e):"function"==typeof i.toJSON&&(i=i.toJSON(e))),s&&(i=s.call(t,e,i)),i instanceof Number?i=Number(i):i instanceof String?i=String(i):i instanceof Boolean&&(i=i.valueOf()),i){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof i?h(i):"number"==typeof i?String(i):"object"==typeof i?Array.isArray(i)?w(i):g(i):void 0}function h(e){for(var t={"'":.1,'"':.2},i={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="",s=0;s<e.length;s++){var a=e[s];switch(a){case"'":case'"':t[a]++,n+=a;continue;case"\0":if(te.isDigit(e[s+1])){n+="\\x00";continue}}if(i[a])n+=i[a];else if(a<" "){var r=a.charCodeAt(0).toString(16);n+="\\x"+("00"+r).substring(r.length)}else n+=a}var c=o||Object.keys(t).reduce((function(e,i){return t[e]<t[i]?e:i}));return c+(n=n.replace(new RegExp(c,"g"),i[c]))+c}function g(e){if(a.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");a.push(e);var t=r;r+=c;for(var i,s,o=[],l=0,u=n||Object.keys(e);l<u.length;l+=1){var p=u[l],d=m(p,e);if(void 0!==d){var h=f(p)+":";""!==c&&(h+=" "),h+=d,o.push(h)}}if(0===o.length)i="{}";else if(""===c)i="{"+(s=o.join(","))+"}";else{var g=",\n"+r;s=o.join(g),i="{\n"+r+s+",\n"+t+"}"}return a.pop(),r=t,i}function f(e){if(0===e.length)return h(e);var t=String.fromCodePoint(e.codePointAt(0));if(!te.isIdStartChar(t))return h(e);for(var i=t.length;i<e.length;i++)if(!te.isIdContinueChar(String.fromCodePoint(e.codePointAt(i))))return h(e);return e}function w(e){if(a.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");a.push(e);var t=r;r+=c;for(var i,n=[],s=0;s<e.length;s++){var o=m(String(s),e);n.push(void 0!==o?o:"null")}if(0===n.length)i="[]";else if(""===c)i="["+n.join(",")+"]";else{var l=",\n"+r,u=n.join(l);i="[\n"+r+u+",\n"+t+"]"}return a.pop(),r=t,i}},Ce={parse:ie,stringify:Me},Ie=Ce,be=Ie;return be}()}(gu);var fu=Ct(gu.exports);let wu=e.resolve(),yu=e.resolve(wu,"settings.json"),xu=e=>{yu=e},Du=()=>{let e=t.readFileSync(yu,"utf8");return fu.parse(e)};return function(i,n,s,o){let a=null;if(!lt(i))throw console.log("invalid WOrm",i),new Error("invalid WOrm");if(!be(n))throw console.log("invalid url",n),new Error("invalid url");if(!be(s))throw console.log("invalid db",s),new Error("invalid db");Dt(o)||(o="./settings.json"),xu(o);let r=Du(),c=ve(r,"serverPort");Ve(c)||(c=11007),c=Pe(c);let l=ve(r,"useCheckUser",!1),u=ve(r,"getUserById",null),p=ve(r,"useExcludeWhenNotAdmin",!1),d=ve(r,"webName",{}),m=ve(r,"webDescription",{}),h=ve(r,"webLogo",""),g=ve(r,"webBackgoundGradientColors",[]);Je(g)||(g=["#FFE0B2","#FFCC80","#FFF59D","#F2D6A2","#F0CC88"]);let f=ve(r,"webKey",""),w=ve(r,"salt",""),y=ve(r,"minExpired","");qe(y)||(y=30);let x=ve(r,"minForAccountLoginFailed","");qe(x)||(x=10);let D=ve(r,"numForAccountLoginFailed","");qe(D)||(D=3);let v=ve(r,"minBlockForAccountLoginFailed","");qe(v)||(v=30);let M=ve(r,"minForTokenCallApi","");qe(M)||(M=10);let C=ve(r,"numForTokenCallApi","");qe(C)||(C=1e3);let I=ve(r,"minBlockForTokenCallApi","");qe(I)||(I=30);let b=ve(r,"minForIpCallApi","");qe(b)||(b=10);let L=ve(r,"numForIpCallApi","");qe(L)||(L=1e4);let A=ve(r,"minBlockForIpCallApi","");qe(A)||(A=30);let E=ve(r,"userLogo",""),N=ve(r,"subfolder","");be(N)&&("/"===dt(N,1)&&(N=mt(N,1)),"/"!==pt(N,1)&&(N=`/${N}`));let T=ve(r,"showLanguage","n"),S=ve(r,"language","eng"),k=ve(r,"showModeEditUsers","n"),Z=ve(r,"modeEditUsers","n"),j=ve(r,"showModeEditTokens","n"),X=ve(r,"modeEditTokens","n"),Y=ve(r,"showModeEditIps","n"),z=ve(r,"modeEditIps","n");ve(r,"mappingBy","");let F=ve(r,"kpLangExt",{}),G=ve(r,"chpwEmTitle",""),H=ve(r,"chpwEmContent",""),K=dc(r),B=(e=>{let t=ve(e,"emSrcEmail","");if(!be(t))throw new Error(`invalid srcEmail[${t}]`);let i=ve(e,"emSrcPW","");if(!be(t))throw new Error(`invalid srcPW[${i}]`);let n=ve(e,"emSrcHost","");if(!be(n))throw new Error(`invalid srcHost[${n}]`);let s=ve(e,"emSrcPort","");if(!Ve(s))throw new Error(`invalid srcPort[${s}]`);return{send:async(e,o,a,r)=>{if(!be(e))return Promise.reject(`invalid srcName[${e}]`);if(!be(o))return Promise.reject(`invalid emTitle[${o}]`);if(!be(a))return Promise.reject(`invalid emContent[${a}]`);if(be(r)&&(r=[r]),!Je(r))return Promise.reject(`invalid toEmails[${r}]`);let c={srcName:e,srcEmail:t,srcPW:i,srcHost:n,srcPort:s,emTitle:o,emContent:a,toEmails:r};return await new _l(c)}}})(r),W=au({kpLangExt:F,webName:d,webDescription:m}),U={useCheckUser:l,getUserById:u,useExcludeWhenNotAdmin:p},P={};try{P=xr(jr,i,n,s,U)}catch(e){console.log(e)}let{woItems:V,procOrm:_}=P,R=su(V,_,{srLog:K,srEmail:B,salt:w,minExpired:y,kpLang:W,chpwEmTitle:G,chpwEmContent:H}),Q=ru(V,R,{minForAccountLoginFailed:x,numForAccountLoginFailed:D,minBlockForAccountLoginFailed:v,minForTokenCallApi:M,numForTokenCallApi:C,minBlockForTokenCallApi:I,minForIpCallApi:b,numForIpCallApi:L,minBlockForIpCallApi:A}),O=hu(0,R,{}),J=(e,t)=>Kr(t),q="dist",$="./node_modules/w-web-sso/dist";yt($)&&(q=$);let ee="index.html";try{let i=e.resolve(q,"index.tmp");if(Dt(i)||(i=e.resolve(q,ee)),!Dt(i))throw console.log("fpEntryIn",i),new Error("invalid fpEntryIn");let n=e.resolve(q,ee),s=t.readFileSync(i,"utf8");s=vt(s,"/msso/","{sfd}/"),s=vt(s,"{sfd}",N),s=vt(s,"{language}",S),t.writeFileSync(n,s,"utf8")}catch(e){console.log(e),console.log(`can not generate ${ee}`)}let te=[{method:"GET",path:"/api/logoutSsoUser",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token","");return K.info({event:"api/logoutSsoUser",token:t}),await R.logoutByToken(t)}))();return ct(i.msg)&&(i.msg=i.msg.message),i}},{method:"GET",path:"/api/checkToken",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token","");return K.info({event:"api/checkToken",token:t}),Q.callApiByToken(t),await R.checkToken(t)}))();return ct(i.msg)&&(i.msg=i.msg.message),i}},{method:"GET",path:"/api/refreshToken",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token","");return K.info({event:"api/refreshToken",token:t}),Q.callApiByToken(t),await R.refreshToken(t)}))();return ct(i.msg)&&(i.msg=i.msg.message),i}},{method:"GET",path:"/api/logoutByToken",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token","");return K.info({event:"api/logoutByToken",token:t}),Q.callApiByToken(t),await R.logoutByToken(t)}))();return ct(i.msg)&&(i.msg=i.msg.message),i}},{method:"GET",path:"/api/getSsoUsersList",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token","");return K.info({event:"api/getSsoUsersList",token:t}),Q.callApiByToken(t),await R.checkTokenAndGetUsersList(t,{})}))();return ct(i.msg)&&(i.msg=i.msg.message),i}},{method:"GET",path:"/api/getSsoUserInfor",handler:async function(e,t){let i=await ft((async function(){let t=ve(e,"query.token",""),i=ve(e,"query.key",""),n=ve(e,"query.value","");K.info({event:"api/getSsoUserInfor",token:t,key:i,value:n}),Q.callApiByToken(t);let s=null;return s="token"===i?await R.checkTokenAndGetUserByToken(t,n):await R.checkTokenAndGetUserInfor(t,i,n),Ce(s)?s:(console.log("token",t),console.log("key",i,"value",n),console.log("token does not have permission"),Promise.reject("token does not have permission"))}))();return ct(i.msg)&&(i.msg=i.msg.message),i}}];return a=new Uo({port:r.serverPort,pathStaticFiles:q,apiName:"api",apis:te,tokenType:"Bearer",verifyConn:async({apiType:e,authorization:t,query:i,headers:n,req:s})=>{let o=Q.getIpByHeaders(s),a=ve(n,"origin",""),r=ve(n,"referer","");K.info({event:"verifyConn",ip:o,origin:a,referer:r}),Q.callApiByIp(o);let c=!0;return await Q.getBlockedByIp(o).then((e=>{c=e})).catch((()=>{c=!0})),c=!c,c||console.log(`block ip[${o}]`),c},getUserIdByToken:async e=>"",corsOrigins:["*"],useDbOrm:!1,tableNamesExec:[],methodsExec:[],tableNamesSync:[],kpFunExt:{getWebInfor:async e=>({webLogo:h,webBackgoundGradientColors:g,webKey:f,userLogo:E,showLanguage:T,language:S,kpLang:W,showModeEditUsers:k,modeEditUsers:Z,showModeEditTokens:j,modeEditTokens:X,showModeEditIps:Y,modeEditIps:z}),checkToken:async(e,t)=>(K.info({event:"kpfun-checkToken",token:t}),await R.checkToken(t)),refreshToken:async(e,t)=>(K.info({event:"kpfun-refreshToken",token:t}),await R.refreshToken(t)),loginByAccountAndPassword:async(e,t,i)=>{K.info({event:"kpfun-loginByAccountAndPassword-before",account:t});let n=null,s="";return await Q.loginByAccountAndPassword(t,i).then((e=>{n=e})).catch((e=>{s=e})),Ce(n)?K.info({event:"kpfun-loginByAccountAndPassword-success",account:t}):K.info({event:"kpfun-loginByAccountAndPassword-error",account:t,msg:s}),Ce(n)?n:Promise.reject(s)},logoutByToken:async(e,t)=>(K.info({event:"kpfun-logoutByToken",token:t}),await R.logoutByToken(t)),getUserByToken:async(e,t)=>(K.info({event:"kpfun-getUserByToken",token:t}),await R.checkTokenAndGetUserByToken(t,t)),getUserInfor:async(e,t,i,n)=>(K.info({event:"kpfun-getUserInfor",token:t,key:i,value:n}),await R.checkTokenAndGetUserInfor(t,i,n)),checkUserPassword:async(e,t,i)=>(K.info({event:"kpfun-checkUserPassword",lang:t,pw:i}),await R.checkUserPassword(t,i)),changeUserPassword:async(e,t,i,n,s)=>(K.info({event:"kpfun-changeUserPassword",token:t,lang:i,pwOld:n,pwNew:s}),await R.checkTokenAndChangePassword(t,i,n,s)),getUsersList:async(e,t)=>(K.info({event:"kpfun-getUsersList",token:t}),await R.checkTokenAndGetUsersList(t,{fun:J})),updateUsersList:async(e,t,i)=>(K.info({event:"kpfun-updateUsersList",token:t}),await R.checkTokenAndUpdateUsersList(t,i,{fun:J})),getTokensList:async(e,t)=>(K.info({event:"kpfun-getTokensList",token:t}),await R.checkTokenAndGetTokensList(t,{fun:J})),updateTokensList:async(e,t,i)=>(K.info({event:"kpfun-updateTokensList",token:t}),await R.checkTokenAndUpdateTokensList(t,i,{fun:J})),getIpsList:async(e,t)=>(K.info({event:"kpfun-getIpsList",token:t}),await R.checkTokenAndGetIpsList(t,{fun:J})),updateIpsList:async(e,t,i)=>(K.info({event:"kpfun-updateIpsList",token:t}),await R.checkTokenAndUpdateIpsList(t,i,{fun:J})),getStaUserSummary:async(e,t)=>(K.info({event:"kpfun-getStaUserSummary",token:t}),await O.getStaUserSummary(t,{fun:J})),getStaTokenSummary:async(e,t)=>(K.info({event:"kpfun-getStaTokenSummary",token:t}),await O.getStaTokenSummary(t,{fun:J})),getStaIpSummary:async(e,t)=>(K.info({event:"kpfun-getStaIpSummary",token:t}),await O.getStaIpSummary(t,{fun:J})),getStaUserAccountLogin:async(e,t)=>(K.info({event:"kpfun-getStaUserAccountLogin",token:t}),await O.checkTokenAndGetStaUserAccountLogin(t,{fun:J})),getStaToken:async(e,t)=>(K.info({event:"kpfun-getStaToken",token:t}),await O.checkTokenAndGetStaToken(t,{fun:J})),getStaIp:async(e,t)=>(K.info({event:"kpfun-getStaIp",token:t}),await O.checkTokenAndGetStaIp(t,{fun:J}))},fnTableTags:"tableTags-web-sso.json"}),a}}));
//# sourceMappingURL=w-web-sso.umd.js.map
